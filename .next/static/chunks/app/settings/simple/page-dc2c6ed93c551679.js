(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8493],{4090:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var r=s(2432),a=s(364),l=s(9262),o=s(7616);function d(){let{user:e,loading:t,setUser:s}=(0,o.J)(),d=(0,l.useRouter)(),[n,i]=(0,a.useState)(!1);(0,a.useEffect)(()=>{t||e||d.push("/auth")},[t,e,d]);let c=async()=>{try{await fetch("/api/auth/signout",{method:"POST"}),d.push("/auth")}catch(e){d.push("/auth")}},u=async e=>{i(!0);try{await fetch("/api/user/settings",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({ui_mode:e})}),localStorage.setItem("ui-mode",e),d.push("/dashboard".concat("full"===e?"":"/".concat(e)))}catch(e){console.error("Failed to switch mode:",e)}finally{i(!1)}};return t?(0,r.jsx)("div",{style:{padding:"20px",fontFamily:"monospace"},children:"Loading..."}):e?(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800",children:[(0,r.jsx)("div",{className:"sticky top-0 z-10 bg-white/90 dark:bg-slate-900/90 backdrop-blur-sm border-b border-slate-200 dark:border-slate-700",children:(0,r.jsx)("div",{className:"max-w-2xl mx-auto px-4 py-3",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),(0,r.jsx)("h1",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Settings"})]}),(0,r.jsx)("button",{onClick:()=>d.push("/dashboard/simple"),className:"px-3 py-1.5 bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 rounded-lg text-xs font-medium hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors",children:"â† Back"})]})})}),(0,r.jsx)("div",{className:"max-w-2xl mx-auto px-4 py-6",children:(0,r.jsx)("div",{className:"bg-white dark:bg-slate-900 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden",children:(0,r.jsxs)("div",{className:"p-6 space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-slate-50 dark:bg-slate-800/50 rounded-lg",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold text-lg",children:e.username.charAt(0).toUpperCase()}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:["@",e.username]}),(0,r.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:e.email})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-slate-900 dark:text-slate-100 mb-3",children:"Interface Mode"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 mb-3",children:[(0,r.jsxs)("button",{onClick:()=>u("simple"),disabled:n,className:"p-4 border-2 border-blue-500 bg-blue-50 dark:bg-blue-900/20 rounded-lg text-left transition-all disabled:opacity-50",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:"Simple"}),(0,r.jsx)("div",{className:"text-xs text-blue-700 dark:text-blue-300 mt-1",children:"Current mode"})]}),(0,r.jsxs)("button",{onClick:()=>u("lite"),disabled:n,className:"p-4 border border-slate-200 dark:border-slate-700 hover:border-slate-300 dark:hover:border-slate-600 rounded-lg text-left transition-all disabled:opacity-50",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:"Lite"}),(0,r.jsx)("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Minimal features"})]}),(0,r.jsxs)("button",{onClick:()=>u("full"),disabled:n,className:"p-4 border border-slate-200 dark:border-slate-700 hover:border-slate-300 dark:hover:border-slate-600 rounded-lg text-left transition-all disabled:opacity-50",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:"Full"}),(0,r.jsx)("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"All features"})]})]}),(0,r.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Switch between different interface complexity levels"})]}),(0,r.jsx)("div",{className:"pt-4 border-t border-slate-200 dark:border-slate-700",children:(0,r.jsx)("button",{onClick:c,className:"w-full px-4 py-3 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400 rounded-lg text-sm font-medium hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors border border-red-200 dark:border-red-800",children:"Sign Out"})})]})})})]}):null}},6534:(e,t,s)=>{Promise.resolve().then(s.bind(s,4090))},7328:(e,t,s)=>{"use strict";s.d(t,{D:()=>c,N:()=>u});var r=s(364),a=(e,t,s,r,a,l,o,d)=>{let n=document.documentElement,i=["light","dark"];function c(t){var s;(Array.isArray(e)?e:[e]).forEach(e=>{let s="class"===e,r=s&&l?a.map(e=>l[e]||e):a;s?(n.classList.remove(...r),n.classList.add(l&&l[t]?l[t]:t)):n.setAttribute(e,t)}),s=t,d&&i.includes(s)&&(n.style.colorScheme=s)}if(r)c(r);else try{let e=localStorage.getItem(t)||s,r=o&&"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e;c(r)}catch(e){}},l=["light","dark"],o="(prefers-color-scheme: dark)",d="undefined"==typeof window,n=r.createContext(void 0),i={setTheme:e=>{},themes:[]},c=()=>{var e;return null!=(e=r.useContext(n))?e:i},u=e=>r.useContext(n)?r.createElement(r.Fragment,null,e.children):r.createElement(h,{...e}),m=["light","dark"],h=e=>{let{forcedTheme:t,disableTransitionOnChange:s=!1,enableSystem:a=!0,enableColorScheme:d=!0,storageKey:i="theme",themes:c=m,defaultTheme:u=a?"system":"light",attribute:h="data-theme",value:g,children:v,nonce:y,scriptProps:k}=e,[w,j]=r.useState(()=>b(i,u)),[N,E]=r.useState(()=>"system"===w?p():w),S=g?Object.values(g):c,C=r.useCallback(e=>{let t=e;if(!t)return;"system"===e&&a&&(t=p());let r=g?g[t]:t,o=s?f(y):null,n=document.documentElement,i=e=>{"class"===e?(n.classList.remove(...S),r&&n.classList.add(r)):e.startsWith("data-")&&(r?n.setAttribute(e,r):n.removeAttribute(e))};if(Array.isArray(h)?h.forEach(i):i(h),d){let e=l.includes(u)?u:null,s=l.includes(t)?t:e;n.style.colorScheme=s}null==o||o()},[y]),T=r.useCallback(e=>{let t="function"==typeof e?e(w):e;j(t);try{localStorage.setItem(i,t)}catch(e){}},[w]),L=r.useCallback(e=>{E(p(e)),"system"===w&&a&&!t&&C("system")},[w,t]);r.useEffect(()=>{let e=window.matchMedia(o);return e.addListener(L),L(e),()=>e.removeListener(L)},[L]),r.useEffect(()=>{let e=e=>{e.key===i&&(e.newValue?j(e.newValue):T(u))};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[T]),r.useEffect(()=>{C(null!=t?t:w)},[t,w]);let P=r.useMemo(()=>({theme:w,setTheme:T,forcedTheme:t,resolvedTheme:"system"===w?N:w,themes:a?[...c,"system"]:c,systemTheme:a?N:void 0}),[w,T,t,N,a,c]);return r.createElement(n.Provider,{value:P},r.createElement(x,{forcedTheme:t,storageKey:i,attribute:h,enableSystem:a,enableColorScheme:d,defaultTheme:u,value:g,themes:c,nonce:y,scriptProps:k}),v)},x=r.memo(e=>{let{forcedTheme:t,storageKey:s,attribute:l,enableSystem:o,enableColorScheme:d,defaultTheme:n,value:i,themes:c,nonce:u,scriptProps:m}=e,h=JSON.stringify([l,s,n,t,c,i,o,d]).slice(1,-1);return r.createElement("script",{...m,suppressHydrationWarning:!0,nonce:"undefined"==typeof window?u:"",dangerouslySetInnerHTML:{__html:"(".concat(a.toString(),")(").concat(h,")")}})}),b=(e,t)=>{let s;if(!d){try{s=localStorage.getItem(e)||void 0}catch(e){}return s||t}},f=e=>{let t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},p=e=>(e||(e=window.matchMedia(o)),e.matches?"dark":"light")},7616:(e,t,s)=>{"use strict";s.d(t,{J:()=>n,v:()=>d});var r=s(2432),a=s(364),l=s(7328);let o=(0,a.createContext)(void 0);function d(e){let{children:t}=e,[s,d]=(0,a.useState)(null),[n,i]=(0,a.useState)(!0),{setTheme:c,theme:u}=(0,l.D)(),[m,h]=(0,a.useState)(!1);(0,a.useEffect)(()=>{h(!0)},[]);let x=e=>{m&&((null==e?void 0:e.hue)?(console.log("[UserProvider] Applying hue:",e.hue),["hue-blue","hue-purple","hue-pink","hue-red","hue-orange","hue-yellow","hue-green","hue-teal"].forEach(e=>document.documentElement.classList.remove(e)),document.documentElement.classList.add("hue-".concat(e.hue))):(["hue-blue","hue-purple","hue-pink","hue-red","hue-orange","hue-yellow","hue-green","hue-teal"].forEach(e=>document.documentElement.classList.remove(e)),document.documentElement.classList.add("hue-blue")))};return(0,a.useEffect)(()=>{let e=async()=>{try{console.log("[UserProvider] Fetching user data...");let e=await fetch("/api/auth/me",{cache:"no-store"});if(e.ok){let t=await e.json();if(console.log("[UserProvider] User data received:",t.user),d(t.user),m&&t.user){try{c(t.user.theme||"light")}catch(e){}x(t.user)}}else console.log("[UserProvider] No user found"),d(null)}catch(e){console.error("[UserProvider] Fetch error:",e),d(null)}finally{i(!1)}};m&&(e(),setTimeout(()=>{},0))},[m,c]),(0,a.useEffect)(()=>{m&&x(s)},[s,m]),(0,r.jsx)(o.Provider,{value:{user:s,loading:n,setUser:e=>{console.log("[UserProvider] updateUser called with:",e),d(e),m&&e&&(c(e.theme||"light"),x(e))}},children:t})}function n(){let e=(0,a.useContext)(o);if(void 0===e)throw Error("useUser must be used within a UserProvider");return e}},9262:(e,t,s)=>{"use strict";var r=s(6834);s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})}},e=>{var t=t=>e(e.s=t);e.O(0,[5022,5575,7358],()=>t(6534)),_N_E=e.O()}]);