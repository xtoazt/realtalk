(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8493],{4090:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var o=r(2432),s=r(364),n=r(9262),l=r(7616);function i(){let{user:e,loading:t,setUser:r}=(0,l.J)(),i=(0,n.useRouter)(),[a,c]=(0,s.useState)(!1);(0,s.useEffect)(()=>{t||e||i.push("/auth")},[t,e,i]);let d=async()=>{try{await fetch("/api/auth/signout",{method:"POST"}),i.push("/auth")}catch(e){i.push("/auth")}},u=async e=>{c(!0);try{await fetch("/api/user/settings",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({ui_mode:e})}),localStorage.setItem("ui-mode",e),i.push("/dashboard".concat("full"===e?"":"/".concat(e)))}catch(e){console.error("Failed to switch mode:",e)}finally{c(!1)}};return t?(0,o.jsx)("div",{style:{padding:"20px",fontFamily:"monospace"},children:"Loading..."}):e?(0,o.jsxs)("div",{style:{fontFamily:"monospace",backgroundColor:"#ffffff",color:"#000000",minHeight:"100vh",padding:"20px"},children:[(0,o.jsxs)("div",{style:{borderBottom:"1px solid #cccccc",paddingBottom:"10px",marginBottom:"20px"},children:[(0,o.jsx)("strong",{children:"Settings"}),(0,o.jsx)("button",{onClick:()=>i.push("/dashboard/simple"),style:{float:"right",padding:"2px 8px",border:"1px solid #ccc",background:"white",cursor:"pointer",fontSize:"10px"},children:"BACK"})]}),(0,o.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,o.jsxs)("div",{style:{marginBottom:"10px"},children:[(0,o.jsx)("strong",{children:"User:"})," @",e.username]}),(0,o.jsxs)("div",{style:{marginBottom:"10px"},children:[(0,o.jsx)("strong",{children:"Email:"})," ",e.email]})]}),(0,o.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,o.jsx)("div",{style:{marginBottom:"10px",fontWeight:"bold"},children:"UI Mode:"}),(0,o.jsxs)("div",{style:{display:"flex",gap:"5px",marginBottom:"10px"},children:[(0,o.jsx)("button",{onClick:()=>u("simple"),disabled:a,style:{padding:"5px 10px",border:"2px solid #000",background:"#000",color:"#fff",cursor:"pointer",fontSize:"11px"},children:"SIMPLE (CURRENT)"}),(0,o.jsx)("button",{onClick:()=>u("lite"),disabled:a,style:{padding:"5px 10px",border:"1px solid #ccc",background:"white",cursor:a?"not-allowed":"pointer",fontSize:"11px"},children:"LITE"}),(0,o.jsx)("button",{onClick:()=>u("full"),disabled:a,style:{padding:"5px 10px",border:"1px solid #ccc",background:"white",cursor:a?"not-allowed":"pointer",fontSize:"11px"},children:"FULL"})]}),(0,o.jsxs)("div",{style:{fontSize:"10px",color:"#666"},children:["Simple: Basic chat only",(0,o.jsx)("br",{}),"Lite: Minimal features",(0,o.jsx)("br",{}),"Full: All features"]})]}),(0,o.jsx)("div",{style:{marginTop:"40px",paddingTop:"20px",borderTop:"1px solid #ccc"},children:(0,o.jsx)("button",{onClick:d,style:{padding:"8px 16px",border:"1px solid #ff0000",background:"#ffffff",color:"#ff0000",cursor:"pointer",fontSize:"11px"},children:"SIGN OUT"})})]}):null}},6534:(e,t,r)=>{Promise.resolve().then(r.bind(r,4090))},7328:(e,t,r)=>{"use strict";r.d(t,{D:()=>d,N:()=>u});var o=r(364),s=(e,t,r,o,s,n,l,i)=>{let a=document.documentElement,c=["light","dark"];function d(t){var r;(Array.isArray(e)?e:[e]).forEach(e=>{let r="class"===e,o=r&&n?s.map(e=>n[e]||e):s;r?(a.classList.remove(...o),a.classList.add(n&&n[t]?n[t]:t)):a.setAttribute(e,t)}),r=t,i&&c.includes(r)&&(a.style.colorScheme=r)}if(o)d(o);else try{let e=localStorage.getItem(t)||r,o=l&&"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e;d(o)}catch(e){}},n=["light","dark"],l="(prefers-color-scheme: dark)",i="undefined"==typeof window,a=o.createContext(void 0),c={setTheme:e=>{},themes:[]},d=()=>{var e;return null!=(e=o.useContext(a))?e:c},u=e=>o.useContext(a)?o.createElement(o.Fragment,null,e.children):o.createElement(m,{...e}),h=["light","dark"],m=e=>{let{forcedTheme:t,disableTransitionOnChange:r=!1,enableSystem:s=!0,enableColorScheme:i=!0,storageKey:c="theme",themes:d=h,defaultTheme:u=s?"system":"light",attribute:m="data-theme",value:x,children:b,nonce:v,scriptProps:w}=e,[S,E]=o.useState(()=>f(c,u)),[k,C]=o.useState(()=>"system"===S?y():S),j=x?Object.values(x):d,T=o.useCallback(e=>{let t=e;if(!t)return;"system"===e&&s&&(t=y());let o=x?x[t]:t,l=r?g(v):null,a=document.documentElement,c=e=>{"class"===e?(a.classList.remove(...j),o&&a.classList.add(o)):e.startsWith("data-")&&(o?a.setAttribute(e,o):a.removeAttribute(e))};if(Array.isArray(m)?m.forEach(c):c(m),i){let e=n.includes(u)?u:null,r=n.includes(t)?t:e;a.style.colorScheme=r}null==l||l()},[v]),L=o.useCallback(e=>{let t="function"==typeof e?e(S):e;E(t);try{localStorage.setItem(c,t)}catch(e){}},[S]),P=o.useCallback(e=>{C(y(e)),"system"===S&&s&&!t&&T("system")},[S,t]);o.useEffect(()=>{let e=window.matchMedia(l);return e.addListener(P),P(e),()=>e.removeListener(P)},[P]),o.useEffect(()=>{let e=e=>{e.key===c&&(e.newValue?E(e.newValue):L(u))};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[L]),o.useEffect(()=>{T(null!=t?t:S)},[t,S]);let U=o.useMemo(()=>({theme:S,setTheme:L,forcedTheme:t,resolvedTheme:"system"===S?k:S,themes:s?[...d,"system"]:d,systemTheme:s?k:void 0}),[S,L,t,k,s,d]);return o.createElement(a.Provider,{value:U},o.createElement(p,{forcedTheme:t,storageKey:c,attribute:m,enableSystem:s,enableColorScheme:i,defaultTheme:u,value:x,themes:d,nonce:v,scriptProps:w}),b)},p=o.memo(e=>{let{forcedTheme:t,storageKey:r,attribute:n,enableSystem:l,enableColorScheme:i,defaultTheme:a,value:c,themes:d,nonce:u,scriptProps:h}=e,m=JSON.stringify([n,r,a,t,d,c,l,i]).slice(1,-1);return o.createElement("script",{...h,suppressHydrationWarning:!0,nonce:"undefined"==typeof window?u:"",dangerouslySetInnerHTML:{__html:"(".concat(s.toString(),")(").concat(m,")")}})}),f=(e,t)=>{let r;if(!i){try{r=localStorage.getItem(e)||void 0}catch(e){}return r||t}},g=e=>{let t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},y=e=>(e||(e=window.matchMedia(l)),e.matches?"dark":"light")},7616:(e,t,r)=>{"use strict";r.d(t,{J:()=>a,v:()=>i});var o=r(2432),s=r(364),n=r(7328);let l=(0,s.createContext)(void 0);function i(e){let{children:t}=e,[r,i]=(0,s.useState)(null),[a,c]=(0,s.useState)(!0),{setTheme:d,theme:u}=(0,n.D)(),[h,m]=(0,s.useState)(!1);(0,s.useEffect)(()=>{m(!0)},[]);let p=e=>{h&&((null==e?void 0:e.hue)?(console.log("[UserProvider] Applying hue:",e.hue),["hue-blue","hue-purple","hue-pink","hue-red","hue-orange","hue-yellow","hue-green","hue-teal"].forEach(e=>document.documentElement.classList.remove(e)),document.documentElement.classList.add("hue-".concat(e.hue))):(["hue-blue","hue-purple","hue-pink","hue-red","hue-orange","hue-yellow","hue-green","hue-teal"].forEach(e=>document.documentElement.classList.remove(e)),document.documentElement.classList.add("hue-blue")))};return(0,s.useEffect)(()=>{let e=async()=>{try{console.log("[UserProvider] Fetching user data...");let e=await fetch("/api/auth/me",{cache:"no-store"});if(e.ok){let t=await e.json();if(console.log("[UserProvider] User data received:",t.user),i(t.user),h&&t.user){try{d(t.user.theme||"light")}catch(e){}p(t.user)}}else console.log("[UserProvider] No user found"),i(null)}catch(e){console.error("[UserProvider] Fetch error:",e),i(null)}finally{c(!1)}};h&&(e(),setTimeout(()=>{},0))},[h,d]),(0,s.useEffect)(()=>{h&&p(r)},[r,h]),(0,o.jsx)(l.Provider,{value:{user:r,loading:a,setUser:e=>{console.log("[UserProvider] updateUser called with:",e),i(e),h&&e&&(d(e.theme||"light"),p(e))}},children:t})}function a(){let e=(0,s.useContext)(l);if(void 0===e)throw Error("useUser must be used within a UserProvider");return e}},9262:(e,t,r)=>{"use strict";var o=r(6834);r.o(o,"useRouter")&&r.d(t,{useRouter:function(){return o.useRouter}})}},e=>{var t=t=>e(e.s=t);e.O(0,[5022,5575,7358],()=>t(6534)),_N_E=e.O()}]);