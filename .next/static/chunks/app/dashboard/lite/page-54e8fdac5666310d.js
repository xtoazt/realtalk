(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7526],{4114:(e,s,t)=>{"use strict";t.d(s,{B:()=>i});var a=t(2432),r=t(364);function i(){let e=(0,r.useRef)(null);return(0,r.useEffect)(()=>{let s=e.current;if(!s)return;let t=s.getContext("2d");if(!t)return;let a=[],r=()=>{s.width=window.innerWidth,s.height=window.innerHeight},i=()=>{a.forEach(e=>{e.x+=e.vx,e.y+=e.vy,(e.x<0||e.x>s.width)&&(e.vx*=-1),(e.y<0||e.y>s.height)&&(e.vy*=-1)})},l=()=>{t.clearRect(0,0,s.width,s.height),t.fillStyle="rgba(0, 0, 0, 0.03)",a.forEach(e=>{t.globalAlpha=e.opacity,t.beginPath(),t.arc(e.x,e.y,e.size,0,2*Math.PI),t.fill()})},n=()=>{i(),l(),requestAnimationFrame(n)};return r(),(()=>{for(let e=0;e<30;e++)a.push({x:Math.random()*s.width,y:Math.random()*s.height,vx:(Math.random()-.5)*.3,vy:(Math.random()-.5)*.3,size:2*Math.random()+1,opacity:.2*Math.random()+.05})})(),n(),window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r)}},[]),(0,a.jsx)("canvas",{ref:e,className:"fixed inset-0 pointer-events-none z-0",style:{background:"transparent"}})}},8663:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>g});var a=t(2432),r=t(364),i=t(9262),l=t(129),n=t(9495),d=t(3143),c=t(7382),o=t(2708),m=t(7616),h=t(2548),x=t(4188),u=t(4114),p=t(4992);function g(){let{user:e,loading:s}=(0,m.J)(),t=(0,i.useRouter)(),[g,v]=(0,r.useState)("home"),[f,j]=(0,r.useState)(null),[N,b]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{s||e||t.push("/auth")},[s,e]),e)?(0,a.jsxs)("div",{className:"relative max-w-7xl mx-auto p-4",children:[(0,a.jsx)(u.B,{}),(0,a.jsxs)("div",{className:"animated-blobs",children:[(0,a.jsx)("div",{className:"animated-blob",style:{top:"-10%",left:"-10%"}}),(0,a.jsx)("div",{className:"animated-blob blob-2",style:{bottom:"-15%",right:"-10%"}}),(0,a.jsx)("div",{className:"animated-blob blob-3",style:{top:"20%",right:"15%"}})]}),(0,a.jsx)("div",{className:"sticky top-0 z-10 mb-4",children:(0,a.jsxs)("div",{className:"relative z-10 glass-effect rounded-2xl border shadow-md px-3 py-2 flex items-center gap-2",children:[["home","global","friends","dms","gc"].map(e=>(0,a.jsx)(o.$,{size:"sm",variant:g===e?"default":"outline",onClick:()=>v(e),className:"capitalize",children:"dms"===e?"DM":"gc"===e?"GC":e},e)),(0,a.jsxs)("div",{className:"ml-auto flex items-center gap-2",children:[(0,a.jsx)(o.$,{size:"sm",variant:"outline",onClick:()=>{try{localStorage.setItem("ui-mode","simple")}catch(e){}t.push("/dashboard/simple")},children:"Simple"}),(0,a.jsx)(o.$,{size:"sm",variant:"secondary",onClick:()=>t.push("/settings/lite"),children:"Settings"})]})]})}),"home"===g&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"relative z-10 text-center py-10",children:[(0,a.jsx)("div",{className:"text-4xl md:text-6xl font-extrabold tracking-tight bg-gradient-to-r from-white to-gray-300 bg-clip-text text-transparent",children:"real."}),(0,a.jsxs)("div",{className:"mt-3 flex flex-col items-center gap-2",children:[(0,a.jsx)(h._,{large:!0}),(0,a.jsx)(x.m,{})]})]}),(0,a.jsxs)("div",{className:"relative z-10 grid gap-4 md:grid-cols-3",children:[(0,a.jsxs)(c.Zp,{className:"p-6 hover:shadow-lg transition cursor-pointer",onClick:()=>v("global"),children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground mb-1",children:"Chat"}),(0,a.jsx)("div",{className:"text-xl font-semibold",children:"Global"}),(0,a.jsx)("div",{className:"mt-2 text-xs text-muted-foreground",children:"Talk to everyone in real-time."})]}),(0,a.jsxs)(c.Zp,{className:"p-6 hover:shadow-lg transition cursor-pointer",onClick:()=>v("friends"),children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground mb-1",children:"Social"}),(0,a.jsx)("div",{className:"text-xl font-semibold",children:"Friends"}),(0,a.jsx)("div",{className:"mt-2 text-xs text-muted-foreground",children:"Manage and find friends."})]}),(0,a.jsxs)(c.Zp,{className:"p-6 hover:shadow-lg transition cursor-pointer",onClick:()=>v("dms"),children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground mb-1",children:"Messages"}),(0,a.jsx)("div",{className:"text-xl font-semibold",children:"DMs"}),(0,a.jsx)("div",{className:"mt-2 text-xs text-muted-foreground",children:"Direct conversations."})]}),(0,a.jsxs)(c.Zp,{className:"p-6 hover:shadow-lg transition cursor-pointer",onClick:()=>v("gc"),children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground mb-1",children:"Groups"}),(0,a.jsx)("div",{className:"text-xl font-semibold",children:"Group Chats"}),(0,a.jsx)("div",{className:"mt-2 text-xs text-muted-foreground",children:"Chat with your circles."})]}),(0,a.jsxs)(c.Zp,{className:"p-6 hover:shadow-lg transition cursor-pointer",onClick:()=>v("settings"),children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground mb-1",children:"Preferences"}),(0,a.jsx)("div",{className:"text-xl font-semibold",children:"Settings"}),(0,a.jsx)("div",{className:"mt-2 text-xs text-muted-foreground",children:"Themes, notifications, and more."})]})]})]}),"global"===g&&(0,a.jsx)(c.Zp,{className:"p-0 overflow-hidden",children:(0,a.jsx)("div",{className:"h-[calc(100vh-160px)]",children:(0,a.jsx)(d.l,{chatType:"global",chatName:"Global",currentUserId:e.id})})}),"friends"===g&&(0,a.jsx)(c.Zp,{className:"p-4",children:(0,a.jsx)(l.r,{currentUserId:e.id,onStartDM:(e,s)=>{j({id:e,username:s}),v("dms")}})}),"dms"===g&&(0,a.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,a.jsx)(c.Zp,{className:"p-4 md:col-span-1",children:(0,a.jsx)(n.s,{currentUserId:e.id,onSelectDM:(e,s)=>{j({id:e,username:s})}})}),(0,a.jsx)(c.Zp,{className:"p-0 md:col-span-2 min-h-[60vh]",children:f?(0,a.jsx)(d.l,{chatType:"dm",chatId:f.id,chatName:"@".concat(f.username),currentUserId:e.id}):(0,a.jsx)("div",{className:"h-full grid place-items-center text-sm text-muted-foreground",children:"Select a conversation"})})]}),"gc"===g&&(0,a.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,a.jsxs)(c.Zp,{className:"p-4 md:col-span-1",children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground mb-2",children:"Your group chats"}),(0,a.jsx)(o.$,{size:"sm",className:"mb-3",onClick:()=>b(!0),children:"New Group"})]}),(0,a.jsx)(c.Zp,{className:"p-0 md:col-span-2 min-h-[60vh]",children:(0,a.jsx)("div",{className:"h-full grid place-items-center text-sm text-muted-foreground",children:"Open a group chat from the list"})})]}),N&&(0,a.jsx)(p.o,{onClose:()=>b(!1),onCreate:async(e,s)=>{try{let t=await fetch("/api/group-chats",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,memberIds:s})});if(t.ok)b(!1),alert("Group created");else{let e=await t.json();alert(e.error||"Failed to create group")}}catch(e){alert("Failed to create group")}}})]}):null}},9845:(e,s,t)=>{Promise.resolve().then(t.bind(t,8663))}},e=>{var s=s=>e(e.s=s);e.O(0,[4812,7,2261,6345,5849,5022,5575,7358],()=>s(9845)),_N_E=e.O()}]);