"use strict";(()=>{var e={};e.id=8974,e.ids=[8974],e.modules={2052:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"unstable_rethrow",{enumerable:!0,get:function(){return n}});let n=t(26587).unstable_rethrow;("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),e.exports=r.default)},2669:(e,r,t)=>{t.a(e,async(e,n)=>{try{t.r(r),t.d(r,{default:()=>i,dynamic:()=>d});var o=t(77533),a=t(13122),u=e([a]);a=(u.then?(await u)():u)[0];let d="force-dynamic";async function i(){await (0,a.HW)()?(0,o.redirect)("/dashboard"):(0,o.redirect)("/auth")}n()}catch(e){n(e)}})},3295:e=>{e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},7908:(e,r,t)=>{function n(){throw Object.defineProperty(Error("`unauthorized()` is experimental and only allowed to be used when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E411",enumerable:!1,configurable:!0})}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"unauthorized",{enumerable:!0,get:function(){return n}}),t(80441).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),e.exports=r.default)},10762:e=>{e.exports=import("@neondatabase/serverless")},10846:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},13122:(e,r,t)=>{t.a(e,async(e,n)=>{try{t.d(r,{HW:()=>f,Hh:()=>_,Jv:()=>b});var o=t(7994),a=t(75025),u=t(15886),i=t(19246),d=t(7673),l=e([i]);i=(l.then?(await l)():l)[0];let R=new TextEncoder().encode(process.env.JWT_SECRET||"fallback-secret-key");async function s(e){return await new o.P(e).setProtectedHeader({alg:"HS256"}).setIssuedAt().setExpirationTime("24h").sign(R)}async function c(e){let{payload:r}=await (0,a.V)(e,R,{algorithms:["HS256"]});return r}async function f(){let e=await (0,u.UL)(),r=e.get("auth-token")?.value;if(console.log("[auth] getCurrentUser called, token exists:",!!r),!r)return console.log("[auth] No auth token found"),null;try{let e=await c(r);console.log("[auth] Token decrypted successfully, userId:",e.userId);let t=(await (0,i.P)`SELECT * FROM users WHERE id = ${e.userId}`)[0]||null;return console.log("[auth] User found:",!!t),t}catch(e){return console.error("[auth] Error getting current user:",e),null}}async function p(e){return await d.Ay.hash(e,12)}async function _(e,r,t){let n=await p(r),o=null,a=!1;"asdf"===t?o="#6366f1":"qwea"===t&&(a=!0);let u=(await (0,i.P)`
    INSERT INTO users (username, password_hash, signup_code, name_color, has_gold_animation, theme, hue, notifications_enabled, last_active, ui_mode)
    VALUES (${e}, ${n}, ${t||null}, ${o}, ${a}, 'light', 'blue', false, NOW(), 'full')
    RETURNING *
  `)[0],d=await s({userId:u.id});return{user:u,token:d}}async function b(e,r){let t=(await (0,i.P)`SELECT * FROM users WHERE username = ${e}`)[0];if(!t||!await d.Ay.compare(r,t.password_hash))throw Error("Invalid username or password");let n=await s({userId:t.id});return{user:t,token:n}}n()}catch(e){n(e)}})},19121:e=>{e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},26587:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"unstable_rethrow",{enumerable:!0,get:function(){return function e(r){if((0,u.isNextRouterError)(r)||(0,a.isBailoutToCSRError)(r)||(0,d.isDynamicServerError)(r)||(0,i.isDynamicPostpone)(r)||(0,o.isPostpone)(r)||(0,n.isHangingPromiseRejectionError)(r))throw r;r instanceof Error&&"cause"in r&&e(r.cause)}}});let n=t(68355),o=t(76064),a=t(32021),u=t(85929),i=t(91510),d=t(84316);("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),e.exports=r.default)},27910:e=>{e.exports=require("stream")},28354:e=>{e.exports=require("util")},29021:e=>{e.exports=require("fs")},29294:e=>{e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{e.exports=require("path")},34631:e=>{e.exports=require("tls")},53841:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),!function(e,r){for(var t in r)Object.defineProperty(e,t,{enumerable:!0,get:r[t]})}(r,{ReadonlyURLSearchParams:function(){return s},RedirectType:function(){return o.RedirectType},forbidden:function(){return u.forbidden},notFound:function(){return a.notFound},permanentRedirect:function(){return n.permanentRedirect},redirect:function(){return n.redirect},unauthorized:function(){return i.unauthorized},unstable_rethrow:function(){return d.unstable_rethrow}});let n=t(65626),o=t(12849),a=t(69504),u=t(89297),i=t(7908),d=t(2052);class l extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class s extends URLSearchParams{append(){throw new l}delete(){throw new l}set(){throw new l}sort(){throw new l}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),e.exports=r.default)},55511:e=>{e.exports=require("crypto")},55591:e=>{e.exports=require("https")},63033:e=>{e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},65626:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),!function(e,r){for(var t in r)Object.defineProperty(e,t,{enumerable:!0,get:r[t]})}(r,{getRedirectError:function(){return u},getRedirectStatusCodeFromError:function(){return c},getRedirectTypeFromError:function(){return s},getURLFromRedirectError:function(){return l},permanentRedirect:function(){return d},redirect:function(){return i}});let n=t(82239),o=t(12849),a=t(19121).actionAsyncStorage;function u(e,r,t){void 0===t&&(t=n.RedirectStatusCode.TemporaryRedirect);let a=Object.defineProperty(Error(o.REDIRECT_ERROR_CODE),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return a.digest=o.REDIRECT_ERROR_CODE+";"+r+";"+e+";"+t+";",a}function i(e,r){var t;throw null!=r||(r=(null==a?void 0:null==(t=a.getStore())?void 0:t.isAction)?o.RedirectType.push:o.RedirectType.replace),u(e,r,n.RedirectStatusCode.TemporaryRedirect)}function d(e,r){throw void 0===r&&(r=o.RedirectType.replace),u(e,r,n.RedirectStatusCode.PermanentRedirect)}function l(e){return(0,o.isRedirectError)(e)?e.digest.split(";").slice(2,-2).join(";"):null}function s(e){if(!(0,o.isRedirectError)(e))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return e.digest.split(";",2)[1]}function c(e){if(!(0,o.isRedirectError)(e))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return Number(e.digest.split(";").at(-2))}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),e.exports=r.default)},67726:(e,r,t)=>{t.r(r),t.d(r,{GlobalError:()=>u.a,__next_app__:()=>c,pages:()=>s,routeModule:()=>f,tree:()=>l});var n=t(7702),o=t(63409),a=t(88409),u=t.n(a),i=t(4102),d={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);t.d(r,d);let l=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,2669)),"/Users/rohan/code/realtalk/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,81622)),"/Users/rohan/code/realtalk/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,2655,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,60002,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,78907,23)),"next/dist/client/components/unauthorized-error"]}],s=["/Users/rohan/code/realtalk/app/page.tsx"],c={require:t,loadChunk:()=>Promise.resolve()},f=new n.AppPageRouteModule({definition:{kind:o.RouteKind.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},69504:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"notFound",{enumerable:!0,get:function(){return o}});let n=""+t(80441).HTTP_ERROR_FALLBACK_ERROR_CODE+";404";function o(){let e=Object.defineProperty(Error(n),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});throw e.digest=n,e}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),e.exports=r.default)},74075:e=>{e.exports=require("zlib")},77533:(e,r,t)=>{var n=t(53841);t.o(n,"redirect")&&t.d(r,{redirect:function(){return n.redirect}})},79428:e=>{e.exports=require("buffer")},79551:e=>{e.exports=require("url")},79646:e=>{e.exports=require("child_process")},81630:e=>{e.exports=require("http")},83997:e=>{e.exports=require("tty")},89297:(e,r,t)=>{function n(){throw Object.defineProperty(Error("`forbidden()` is experimental and only allowed to be enabled when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E488",enumerable:!1,configurable:!0})}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"forbidden",{enumerable:!0,get:function(){return n}}),t(80441).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),e.exports=r.default)},91645:e=>{e.exports=require("net")},94735:e=>{e.exports=require("events")}};var r=require("../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),n=r.X(0,[7095,5886,1854,325,5950,8444],()=>t(67726));module.exports=n})();