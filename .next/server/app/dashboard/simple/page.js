(()=>{var e={};e.id=1916,e.ids=[1916],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},8645:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var s=r(89812),n=r(49837),a=r(56954),i=r(84962),o=r(81227),c=r(22077),l=r(14884),d=r(49110);function u(){let{user:e,loading:t}=(0,i.J)(),r=(0,a.useRouter)(),[u,p]=(0,n.useState)([]),[h,m]=(0,n.useState)(""),[x,g]=(0,n.useState)(!1),[b,f]=(0,n.useState)("chat"),v=(0,n.useRef)(null),z=(0,n.useRef)([]),y=async()=>{try{let t="ai"===b?c.x:void 0,r=new URLSearchParams({chatType:"ai"===b?"dm":"global"});t&&r.append("chatId",t);let s=await fetch(`/api/messages?${r}`);if(s.ok){let t=(await s.json()).messages.slice(-20);if(e&&e.notifications_enabled&&z.current.length>0){let r=new Set(z.current.map(e=>e.id));t.filter(t=>!r.has(t.id)&&t.sender_id!==e.id).forEach(e=>{o.l.showNotification({title:`New message in ${"ai"===b?"AI Chat":"Global Chat"}`,body:`${e.username}: ${e.content}`,onClick:()=>{window.focus(),v.current&&v.current.scrollIntoView({behavior:"smooth"})}})})}p(t),setTimeout(()=>{v.current&&v.current.scrollIntoView({behavior:"smooth"})},100)}}catch(e){console.error("Failed to fetch messages:",e)}},k=async e=>{if(e.preventDefault(),h.trim()&&!x){g(!0);try{let e="ai"===b?c.x:void 0;(await fetch("/api/messages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:h.trim(),chatType:"ai"===b?"dm":"global",chatId:e})})).ok&&(m(""),y())}catch(e){console.error("Failed to send message:",e)}finally{g(!1)}}},j=async()=>{try{await fetch("/api/auth/signout",{method:"POST"}),r.push("/auth")}catch(e){r.push("/auth")}},N=e=>{localStorage.setItem("ui-mode",e),r.push(`/dashboard${"full"===e?"":`/${e}`}`)};return t?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background",children:(0,s.jsx)("div",{className:"text-foreground text-sm font-medium",children:"Loading..."})}):e?(0,s.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,s.jsx)("div",{className:"sticky top-0 z-20 glass border-b border-border",children:(0,s.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-3",children:(0,s.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-emerald-400 rounded-full"}),(0,s.jsxs)("h1",{className:"text-lg font-semibold text-foreground",children:["real",(0,s.jsx)("span",{className:"text-muted-foreground",children:".simple"})]})]}),(0,s.jsxs)("div",{className:"hidden sm:flex items-center gap-3 text-sm",children:[(0,s.jsxs)("span",{className:"text-muted-foreground font-medium truncate",children:["@",e.username]}),(0,s.jsx)("span",{className:"px-2 py-1 bg-muted rounded-md text-xs font-medium text-muted-foreground border border-border",children:"chat"===b?"Global":"AI"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{onClick:()=>f("chat"===b?"ai":"chat"),className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-colors ${"ai"===b?"bg-zinc-100 dark:bg-zinc-900 text-zinc-900 dark:text-zinc-100":"bg-zinc-800 dark:bg-zinc-200 text-zinc-300 dark:text-zinc-700 hover:bg-zinc-700 dark:hover:bg-zinc-300"}`,title:"chat"===b?"Switch to AI":"Switch to Chat",children:"chat"===b?"AI":"Chat"}),(0,s.jsxs)("div",{className:"hidden sm:flex items-center gap-2",children:[(0,s.jsx)("button",{onClick:()=>N("lite"),className:"px-3 py-1.5 bg-zinc-800 dark:bg-zinc-200 text-zinc-300 dark:text-zinc-700 rounded-lg text-xs font-medium hover:bg-zinc-700 dark:hover:bg-zinc-300 transition-colors",children:"Lite"}),(0,s.jsx)("button",{onClick:()=>N("full"),className:"px-3 py-1.5 bg-zinc-800 dark:bg-zinc-200 text-zinc-300 dark:text-zinc-700 rounded-lg text-xs font-medium hover:bg-zinc-700 dark:hover:bg-zinc-300 transition-colors",children:"Full"})]}),(0,s.jsx)("button",{onClick:()=>r.push("/settings/simple"),className:"p-2 bg-zinc-800 dark:bg-zinc-200 text-zinc-300 dark:text-zinc-700 rounded-lg hover:bg-zinc-700 dark:hover:bg-zinc-300 transition-colors",title:"Settings",children:(0,s.jsx)(l.A,{className:"h-4 w-4"})}),(0,s.jsx)("button",{onClick:j,className:"p-2 bg-zinc-800 dark:bg-zinc-200 text-red-400 rounded-lg hover:bg-red-500/10 transition-colors",title:"Sign Out",children:(0,s.jsx)(d.A,{className:"h-4 w-4"})})]})]})})}),(0,s.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-4",children:(0,s.jsxs)("div",{className:"bg-zinc-900/50 dark:bg-zinc-100/50 backdrop-blur-xl border border-zinc-800 dark:border-zinc-200 shadow-2xl rounded-xl overflow-hidden",children:[(0,s.jsx)("div",{className:"h-[calc(100vh-160px)] overflow-y-auto p-4 space-y-3",children:0===u.length?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-zinc-400 dark:text-zinc-600",children:[(0,s.jsx)("div",{className:"text-4xl mb-3",children:"ai"===b?"\uD83E\uDD16":"\uD83D\uDCAC"}),(0,s.jsx)("p",{className:"text-sm font-medium",children:"No messages yet"}),(0,s.jsx)("p",{className:"text-xs mt-1 bg-zinc-800/50 dark:bg-zinc-200/50 px-3 py-1 rounded-lg",children:"ai"===b?"Ask the AI something":"Start a conversation"})]}):(0,s.jsxs)(s.Fragment,{children:[u.map(t=>(0,s.jsxs)("div",{className:`flex flex-col gap-1 p-3 rounded-lg transition-colors ${t.sender_id===e?.id?"bg-zinc-800 dark:bg-zinc-200 ml-8 border border-zinc-700 dark:border-zinc-300":t.is_ai_response?"bg-zinc-800/70 dark:bg-zinc-200/70 mr-8 border border-zinc-700/70 dark:border-zinc-300/70":"bg-zinc-800/30 dark:bg-zinc-200/30"}`,children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-xs font-medium text-zinc-300 dark:text-zinc-700",children:t.is_ai_response?"AI":t.username}),(0,s.jsx)("span",{className:"text-xs text-zinc-500 dark:text-zinc-500",children:new Date(t.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),(0,s.jsx)("p",{className:"text-sm text-zinc-100 dark:text-zinc-900 leading-relaxed break-words",children:t.content})]},t.id)),(0,s.jsx)("div",{ref:v})]})}),(0,s.jsx)("div",{className:"border-t border-zinc-800 dark:border-zinc-200 p-4",children:(0,s.jsx)("form",{onSubmit:k,children:(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("input",{type:"text",value:h,onChange:e=>m(e.target.value),placeholder:"ai"===b?"Message AI...":"Type message...",className:"flex-1 px-4 py-2 bg-zinc-800 dark:bg-zinc-200 border border-zinc-700 dark:border-zinc-300 rounded-lg text-sm text-zinc-100 dark:text-zinc-900 placeholder-zinc-400 dark:placeholder-zinc-600 focus:outline-none focus:ring-1 focus:ring-zinc-600 dark:focus:ring-zinc-400 focus:border-transparent transition-all",disabled:x}),(0,s.jsx)("button",{type:"submit",disabled:x||!h.trim(),className:`px-6 py-2 rounded-lg text-sm font-medium transition-all ${x||!h.trim()?"bg-zinc-800/50 dark:bg-zinc-200/50 text-zinc-500 cursor-not-allowed":"bg-zinc-100 dark:bg-zinc-900 text-zinc-900 dark:text-zinc-100 hover:bg-zinc-200 dark:hover:bg-zinc-800"}`,children:x?"Sending":"Send"})]})})})]})})]}):null}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11671:(e,t,r)=>{"use strict";function s(){return null}r.r(t),r.d(t,{default:()=>s})},14884:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(65519).A)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},22077:(e,t,r)=>{"use strict";r.d(t,{w:()=>n,x:()=>s});let s="00000000-0000-0000-0000-00000000000a",n="real.AI"},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30496:()=>{},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},43648:()=>{},49110:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(65519).A)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},50823:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"createDedupedByCallsiteServerErrorLoggerDev",{enumerable:!0,get:function(){return c}});let s=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var s={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(s,i,o):s[i]=e[i]}return s.default=e,r&&r.set(e,s),s}(r(83263));function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}let a={current:null},i="function"==typeof s.cache?s.cache:e=>e,o=console.warn;function c(e){return function(...t){o(e(...t))}}i(e=>{try{o(a.current)}finally{a.current=null}})},52229:(e,t,r)=>{Promise.resolve().then(r.bind(r,89303))},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},56954:(e,t,r)=>{"use strict";var s=r(65362);r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},79428:e=>{"use strict";e.exports=require("buffer")},79462:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>l});var s=r(7702),n=r(63409),a=r(88409),i=r.n(a),o=r(4102),c={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>o[e]);r.d(t,c);let l={children:["",{children:["dashboard",{children:["simple",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,89303)),"/Users/rohan/code/realtalk/app/dashboard/simple/page.tsx"]}]},{}]},{loading:[()=>Promise.resolve().then(r.bind(r,11671)),"/Users/rohan/code/realtalk/app/dashboard/loading.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,81622)),"/Users/rohan/code/realtalk/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,2655,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,60002,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,78907,23)),"next/dist/client/components/unauthorized-error"]}]}.children,d=["/Users/rohan/code/realtalk/app/dashboard/simple/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/dashboard/simple/page",pathname:"/dashboard/simple",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},79551:e=>{"use strict";e.exports=require("url")},79646:e=>{"use strict";e.exports=require("child_process")},81227:(e,t,r)=>{"use strict";r.d(t,{l:()=>n});class s{constructor(){this.isSupported=!1,this.permission="default",this.isTabActive=!0}static getInstance(){return s.instance||(s.instance=new s),s.instance}setupVisibilityListener(){}async requestPermission(){return!1}async showNotification(e){return!1}async showMessageNotification(e,t){let r="dm"===e.chatType?`New DM from ${e.username}`:"group"===e.chatType||"channel"===e.chatType?`New message in ${e.chatName}`:`New global message from ${e.username}`,s="image"===e.messageType?"\uD83D\uDCF7 Sent an image":e.content.length>100?e.content.substring(0,100)+"...":e.content;return this.showNotification({title:r,body:s,tag:`message-${e.id}`,data:{chatType:e.chatType,chatId:e.chatId,chatName:e.chatName,messageId:e.id},onClick:()=>{t&&t(e.chatType,e.chatName,e.chatId)}})}getIsTabActive(){return this.isTabActive}getPermission(){return this.permission}getIsSupported(){return this.isSupported}updatePermission(){}}let n=s.getInstance()},81630:e=>{"use strict";e.exports=require("http")},81733:(e,t,r)=>{Promise.resolve().then(r.bind(r,8645))},83997:e=>{"use strict";e.exports=require("tty")},89303:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(430).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/rohan/code/realtalk/app/dashboard/simple/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/rohan/code/realtalk/app/dashboard/simple/page.tsx","default")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[7095,4346,8444],()=>r(79462));module.exports=s})();