(()=>{var e={};e.id=5105,e.ids=[5105],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},6581:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>ek});var t=a(89812),l=a(49837),r=a(56954),i=a(27810),n=a(43394),o=a(67179),d=a(89799),c=a(40964),h=a(87677),m=a(84962);function u({className:e,size:s="default",variant:a="ghost"}){let{theme:r,setTheme:o}=(0,i.D)(),{user:u,setUser:x}=(0,m.J)(),[p,f]=(0,l.useState)(!1),g=async()=>{let e="light"===r?"dark":"light";if(o(e),u)try{(await fetch("/api/user/settings",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({theme:e})})).ok?x({...u,theme:e}):console.error("Failed to save theme preference")}catch(e){console.error("Error saving theme preference:",e)}};if(!p)return(0,t.jsx)(n.$,{variant:a,size:s,className:(0,h.cn)("animate-pulse",e),disabled:!0,children:(0,t.jsx)("div",{className:"h-4 w-4"})});let j={sm:"h-4 w-4",default:"h-5 w-5",lg:"h-6 w-6",icon:"h-4 w-4"};return(0,t.jsxs)(n.$,{variant:a,size:s,onClick:g,className:(0,h.cn)("transition-all duration-300 ease-in-out hover:scale-105","focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",{sm:"h-8 w-8",default:"h-10 w-10",lg:"h-12 w-12",icon:"h-8 w-8"}[s],e),title:`Switch to ${"light"===r?"dark":"light"} mode`,children:["dark"===r?(0,t.jsx)(d.A,{className:(0,h.cn)("transition-transform duration-300",j[s])}):(0,t.jsx)(c.A,{className:(0,h.cn)("transition-transform duration-300",j[s])}),(0,t.jsx)("span",{className:"sr-only",children:"light"===r?"Switch to dark mode":"Switch to light mode"})]})}var x=a(65519);let p=(0,x.A)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);var f=a(71187),g=a(4408);let j=(0,x.A)("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),v=(0,x.A)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);var y=a(32309),b=a(74175),N=a(50266),w=a(14884),k=a(39461);let C=(0,x.A)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);var S=a(92376);let _=(0,x.A)("Clapperboard",[["path",{d:"M20.2 6 3 11l-.9-2.4c-.3-1.1.3-2.2 1.3-2.5l13.5-4c1.1-.3 2.2.3 2.5 1.3Z",key:"1tn4o7"}],["path",{d:"m6.2 5.3 3.1 3.9",key:"iuk76l"}],["path",{d:"m12.4 3.4 3.1 4",key:"6hsd6n"}],["path",{d:"M3 11h18v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2Z",key:"ltgou9"}]]),A=(0,x.A)("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]),$=(0,x.A)("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);var P=a(76338);let z=(0,x.A)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);function M({currentPage:e,onPageChange:s,onSignOut:a,onGlobalChatClick:r,onAIChatClick:i,username:d,onThemeCycle:c,onHueCycle:h}){let[m,x]=(0,l.useState)(!1),[M,F]=(0,l.useState)(!1),I=[{id:"dashboard",label:"Dashboard",icon:p},{id:"friends",label:"Friends",icon:f.A},{id:"dms",label:"DMs",icon:g.A},{id:"channels",label:"Channels",icon:j},{id:"polls",label:"Polls",icon:v},{id:"voice",label:"Voice",icon:y.A},{id:"calendar",label:"Calendar",icon:b.A},{id:"profile",label:"Profile",icon:N.A},{id:"settings",label:"Settings",icon:w.A},{id:"about",label:"About",icon:k.A}],T=e=>{M||(F(!0),x(e),setTimeout(()=>F(!1),300))},D=e=>{"global"===e?r():"ai-chat"===e?i():s(e)};return(0,t.jsx)("div",{className:"fixed z-50 transition-all duration-300 top-4 left-1/2 -translate-x-1/2 animate-float",children:(0,t.jsx)("div",{className:`glass text-white rounded-full transition-all duration-300 ease-out hover-lift ${m?"px-4 py-2 min-w-[750px] shadow-modern-xl animate-breathe":"px-8 py-4 w-fit shadow-modern-lg hover:shadow-modern-xl hover-scale"}`,onMouseEnter:()=>T(!0),onMouseLeave:()=>T(!1),style:{background:m?`linear-gradient(135deg, 
                hsla(var(--hue), 20%, 8%, 0.98) 0%, 
                hsla(var(--hue), 10%, 5%, 0.95) 50%, 
                hsla(var(--hue), 25%, 12%, 0.98) 100%),
               radial-gradient(circle at 30% 40%, hsla(var(--hue), 60%, 40%, 0.1), transparent 70%)`:`linear-gradient(135deg, 
                hsla(var(--hue), 15%, 10%, 0.95) 0%, 
                hsla(var(--hue), 8%, 6%, 0.92) 100%),
               radial-gradient(circle at 50% 50%, hsla(var(--hue), 50%, 30%, 0.08), transparent 60%)`,boxShadow:m?`0 25px 50px -12px hsla(var(--hue), 40%, 20%, 0.6), 
               0 8px 32px hsla(var(--hue), 60%, 50%, 0.15),
               0 0 0 1px hsla(var(--hue), 50%, 60%, 0.2),
               inset 0 1px 0 hsla(var(--hue), 50%, 100%, 0.1)`:`0 20px 25px -5px hsla(var(--hue), 30%, 15%, 0.4), 
               0 4px 16px hsla(var(--hue), 50%, 40%, 0.1),
               0 0 0 1px hsla(var(--hue), 40%, 50%, 0.15),
               inset 0 1px 0 hsla(var(--hue), 40%, 90%, 0.05)`},children:m?(0,t.jsxs)("div",{className:"flex items-center justify-center gap-1 py-1",children:[(0,t.jsx)(n.$,{variant:"ghost",size:"icon",onClick:()=>D("global"),className:"h-8 w-8 text-white btn-ghost rounded-full border-modern hover-glow",title:"Global",style:{background:`linear-gradient(135deg, 
                  hsla(var(--hue), 30%, 20%, 0.3) 0%, 
                  hsla(var(--hue), 20%, 15%, 0.5) 100%)`,borderColor:"hsla(var(--hue), 50%, 50%, 0.3)",color:"white"},children:(0,t.jsx)(C,{className:"h-3 w-3"})}),(0,t.jsx)(n.$,{variant:"ghost",size:"icon",onClick:()=>D("ai-chat"),className:"h-8 w-8 text-white btn-ghost rounded-full border-modern hover-glow",title:"AI Chat",style:{background:`linear-gradient(135deg, 
                  hsla(220, 60%, 25%, 0.3) 0%, 
                  hsla(220, 50%, 20%, 0.5) 100%)`,borderColor:"hsla(220, 70%, 60%, 0.3)",color:"white"},children:(0,t.jsx)(S.A,{className:"h-3 w-3"})}),(0,t.jsx)("div",{className:"w-px h-5 mx-1",style:{background:`linear-gradient(180deg, 
                     transparent 0%, 
                     hsla(var(--hue), 40%, 50%, 0.4) 50%, 
                     transparent 100%)`}}),I.map(s=>{let a=s.icon,l="channels"===s.id||"dms"===s.id||"polls"===s.id;return(0,t.jsxs)(n.$,{variant:e===s.id?"secondary":"ghost",size:l?"sm":"icon",onClick:()=>D(s.id),className:`h-8 ${l?"px-3":"w-8"} btn-ghost rounded-full border-modern hover-glow ${e===s.id?"animate-pulse-glow":""}`,style:e===s.id?{background:`linear-gradient(135deg, 
                      hsla(var(--hue), 80%, 90%, 0.95) 0%, 
                      hsla(var(--hue), 70%, 85%, 0.9) 100%)`,color:"hsla(var(--hue), 60%, 20%, 1)",borderColor:"hsla(var(--hue), 60%, 70%, 0.6)",boxShadow:"0 4px 16px hsla(var(--hue), 60%, 50%, 0.3)"}:{background:`linear-gradient(135deg, 
                      hsla(var(--hue), 30%, 20%, 0.4) 0%, 
                      hsla(var(--hue), 20%, 15%, 0.6) 100%)`,color:"rgba(255, 255, 255, 0.9)",borderColor:"hsla(var(--hue), 40%, 50%, 0.3)"},children:[(0,t.jsx)(a,{className:"h-3 w-3"}),l&&(0,t.jsx)("span",{className:"ml-1 text-xs hidden md:inline",children:s.label})]},s.id)}),(0,t.jsxs)(o.AM,{children:[(0,t.jsx)(o.Wv,{asChild:!0,children:(0,t.jsxs)(n.$,{variant:"movies"===e||"games"===e||"radio"===e?"secondary":"ghost",size:"sm",className:`h-8 px-3 btn-ghost rounded-full border-modern hover-glow ${"movies"===e||"games"===e||"radio"===e?"animate-pulse-glow":""}`,style:"movies"===e||"games"===e||"radio"===e?{background:`linear-gradient(135deg, 
                      hsla(var(--hue), 80%, 90%, 0.95) 0%, 
                      hsla(var(--hue), 70%, 85%, 0.9) 100%)`,color:"hsla(var(--hue), 60%, 20%, 1)",borderColor:"hsla(var(--hue), 60%, 70%, 0.6)",boxShadow:"0 4px 16px hsla(var(--hue), 60%, 50%, 0.3)"}:{background:`linear-gradient(135deg, 
                      hsla(var(--hue), 30%, 20%, 0.4) 0%, 
                      hsla(var(--hue), 20%, 15%, 0.6) 100%)`,color:"rgba(255, 255, 255, 0.9)",borderColor:"hsla(var(--hue), 40%, 50%, 0.3)"},title:"Entertainment",children:[(0,t.jsx)(_,{className:"h-3 w-3"}),(0,t.jsx)("span",{className:"ml-1 text-xs hidden md:inline",children:"Entertainment"})]})}),(0,t.jsx)(o.hl,{className:"w-48 p-2",align:"center",avoidCollisions:!0,children:(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsxs)(n.$,{variant:"ghost",size:"sm",onClick:()=>D("movies"),className:"justify-start gap-2",children:[(0,t.jsx)(_,{className:"h-3 w-3"}),(0,t.jsx)("span",{className:"text-xs",children:"Movies"})]}),(0,t.jsxs)(n.$,{variant:"ghost",size:"sm",onClick:()=>D("games"),className:"justify-start gap-2",children:[(0,t.jsx)(A,{className:"h-3 w-3"}),(0,t.jsx)("span",{className:"text-xs",children:"Games"})]}),(0,t.jsxs)(n.$,{variant:"ghost",size:"sm",onClick:()=>D("radio"),className:"justify-start gap-2",children:[(0,t.jsx)($,{className:"h-3 w-3"}),(0,t.jsx)("span",{className:"text-xs",children:"Radio"})]})]})})]}),(0,t.jsx)("div",{className:"w-px h-5 mx-1",style:{background:`linear-gradient(180deg, 
                     transparent 0%, 
                     hsla(var(--hue), 40%, 50%, 0.4) 50%, 
                     transparent 100%)`}}),(0,t.jsx)(u,{size:"sm",variant:"ghost",className:"h-8 w-8 text-white btn-ghost rounded-full border-modern hover-glow",style:{background:`linear-gradient(135deg, 
                  hsla(270, 60%, 25%, 0.3) 0%, 
                  hsla(270, 50%, 20%, 0.5) 100%)`,borderColor:"hsla(270, 70%, 60%, 0.3)",color:"white"}}),(0,t.jsx)(n.$,{variant:"ghost",size:"icon",onClick:h,className:"h-8 w-8 text-white btn-ghost rounded-full border-modern hover-glow",title:"Cycle Color",style:{background:`linear-gradient(135deg, 
                  hsla(var(--hue), 60%, 25%, 0.3) 0%, 
                  hsla(var(--hue), 50%, 20%, 0.5) 100%)`,borderColor:"hsla(var(--hue), 70%, 60%, 0.3)",color:"white"},children:(0,t.jsx)(P.A,{className:"h-3 w-3"})}),(0,t.jsx)(n.$,{variant:"ghost",size:"icon",onClick:a,className:"h-8 w-8 text-white btn-ghost rounded-full border-modern hover-glow",title:"Sign out",style:{background:`linear-gradient(135deg, 
                  hsla(0, 60%, 25%, 0.3) 0%, 
                  hsla(0, 50%, 20%, 0.5) 100%)`,borderColor:"hsla(0, 70%, 60%, 0.3)",color:"white"},children:(0,t.jsx)(z,{className:"h-3 w-3"})})]}):(0,t.jsxs)("div",{className:"flex items-center gap-3 transition-all duration-200",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full animate-pulse-glow",style:{background:"radial-gradient(circle, hsla(120, 70%, 60%, 1) 0%, hsla(120, 80%, 50%, 0.8) 100%)",boxShadow:"0 0 12px hsla(120, 70%, 50%, 0.6)"}}),(0,t.jsx)("div",{className:"absolute inset-0 w-3 h-3 rounded-full animate-ping opacity-40",style:{background:"hsla(120, 70%, 60%, 1)"}})]}),(0,t.jsx)("span",{className:"text-lg font-bold tracking-wide text-hue-animated",children:"real."}),(0,t.jsxs)("span",{className:"text-xs opacity-80 font-medium text-shadow-soft",style:{color:"hsla(var(--hue), 40%, 80%, 0.9)"},children:["@",d]})]})})})}var F=a(9883),I=a(54002),T=a(29399),D=a(76576),O=a(55844),q=a(53380),E=a(44897);let Z=(0,x.A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var R=a(78109);let U=(0,x.A)("Vote",[["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}],["path",{d:"M5 7c0-1.1.9-2 2-2h10a2 2 0 0 1 2 2v12H5V7Z",key:"1ezoue"}],["path",{d:"M22 19H2",key:"nuriw5"}]]);var G=a(86703),L=a(98004),W=a(82105);function J({currentUserId:e,userSignupCode:s}){let[a,r]=(0,l.useState)([]),[i,o]=(0,l.useState)([]),[d,c]=(0,l.useState)(!1),[h,m]=(0,l.useState)(!0),[u,x]=(0,l.useState)(null),[p,f]=(0,l.useState)(null),[g,j]=(0,l.useState)(""),[y,b]=(0,l.useState)(""),[N,w]=(0,l.useState)(["",""]),[k,S]=(0,l.useState)(!1),[_,A]=(0,l.useState)([]),[$,P]=(0,l.useState)(""),z=(0,l.useCallback)(async()=>{try{let e=await fetch("/api/polls");if(e.ok){let s=await e.json();console.log("[polls-page] Fetched polls:",s.polls),r(s.polls)}else console.error("[polls-page] Failed to fetch polls:",e.status)}catch(e){console.error("Failed to fetch polls:",e)}finally{m(!1)}},[]);(0,l.useCallback)(async()=>{try{let e=await fetch("/api/friends/accepted");if(e.ok){let s=await e.json();o(s.friends)}}catch(e){console.error("Failed to fetch friends:",e)}},[]);let M=async()=>{if(f(null),g.trim()&&!(N.filter(e=>e.trim()).length<2))try{let e=await fetch("/api/polls",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:g.trim(),description:y.trim()||void 0,options:N.filter(e=>e.trim()),is_public:k,shared_with:_,expires_at:$||void 0})});if(e.ok)c(!1),T(),z();else{let s=await e.json();f(`Failed to create poll: ${s.error}`)}}catch(e){f("An unexpected error occurred while creating the poll.")}},F=async e=>{f(null);try{let s=await fetch(`/api/polls/${e}`,{method:"DELETE"});if(s.ok)z();else{let e=await s.json();f(`Failed to delete poll: ${e.error||s.statusText}`)}}catch(e){f("An unexpected error occurred while deleting the poll.")}},I=async(e,s)=>{console.log(`[polls-page] Voting on poll ${e} with option ${s}`),x(e);try{let a=await fetch(`/api/polls/${e}/vote`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({option_index:s})});if(a.ok)console.log("[polls-page] Vote successful, refreshing polls"),await z();else{let e=await a.json();console.error("Failed to vote:",e.error),alert(`Failed to vote: ${e.error||"Unknown error"}`)}}catch(e){console.error("Failed to vote:",e),alert("An unexpected error occurred while voting.")}finally{x(null)}},T=()=>{j(""),b(""),w(["",""]),S(!1),A([]),P("")},J=e=>{N.length>2&&w(N.filter((s,a)=>a!==e))},B=(e,s)=>{let a=[...N];a[e]=s,w(a)},H=(e,s)=>s?"bg-gradient-to-r from-yellow-400 via-yellow-500 to-yellow-600 bg-clip-text text-transparent animate-pulse font-medium":"",V=e=>e?{color:e}:{},K=e=>new Date(e).toLocaleDateString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),Y=e=>!!e&&new Date(e)<new Date,X=(e,s)=>0===s?0:Math.round(e/s*100);return h?(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsx)("div",{className:"text-muted-foreground animate-pulse",children:"Loading polls..."})}):(0,t.jsxs)("div",{className:"space-y-6 relative z-10",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold",children:"Polls"}),(0,t.jsxs)(n.$,{onClick:()=>c(!0),className:"hover-lift hover-glow",children:[(0,t.jsx)(Z,{className:"h-4 w-4 mr-2"}),"Create Poll"]})]}),(0,t.jsx)("div",{className:"grid gap-4",children:0===a.length?(0,t.jsx)(q.Zp,{className:"glass-effect animate-fadeIn",children:(0,t.jsxs)(q.Wu,{className:"text-center py-8",children:[(0,t.jsx)(v,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"No polls yet"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Create your first poll to gather opinions!"})]})}):a.map((s,a)=>{let l=void 0!==s.user_response;return(0,t.jsxs)(q.Zp,{className:`glass-effect hover-lift animate-fadeIn ${Y(s.expires_at)?"opacity-75":""}`,style:{animationDelay:`${.1*a}s`},children:[(0,t.jsxs)(q.aR,{children:[(0,t.jsx)("div",{className:"flex items-start justify-between",children:(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(q.ZB,{className:"text-lg",children:s.title}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[s.is_public?(0,t.jsx)(C,{className:"h-3 w-3 hue-accent"}):(0,t.jsx)(R.A,{className:"h-3 w-3"}),(0,t.jsx)(U,{className:"h-3 w-3"}),(0,t.jsxs)("span",{children:[s.total_responses," votes"]}),s.expires_at&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(G.A,{className:"h-3 w-3"}),(0,t.jsx)("span",{className:Y(s.expires_at)?"text-red-500":"",children:Y(s.expires_at)?"Expired":`Expires ${K(s.expires_at)}`})]})]}),s.creator_id===e&&(0,t.jsx)(n.$,{variant:"ghost",size:"sm",onClick:()=>F(s.id),className:"text-red-500 hover:bg-red-500/10 h-6 w-6 p-0",title:"Delete Poll",children:(0,t.jsx)(L.A,{className:"h-3 w-3"})})]})]}),s.description&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:s.description})]})}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[(0,t.jsxs)("span",{className:s.creator_username?H(void 0,!1):"",children:["by @",s.creator_username]}),(0,t.jsxs)("span",{children:[void 0!==s.user_response?"You voted":"Click to vote"," • ",s.total_responses," total votes"]})]})]}),(0,t.jsxs)(q.Wu,{className:"space-y-3",children:[s.options.map((e,a)=>{let r=s.results.find(e=>e.option_index===a),i=r?.count||0,o=X(i,s.total_responses),d=s.user_response===a,c=u===s.id;return(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(n.$,{variant:d?"default":"outline",className:`flex-1 justify-start hover-lift transition-all duration-200 ${d?"hue-shadow":""} ${Y(s.expires_at)?"":"cursor-pointer"}`,onClick:()=>!Y(s.expires_at)&&!c&&I(s.id,a),disabled:Y(s.expires_at)||c,children:[(0,t.jsx)("span",{className:"flex-1 text-left",children:e}),c&&(0,t.jsx)("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin ml-2"})]}),l&&(0,t.jsxs)("span",{className:"text-sm text-muted-foreground ml-3 min-w-[60px] text-right",children:[i," (",o,"%)"]})]}),l&&(0,t.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 overflow-hidden",children:(0,t.jsx)("div",{className:`h-2 rounded-full transition-all duration-700 ease-out ${d?"bg-gradient-to-r from-blue-500 to-purple-500 hue-shadow":"bg-gray-400 dark:bg-gray-600"}`,style:{width:`${o}%`,backgroundColor:d?"hsl(var(--hue) 60% 50%)":void 0}})})]},a)}),!Y(s.expires_at)&&(0,t.jsxs)("p",{className:"text-xs text-muted-foreground text-center mt-4 opacity-70",children:["Click on an option to ",l?"change your vote":"cast your vote"]})]})]},s.id)})}),d&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,t.jsxs)(q.Zp,{className:"w-full max-w-md max-h-[90vh] overflow-y-auto glass-effect animate-fadeIn",children:[(0,t.jsxs)(q.aR,{className:"flex flex-row items-center justify-between",children:[(0,t.jsx)(q.ZB,{children:"Create Poll"}),(0,t.jsx)(n.$,{variant:"ghost",size:"sm",onClick:()=>c(!1),children:(0,t.jsx)(W.A,{className:"h-4 w-4"})})]}),(0,t.jsxs)(q.Wu,{className:"space-y-4",children:[(0,t.jsx)("div",{children:(0,t.jsx)(D.p,{value:g,onChange:e=>j(e.target.value),placeholder:"Poll title",className:"focus:hue-shadow"})}),(0,t.jsx)("div",{children:(0,t.jsx)(O.T,{value:y,onChange:e=>b(e.target.value),placeholder:"Description (optional)",rows:2,className:"focus:hue-shadow"})}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Options"}),N.map((e,s)=>(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(D.p,{value:e,onChange:e=>B(s,e.target.value),placeholder:`Option ${s+1}`,className:"focus:hue-shadow"}),N.length>2&&(0,t.jsx)(n.$,{variant:"ghost",size:"sm",onClick:()=>J(s),children:(0,t.jsx)(W.A,{className:"h-4 w-4"})})]},s)),N.length<6&&(0,t.jsxs)(n.$,{variant:"outline",size:"sm",onClick:()=>{N.length<6&&w([...N,""])},className:"hover-lift bg-transparent",children:[(0,t.jsx)(Z,{className:"h-4 w-4 mr-1"}),"Add Option"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(D.p,{type:"datetime-local",value:$,onChange:e=>P(e.target.value),className:"focus:hue-shadow"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Optional expiration date"})]}),"qwea"===s&&(0,t.jsxs)("div",{className:"flex items-center space-x-2 p-3 hue-bg rounded-lg",children:[(0,t.jsx)(E.S,{id:"public",checked:k,onCheckedChange:e=>S(!0===e)}),(0,t.jsx)("label",{htmlFor:"public",className:"text-sm font-medium",children:"Share with all users (public poll)"})]}),!k&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Share with friends"}),(0,t.jsx)("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:i.map(e=>(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(E.S,{id:e.friend_id,checked:_.includes(e.friend_id),onCheckedChange:s=>{s?A([..._,e.friend_id]):A(_.filter(s=>s!==e.friend_id))}}),(0,t.jsx)("label",{htmlFor:e.friend_id,className:"text-sm cursor-pointer",style:e.friend_has_gold?{}:V(e.friend_name_color),children:(0,t.jsxs)("span",{className:H(e.friend_name_color,e.friend_has_gold),children:["@",e.friend_username]})})]},e.friend_id))})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(n.$,{onClick:M,disabled:!g.trim()||N.filter(e=>e.trim()).length<2,className:"flex-1 hover-glow",children:"Create Poll"}),(0,t.jsx)(n.$,{variant:"outline",onClick:()=>c(!1),children:"Cancel"})]})]})]})})]})}function B({currentUserId:e,userSignupCode:s,onSelectChannel:a}){let[r,i]=(0,l.useState)([]),[o,d]=(0,l.useState)(!0),[c,h]=(0,l.useState)(!1),[m,u]=(0,l.useState)(""),x="qwea"===s,p=(0,l.useCallback)(async()=>{try{let e=await fetch("/api/channels");if(e.ok){let s=await e.json();i(s.channels)}}finally{d(!1)}},[]),f=(0,l.useMemo)(()=>r.filter(e=>e.is_system),[r]),g=(0,l.useMemo)(()=>r.filter(e=>!e.is_system),[r]),v=async e=>{if(!confirm("Delete this channel?"))return;let s=await fetch(`/api/channels/${e}`,{method:"DELETE"});if(s.ok)p();else{let e=await s.json().catch(()=>({}));alert(`Failed to delete: ${e.error||s.statusText}`)}},y=async()=>{if(x&&m.trim()){h(!0);try{let e=await fetch("/api/channels",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:m.trim()})});if(e.ok)u(""),p();else{let s=await e.json().catch(()=>({}));alert(`Failed to create channel: ${s.error||e.statusText}`)}}finally{h(!1)}}};return o?(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsx)("div",{className:"text-muted-foreground animate-pulse",children:"Loading channels..."})}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold",children:"Channels"}),x&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(D.p,{value:m,onChange:e=>u(e.target.value),placeholder:"Create a new channel",className:"w-48"}),(0,t.jsxs)(n.$,{onClick:y,disabled:!m.trim()||c,className:"hover-glow",children:[(0,t.jsx)(Z,{className:"h-4 w-4 mr-1"})," Create"]})]})]}),(0,t.jsxs)(q.Zp,{className:"glass-effect",children:[(0,t.jsx)(q.aR,{children:(0,t.jsx)(q.ZB,{children:"Default"})}),(0,t.jsx)(q.Wu,{className:"space-y-2",children:0===f.length?(0,t.jsx)("p",{className:"text-muted-foreground text-sm",children:"No channels."}):f.map(e=>(0,t.jsxs)(n.$,{variant:"ghost",className:"w-full justify-start",onClick:()=>a(e.id,e.name),children:[(0,t.jsx)(j,{className:"h-4 w-4 mr-2"})," ",e.name]},e.id))})]}),g.length>0&&(0,t.jsxs)(q.Zp,{className:"glass-effect",children:[(0,t.jsx)(q.aR,{children:(0,t.jsx)(q.ZB,{children:"Created by Gold users"})}),(0,t.jsx)(q.Wu,{className:"space-y-2",children:g.map(s=>(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(n.$,{variant:"ghost",className:"flex-1 justify-start",onClick:()=>a(s.id,s.name),children:[(0,t.jsx)(j,{className:"h-4 w-4 mr-2"})," ",s.name]}),s.creator_id===e&&(0,t.jsx)(n.$,{variant:"ghost",size:"icon",onClick:()=>v(s.id),className:"text-red-500",children:(0,t.jsx)(L.A,{className:"h-4 w-4"})})]},s.id))})]})]})}var H=a(20126),V=a(49125);function K({currentUserId:e}){let[s,a]=(0,l.useState)([]),[r,i]=(0,l.useState)([]),[o,d]=(0,l.useState)(!1),[c,h]=(0,l.useState)(!0),[m,u]=(0,l.useState)(new Date),[x,p]=(0,l.useState)(""),[f,g]=(0,l.useState)(""),[j,v]=(0,l.useState)(""),[y,N]=(0,l.useState)(""),[w,k]=(0,l.useState)(!1),[C,S]=(0,l.useState)([]),_=(0,l.useCallback)(async()=>{try{let e=await fetch("/api/calendar");if(e.ok){let s=await e.json();a(s.events)}}catch(e){console.error("Failed to fetch events:",e)}finally{h(!1)}},[]);(0,l.useCallback)(async()=>{try{let e=await fetch("/api/friends/accepted");if(e.ok){let s=await e.json();i(s.friends)}}catch(e){console.error("Failed to fetch friends:",e)}},[]);let A=async()=>{if(x.trim()&&j&&y)try{(await fetch("/api/calendar",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:x.trim(),description:f.trim()||void 0,start_time:j,end_time:y,is_collaborative:w,participants:C})})).ok&&(d(!1),$(),_())}catch(e){console.error("Failed to create event:",e)}},$=()=>{p(""),g(""),v(""),N(""),k(!1),S([])},P=(e,s)=>s?"bg-gradient-to-r from-yellow-400 via-yellow-500 to-yellow-600 bg-clip-text text-transparent animate-pulse font-medium":"",z=e=>e?{color:e}:{},M=e=>new Date(e).toLocaleDateString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),F=e=>{let a=e.toDateString();return s.filter(e=>new Date(e.start_time).toDateString()===a)},I=e=>{u(s=>{let a=new Date(s);return"prev"===e?a.setMonth(s.getMonth()-1):a.setMonth(s.getMonth()+1),a})},T=e=>{if(!e)return!1;let s=new Date;return e.toDateString()===s.toDateString()};if(c)return(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsx)("div",{className:"text-muted-foreground animate-pulse",children:"Loading calendar..."})});let U=(e=>{let s=e.getFullYear(),a=e.getMonth(),t=new Date(s,a,1),l=new Date(s,a+1,0).getDate(),r=t.getDay(),i=[];for(let e=0;e<r;e++)i.push(null);for(let e=1;e<=l;e++)i.push(new Date(s,a,e));return i})(m),L=m.toLocaleDateString([],{month:"long",year:"numeric"});return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold",children:"Calendar"}),(0,t.jsxs)(n.$,{onClick:()=>d(!0),children:[(0,t.jsx)(Z,{className:"h-4 w-4 mr-2"}),"Create Event"]})]}),(0,t.jsxs)(q.Zp,{children:[(0,t.jsx)(q.aR,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(q.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(b.A,{className:"h-5 w-5"}),L]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(n.$,{variant:"outline",size:"sm",onClick:()=>I("prev"),children:(0,t.jsx)(H.A,{className:"h-4 w-4"})}),(0,t.jsx)(n.$,{variant:"outline",size:"sm",onClick:()=>I("next"),children:(0,t.jsx)(V.A,{className:"h-4 w-4"})})]})]})}),(0,t.jsxs)(q.Wu,{children:[(0,t.jsx)("div",{className:"grid grid-cols-7 gap-1 mb-4",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>(0,t.jsx)("div",{className:"p-2 text-center text-sm font-medium text-muted-foreground",children:e},e))}),(0,t.jsx)("div",{className:"grid grid-cols-7 gap-1",children:U.map((e,s)=>{let a=e?F(e):[];return(0,t.jsx)("div",{className:`min-h-[80px] p-1 border rounded-lg ${e?"hover:bg-accent/50 cursor-pointer":""} ${T(e)?"bg-primary/10 border-primary":""}`,children:e&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:`text-sm font-medium ${T(e)?"text-primary":""}`,children:e.getDate()}),(0,t.jsxs)("div",{className:"space-y-1",children:[a.slice(0,2).map(e=>(0,t.jsx)("div",{className:"text-xs p-1 bg-primary/20 rounded truncate",title:e.title,children:e.title},e.id)),a.length>2&&(0,t.jsxs)("div",{className:"text-xs text-muted-foreground",children:["+",a.length-2," more"]})]})]})},s)})})]})]}),(0,t.jsxs)(q.Zp,{children:[(0,t.jsx)(q.aR,{children:(0,t.jsx)(q.ZB,{children:"Upcoming Events"})}),(0,t.jsx)(q.Wu,{children:0===s.length?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(G.A,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"No events scheduled"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Create your first event to get started!"})]}):(0,t.jsx)("div",{className:"space-y-3",children:s.filter(e=>new Date(e.start_time)>=new Date).sort((e,s)=>new Date(e.start_time).getTime()-new Date(s.start_time).getTime()).slice(0,5).map(e=>(0,t.jsxs)("div",{className:"p-3 border rounded-lg",children:[(0,t.jsx)("div",{className:"flex items-start justify-between",children:(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h4",{className:"font-medium",children:e.title}),e.description&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:e.description}),(0,t.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-xs text-muted-foreground",children:[(0,t.jsxs)("span",{children:[M(e.start_time)," - ",M(e.end_time)]}),e.is_collaborative&&(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(R.A,{className:"h-3 w-3"}),(0,t.jsx)("span",{children:"Collaborative"})]})]})]})}),(0,t.jsxs)("div",{className:"mt-2 text-xs text-muted-foreground",children:["Created by @",e.creator_username]})]},e.id))})})]}),o&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,t.jsxs)(q.Zp,{className:"w-full max-w-md mx-4 max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)(q.aR,{className:"flex flex-row items-center justify-between",children:[(0,t.jsx)(q.ZB,{children:"Create Event"}),(0,t.jsx)(n.$,{variant:"ghost",size:"sm",onClick:()=>d(!1),children:(0,t.jsx)(W.A,{className:"h-4 w-4"})})]}),(0,t.jsxs)(q.Wu,{className:"space-y-4",children:[(0,t.jsx)("div",{children:(0,t.jsx)(D.p,{value:x,onChange:e=>p(e.target.value),placeholder:"Event title"})}),(0,t.jsx)("div",{children:(0,t.jsx)(O.T,{value:f,onChange:e=>g(e.target.value),placeholder:"Description (optional)",rows:2})}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Start Time"}),(0,t.jsx)(D.p,{type:"datetime-local",value:j,onChange:e=>v(e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"End Time"}),(0,t.jsx)(D.p,{type:"datetime-local",value:y,onChange:e=>N(e.target.value)})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(E.S,{id:"collaborative",checked:w,onCheckedChange:e=>k(!0===e)}),(0,t.jsx)("label",{htmlFor:"collaborative",className:"text-sm",children:"Make this a collaborative event"})]}),w&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Invite participants"}),(0,t.jsx)("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:r.map(e=>(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(E.S,{id:e.friend_id,checked:C.includes(e.friend_id),onCheckedChange:s=>{s?S([...C,e.friend_id]):S(C.filter(s=>s!==e.friend_id))}}),(0,t.jsx)("label",{htmlFor:e.friend_id,className:"text-sm cursor-pointer",style:e.friend_has_gold?{}:z(e.friend_name_color),children:(0,t.jsxs)("span",{className:P(e.friend_name_color,e.friend_has_gold),children:["@",e.friend_username]})})]},e.friend_id))})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(n.$,{onClick:A,disabled:!x.trim()||!j||!y,className:"flex-1",children:"Create Event"}),(0,t.jsx)(n.$,{variant:"outline",onClick:()=>d(!1),children:"Cancel"})]})]})]})})]})}let Y=(0,x.A)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);var X=a(65395);let Q=(0,x.A)("Snowflake",[["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"m20 16-4-4 4-4",key:"rquw4f"}],["path",{d:"m4 8 4 4-4 4",key:"12s3z9"}],["path",{d:"m16 4-4 4-4-4",key:"1tumq1"}],["path",{d:"m8 20 4-4 4 4",key:"9p200w"}]]),ee=(0,x.A)("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);var es=a(13107);function ea({userId:e,onStartDM:s,onSendFriendRequest:a}){let{user:r,setUser:i}=(0,m.J)(),[o,d]=(0,l.useState)(null),[c,h]=(0,l.useState)(!0),[u,x]=(0,l.useState)(!1),[p,j]=(0,l.useState)(!1),[v,y]=(0,l.useState)(!1),[b,w]=(0,l.useState)(""),[k,C]=(0,l.useState)(!1),[S,_]=(0,l.useState)(null),[A,$]=(0,l.useState)(""),[P,z]=(0,l.useState)(""),M=!e||e===r?.id,F=!!r?.has_gold_animation,I=async e=>{let s=e.target.files?.[0];if(s){C(!0);try{let e=await fetch(`/api/upload-image?filename=${encodeURIComponent(s.name)}`,{method:"POST",body:s});if(e.ok){let s=await e.json();z(s.url)}else{let s=await e.json();alert(`Failed to upload image: ${s.error||e.statusText}`)}}catch(e){console.error("Image upload error:",e),alert("An unexpected error occurred during image upload.")}finally{C(!1)}}},T=async()=>{if(M){j(!0);try{let e=await fetch("/api/user/profile",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({profile_picture:P||null,bio:A.trim()||null})});if(e.ok){let s=await e.json();i(s.user),d(s.user),x(!1)}else{let s=await e.json();alert(`Failed to update profile: ${s.error||e.statusText}`)}}catch(e){console.error("Failed to update profile:",e),alert("An unexpected error occurred while updating profile.")}finally{j(!1)}}};return c?(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsx)("div",{className:"text-muted-foreground animate-pulse",children:"Loading profile..."})}):o?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold",children:M?"Your Profile":`@${o.username}'s Profile`}),M&&(0,t.jsx)(n.$,{onClick:()=>x(!u),variant:u?"outline":"default",children:u?"Cancel":"Edit Profile"})]}),(0,t.jsxs)(q.Zp,{className:"glass-effect hover-lift animate-fadeIn",children:[(0,t.jsx)(q.aR,{children:(0,t.jsxs)(q.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(N.A,{className:"h-5 w-5"}),"Profile Information"]})}),(0,t.jsxs)(q.Wu,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-6",children:[(0,t.jsxs)("div",{className:"relative",children:[o.profile_picture?(0,t.jsx)(es.default,{src:o.profile_picture||"/placeholder.svg",alt:`${o.username}'s profile`,width:100,height:100,className:"w-24 h-24 rounded-full object-cover border-4 border-gray-200 dark:border-gray-700"}):(0,t.jsx)("div",{className:"w-24 h-24 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center border-4 border-gray-200 dark:border-gray-700",children:(0,t.jsx)(N.A,{className:"h-12 w-12 text-gray-400"})}),u&&(0,t.jsxs)("label",{className:"absolute bottom-0 right-0 bg-primary text-primary-foreground rounded-full p-2 cursor-pointer hover:bg-primary/90 transition-colors",children:[(0,t.jsx)(Y,{className:"h-4 w-4"}),(0,t.jsx)("input",{type:"file",accept:"image/*",onChange:I,className:"hidden",disabled:k})]}),k&&(0,t.jsx)("div",{className:"absolute inset-0 bg-black/50 rounded-full flex items-center justify-center",children:(0,t.jsx)("div",{className:"w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"})})]}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("h3",{className:`text-2xl font-bold ${o.has_gold_animation&&o.has_gold_animation?"bg-gradient-to-r from-yellow-400 via-yellow-500 to-yellow-600 bg-clip-text text-transparent animate-pulse font-medium":""}`,style:o.has_gold_animation?{}:o.name_color?{color:o.name_color}:{},children:["@",o.username]}),o.custom_title&&(0,t.jsx)("p",{className:"text-sm italic text-muted-foreground mt-1",children:o.custom_title}),o.signup_code&&(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-primary/10 text-primary",children:["asdf"===o.signup_code&&"✨ Custom Colors","qwea"===o.signup_code&&"\uD83D\uDC51 Gold Member"]})})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Bio"}),u?(0,t.jsx)(O.T,{value:A,onChange:e=>$(e.target.value),placeholder:"Tell us about yourself...",rows:4,maxLength:500,className:"resize-none"}):(0,t.jsx)("div",{className:"min-h-[100px] p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:o.bio?(0,t.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:o.bio}):(0,t.jsx)("p",{className:"text-sm text-muted-foreground italic",children:M?"Add a bio to tell others about yourself":"No bio available"})}),u&&(0,t.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[A.length,"/500 characters"]})]}),(0,t.jsx)("div",{className:"flex gap-3",children:u?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.$,{onClick:T,disabled:p,className:"flex-1",children:p?"Saving...":"Save Changes"}),(0,t.jsx)(n.$,{variant:"outline",onClick:()=>x(!1),disabled:p,children:"Cancel"})]}):M?null:(0,t.jsxs)(t.Fragment,{children:[S?.status==="accepted"?(0,t.jsxs)(n.$,{onClick:()=>s?.(o.id,o.username),className:"flex-1",children:[(0,t.jsx)(X.A,{className:"h-4 w-4 mr-2"}),"Send Message"]}):(0,t.jsxs)(n.$,{disabled:!0,className:"flex-1 opacity-50 cursor-not-allowed",children:[(0,t.jsx)(X.A,{className:"h-4 w-4 mr-2"}),S?.status==="pending"?"Friend Request Pending":"Add Friend to Message"]}),S&&"blocked"!==S.status?"pending"===S.status?(0,t.jsxs)(n.$,{variant:"outline",disabled:!0,className:"opacity-50 cursor-not-allowed",children:[(0,t.jsx)(f.A,{className:"h-4 w-4 mr-2"}),"Request Sent"]}):(0,t.jsxs)(n.$,{variant:"outline",disabled:!0,className:"opacity-50 cursor-not-allowed",children:[(0,t.jsx)(f.A,{className:"h-4 w-4 mr-2"}),"Friends"]}):(0,t.jsxs)(n.$,{variant:"outline",onClick:()=>a?.(o.id),children:[(0,t.jsx)(f.A,{className:"h-4 w-4 mr-2"}),"Add Friend"]}),F&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.$,{variant:"destructive",onClick:()=>y(!0),children:[(0,t.jsx)(Q,{className:"h-4 w-4 mr-2"})," Freeze"]}),(0,t.jsxs)(n.$,{variant:"outline",onClick:async()=>{try{await fetch(`/api/freeze?targetUserId=${o.id}`,{method:"DELETE"}),alert("User unfrozen")}catch{alert("Failed to unfreeze")}},children:[(0,t.jsx)(ee,{className:"h-4 w-4 mr-2"})," Unfreeze"]})]})]})})]})]}),v&&(0,t.jsx)("div",{className:"fixed inset-0 z-[80] flex items-center justify-center bg-black/50",children:(0,t.jsxs)("div",{className:"w-full max-w-md bg-white dark:bg-gray-900 rounded-xl p-4 border",children:[(0,t.jsxs)("div",{className:"text-lg font-semibold mb-2",children:["Freeze @",o.username]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Only gold members can do this. The user will be prevented from typing or using voice."}),(0,t.jsx)("textarea",{className:"w-full border rounded p-2 text-sm mb-3",rows:3,placeholder:"Optional message shown on their screen",value:b,onChange:e=>w(e.target.value)}),(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,t.jsx)(n.$,{variant:"outline",onClick:()=>y(!1),children:"Cancel"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(n.$,{variant:"secondary",onClick:async()=>{let e=prompt("Popup message to show immediately (optional)")||"";if(e)try{await fetch("/api/freeze/popup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({targetUserId:o.id,popupMessage:e})}),alert("Popup sent")}catch{alert("Failed to send popup")}},children:[(0,t.jsx)(g.A,{className:"h-4 w-4 mr-1"})," Send Popup"]}),(0,t.jsxs)(n.$,{variant:"destructive",onClick:async()=>{try{let e=await fetch("/api/freeze",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({targetUserId:o.id,message:b})});if(e.ok)alert("User frozen"),y(!1),w("");else{let s=await e.json();alert(s.error||"Failed to freeze")}}catch{alert("Failed to freeze")}},children:[(0,t.jsx)(Q,{className:"h-4 w-4 mr-1"})," Confirm Freeze"]})]})]})]})})]}):(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsx)("div",{className:"text-muted-foreground",children:"Profile not found"})})}var et=a(5528);function el(){let{user:e}=(0,m.J)();return e?(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(et.n,{roomId:"global-voice",userId:e.id}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)("input",{id:"voice-enable-widget",type:"checkbox",defaultChecked:!1,onChange:e=>{localStorage.setItem("voiceWidgetEnabled",e.target.checked?"1":"0"),window.dispatchEvent(new Event("voice-widget-toggle"))}}),(0,t.jsx)("label",{htmlFor:"voice-enable-widget",children:"Enable floating voice widget across pages"})]})]}):null}var er=a(94541),ei=a(31024),en=a(61582);function eo(e){return null}var ed=a(40318);function ec({onClose:e,onJoinSuccess:s}){let[a,r]=(0,l.useState)(""),[i,o]=(0,l.useState)(!1),[d,c]=(0,l.useState)(""),h=async t=>{if(t.preventDefault(),a.trim()){o(!0),c("");try{let t=await fetch("/api/group-chats/join",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({shortCode:a.trim().toUpperCase()})}),l=await t.json();t.ok?(s(l.groupChat),e()):c(l.error||"Failed to join group chat")}catch(e){c("An unexpected error occurred")}finally{o(!1)}}};return(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:(0,t.jsxs)(q.Zp,{className:"w-full max-w-md mx-4",children:[(0,t.jsxs)(q.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsxs)(q.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(j,{className:"h-5 w-5"}),"Join Group Chat"]}),(0,t.jsx)(n.$,{variant:"ghost",size:"sm",onClick:e,children:(0,t.jsx)(W.A,{className:"h-4 w-4"})})]}),(0,t.jsx)(q.Wu,{children:(0,t.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Enter Group Code"}),(0,t.jsx)(D.p,{value:a,onChange:e=>r(e.target.value.toUpperCase()),placeholder:"e.g., ABC123",maxLength:6,className:"text-center text-lg font-mono tracking-wider",disabled:i}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"6-character code provided by the group creator"})]}),d&&(0,t.jsx)("div",{className:"text-sm text-red-600 bg-red-50 p-2 rounded",children:d}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(n.$,{type:"submit",disabled:!a.trim()||i,className:"flex-1",children:i?"Joining...":"Join Group"}),(0,t.jsx)(n.$,{type:"button",variant:"outline",onClick:e,children:"Cancel"})]})]})})]})})}var eh=a(43509);function em({groupChatId:e,groupChatName:s,onClose:a,onRequestProcessed:r}){let[i,o]=(0,l.useState)([]),[d,c]=(0,l.useState)(!0),[h,m]=(0,l.useState)(null),u=async(s,a,t)=>{m(s);try{let l=await fetch(`/api/group-chats/${e}/requests`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({requestId:s,requesterId:a,action:t})});if(l.ok)o(e=>e.filter(e=>e.id!==s)),r();else{let e=await l.json();alert(e.error||"Failed to process request")}}catch(e){alert("An error occurred while processing the request")}finally{m(null)}},x=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return d?(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:(0,t.jsx)(q.Zp,{className:"w-full max-w-md mx-4",children:(0,t.jsxs)(q.Wu,{className:"p-6 text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),(0,t.jsx)("p",{className:"mt-2 text-sm text-muted-foreground",children:"Loading requests..."})]})})}):(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:(0,t.jsxs)(q.Zp,{className:"w-full max-w-md mx-4 max-h-[80vh] overflow-hidden",children:[(0,t.jsxs)(q.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsxs)(q.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(G.A,{className:"h-5 w-5"}),"Join Requests"]}),(0,t.jsx)(n.$,{variant:"ghost",size:"sm",onClick:a,children:(0,t.jsx)(W.A,{className:"h-4 w-4"})})]}),(0,t.jsxs)(q.Wu,{className:"p-0",children:[(0,t.jsx)("div",{className:"px-6 pb-2",children:(0,t.jsxs)("p",{className:"text-sm text-muted-foreground mb-4",children:["Pending requests for ",(0,t.jsx)("strong",{children:s})]})}),(0,t.jsx)("div",{className:"max-h-96 overflow-y-auto",children:0===i.length?(0,t.jsxs)("div",{className:"px-6 py-8 text-center text-muted-foreground",children:[(0,t.jsx)(N.A,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),(0,t.jsx)("p",{children:"No pending join requests"})]}):(0,t.jsx)("div",{className:"space-y-2 px-6 pb-6",children:i.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center",children:(0,t.jsx)(N.A,{className:"h-4 w-4"})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"font-medium text-sm",children:["@",e.username]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:x(e.created_at)})]})]}),(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsx)(n.$,{size:"sm",variant:"ghost",onClick:()=>u(e.id,e.requester_id,"approve"),disabled:h===e.id,className:"text-green-600 hover:text-green-700 hover:bg-green-50",children:(0,t.jsx)(eh.A,{className:"h-4 w-4"})}),(0,t.jsx)(n.$,{size:"sm",variant:"ghost",onClick:()=>u(e.id,e.requester_id,"reject"),disabled:h===e.id,className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:(0,t.jsx)(W.A,{className:"h-4 w-4"})})]})]},e.id))})})]})]})})}let eu=(0,x.A)("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);function ex({currentUserId:e}){let[s,a]=(0,l.useState)([]),[r,i]=(0,l.useState)(!0);(0,l.useCallback)(async()=>{try{let e=await fetch("/api/users/online");if(e.ok){let s=await e.json();a(s.onlineUsers)}}catch(e){console.error("Failed to fetch online users:",e)}finally{i(!1)}},[]),(0,l.useCallback)(async()=>{try{await fetch("/api/user/activity",{method:"POST"})}catch(e){console.error("Failed to update activity:",e)}},[]);let n=(e,s)=>s?"bg-gradient-to-r from-yellow-400 via-yellow-500 to-yellow-600 bg-clip-text text-transparent animate-pulse font-medium":"",o=e=>e?{color:e}:{};return r?(0,t.jsxs)(q.Zp,{className:"animate-fadeIn",children:[(0,t.jsx)(q.aR,{children:(0,t.jsxs)(q.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(R.A,{className:"h-5 w-5"}),"Online Friends"]})}),(0,t.jsx)(q.Wu,{children:(0,t.jsx)("div",{className:"text-center py-4 text-muted-foreground animate-pulse",children:"Loading..."})})]}):(0,t.jsxs)(q.Zp,{className:"animate-fadeIn",children:[(0,t.jsx)(q.aR,{children:(0,t.jsxs)(q.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(eu,{className:"h-5 w-5 text-green-500"}),"Online Friends (",s.length,")"]})}),(0,t.jsx)(q.Wu,{children:0===s.length?(0,t.jsxs)("div",{className:"text-center py-4 text-muted-foreground",children:[(0,t.jsx)(R.A,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),(0,t.jsx)("p",{children:"No online friends"}),(0,t.jsx)("p",{className:"text-sm mt-1",children:"Add some friends to see them here!"})]}):(0,t.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:s.map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-3 p-2 rounded-lg hover:bg-accent/50 transition-colors",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),(0,t.jsxs)("span",{className:e.has_gold_animation?n(void 0,!0):"text-sm",style:e.has_gold_animation?{}:o(e.name_color),children:["@",e.username]})]},e.id))})})]})}function ep({currentUserId:e,onViewAllPolls:s}){var a;let[r,i]=(0,l.useState)(null),[o,d]=(0,l.useState)(!0),[c,h]=(0,l.useState)(!1),m=(0,l.useCallback)(async()=>{try{let s=await fetch(`/api/polls/recent?userId=${e}`);if(s.ok){let e=await s.json();i(e.poll)}}catch(e){console.error("Failed to fetch recent poll:",e)}finally{d(!1)}},[e]),u=async e=>{if(r&&!c){h(!0);try{let s=await fetch(`/api/polls/${r.id}/vote`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({option_index:e})});if(s.ok)await m();else{let e=await s.json();console.error("Failed to vote:",e.error)}}catch(e){console.error("Failed to vote:",e)}finally{h(!1)}}},x=(e,s)=>0===s?0:Math.round(e/s*100);if(o)return(0,t.jsxs)(q.Zp,{className:"glass-effect animate-fadeIn",children:[(0,t.jsx)(q.aR,{children:(0,t.jsxs)(q.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(v,{className:"h-5 w-5"}),"Latest Poll"]})}),(0,t.jsx)(q.Wu,{children:(0,t.jsx)("div",{className:"text-center py-4 text-muted-foreground animate-pulse",children:"Loading..."})})]});if(!r)return(0,t.jsxs)(q.Zp,{className:"glass-effect animate-fadeIn",children:[(0,t.jsx)(q.aR,{children:(0,t.jsxs)(q.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(v,{className:"h-5 w-5"}),"Latest Poll"]})}),(0,t.jsx)(q.Wu,{children:(0,t.jsxs)("div",{className:"text-center py-4",children:[(0,t.jsx)(v,{className:"h-8 w-8 mx-auto mb-2 opacity-50 text-muted-foreground"}),(0,t.jsx)("p",{className:"text-muted-foreground text-sm",children:"No polls available"}),(0,t.jsx)(n.$,{variant:"outline",size:"sm",className:"mt-2 bg-transparent hover-lift",onClick:s,children:"View All Polls"})]})})]});let p=void 0!==r.user_response,f=!!(a=r.expires_at)&&new Date(a)<new Date;return(0,t.jsxs)(q.Zp,{className:`glass-effect animate-fadeIn hover-lift ${f?"opacity-75":""}`,children:[(0,t.jsx)(q.aR,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(q.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(v,{className:"h-5 w-5"}),"Latest Poll"]}),(0,t.jsx)(n.$,{variant:"ghost",size:"sm",onClick:s,className:"text-xs hover-lift",children:"View All"})]})}),(0,t.jsxs)(q.Wu,{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-sm",children:r.title}),r.description&&(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:r.description})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 text-xs text-muted-foreground",children:[r.is_public?(0,t.jsx)(C,{className:"h-3 w-3 hue-accent"}):(0,t.jsx)(R.A,{className:"h-3 w-3"}),(0,t.jsx)(U,{className:"h-3 w-3"}),(0,t.jsxs)("span",{children:[r.total_responses," votes"]}),r.expires_at&&(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(G.A,{className:"h-3 w-3"}),(0,t.jsx)("span",{className:f?"text-red-500":"",children:f?"Expired":`Expires ${new Date(r.expires_at).toLocaleDateString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}`})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[r.options.slice(0,2).map((e,s)=>{let a=r.results.find(e=>e.option_index===s),l=a?.count||0,i=x(l,r.total_responses),o=r.user_response===s;return(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(n.$,{variant:o?"default":"outline",size:"sm",className:`flex-1 justify-start text-xs h-7 hover-lift transition-all duration-200 ${o?"hue-shadow":""}`,onClick:()=>!p&&!f&&!c&&u(s),disabled:p||f||c,children:[(0,t.jsx)("span",{className:"flex-1 text-left",children:e}),c&&(0,t.jsx)("div",{className:"w-3 h-3 border border-current border-t-transparent rounded-full animate-spin ml-1"})]}),p&&(0,t.jsxs)("span",{className:"text-xs text-muted-foreground ml-2 min-w-[45px] text-right",children:[l," (",i,"%)"]})]}),p&&(0,t.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1",children:(0,t.jsx)("div",{className:`h-1 rounded-full transition-all duration-500 ${o?"hue-bg":"bg-gray-400 dark:bg-gray-600"}`,style:{width:`${i}%`,backgroundColor:o?"hsl(var(--hue) 50% 50%)":void 0}})})]},s)}),r.options.length>2&&(0,t.jsxs)("p",{className:"text-xs text-muted-foreground text-center",children:["+",r.options.length-2," more options"]})]}),!p&&!f&&(0,t.jsx)("p",{className:"text-xs text-muted-foreground text-center opacity-70",children:"Click an option to vote"})]})]})}var ef=a(8757);function eg({onClose:e,onMessageClick:s}){let[a,r]=(0,l.useState)(""),[i,o]=(0,l.useState)([]),[d,c]=(0,l.useState)(!1),h=(e,s)=>s?"bg-gradient-to-r from-yellow-400 via-yellow-500 to-yellow-600 bg-clip-text text-transparent animate-pulse font-medium":"",m=e=>e?{color:e}:{},u=e=>new Date(e).toLocaleDateString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),x=e=>"global"===e.chat_type?"Global Chat":"dm"===e.chat_type?"Direct Message":"Group Chat";return(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,t.jsxs)(q.Zp,{className:"w-full max-w-2xl mx-4 max-h-[80vh] overflow-hidden",children:[(0,t.jsxs)(q.aR,{className:"flex flex-row items-center justify-between",children:[(0,t.jsxs)(q.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(ef.A,{className:"h-5 w-5"}),"Search Messages"]}),(0,t.jsx)(n.$,{variant:"ghost",size:"sm",onClick:e,children:(0,t.jsx)(W.A,{className:"h-4 w-4"})})]}),(0,t.jsxs)(q.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(D.p,{value:a,onChange:e=>r(e.target.value),placeholder:"Search messages...",className:"flex-1",autoFocus:!0}),d&&(0,t.jsx)("div",{className:"flex items-center px-3",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary"})})]}),(0,t.jsx)("div",{className:"max-h-96 overflow-y-auto space-y-2",children:a.trim().length<2?(0,t.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,t.jsx)(ef.A,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,t.jsx)("p",{children:"Type at least 2 characters to search"})]}):0!==i.length||d?i.map(a=>(0,t.jsxs)("div",{className:"p-3 border rounded-lg hover:bg-accent/50 cursor-pointer transition-colors",onClick:()=>{s?.(a.chat_type,a.chat_id),e()},children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsxs)("span",{className:a.has_gold_animation?h(void 0,!0):"text-sm font-medium",style:a.has_gold_animation?{}:m(a.name_color),children:["@",a.username]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[(0,t.jsx)("span",{children:x(a)}),(0,t.jsx)("span",{children:"•"}),(0,t.jsx)("span",{children:u(a.created_at)})]})]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground truncate",children:"image"===a.message_type?"\uD83D\uDCF7 Shared an image":a.content})]},a.id)):(0,t.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,t.jsx)(X.A,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,t.jsxs)("p",{children:['No messages found for "',a,'"']})]})})]})]})})}var ej=a(19578),ev=a(66170);function ey(){let e=(0,r.useRouter)(),[s,a]=(0,l.useState)(!1),i=s=>{try{localStorage.setItem("seen-mode-gate","1")}catch{}"lite"===s?e.push("/dashboard/lite"):e.push("/dashboard")};return s?(0,t.jsx)("div",{className:"fixed inset-0 z-[80] bg-black/60 backdrop-blur-sm flex items-center justify-center",children:(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-900 rounded-xl p-6 w-[90%] max-w-md border",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Choose your experience"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Pick a UI mode. You can change this later in Settings."}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("button",{onClick:()=>i("lite"),className:"rounded-lg border p-4 hover:bg-gray-50 dark:hover:bg-gray-800 text-left",children:[(0,t.jsx)("div",{className:"font-medium mb-1",children:"Lite"}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"Minimal and fast. Global chat, Friends, DMs, Settings, Group Chats."})]}),(0,t.jsxs)("button",{onClick:()=>i("full"),className:"rounded-lg border p-4 hover:bg-gray-50 dark:hover:bg-gray-800 text-left",children:[(0,t.jsx)("div",{className:"font-medium mb-1",children:"Full"}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"Full experience with entertainment, voice, polls, and more."})]})]})]})}):null}var eb=a(61181);function eN({isOpen:e,onClose:s}){let[a,r]=(0,l.useState)(""),[i,o]=(0,l.useState)(!1),[d,c]=(0,l.useState)(""),[h,u]=(0,l.useState)(null),{user:x}=(0,m.J)(),p=x?.signup_code==="qwea",f=()=>{u((0,eb.BW)())},g=async()=>{if(!a.trim()){c("Please enter a valid API key");return}o(!0),c("");try{let e=await (0,eb.eE)(a,x?.username||"Unknown");e.success?(c("API key added successfully! \uD83C\uDF89"),r(""),f()):c(e.message)}catch(e){c("Error adding API key. Please try again.")}finally{o(!1)}};return e?(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-lg p-6 w-full max-w-md",children:[(0,t.jsx)("h2",{className:"text-lg font-bold mb-2",children:"Gemini API Key Management"}),!p&&(0,t.jsx)("div",{className:"text-red-600 mb-4",children:"Only gold members can add or manage Gemini API keys."}),h?.error&&(0,t.jsx)("div",{className:"text-red-600 mb-2",children:h.error}),!h?.hasAvailableKeys&&(0,t.jsx)("div",{className:"text-yellow-600 mb-2",children:"No available Gemini API keys. Please add a new one to restore AI features for all users."}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("div",{className:"text-sm text-muted-foreground mb-1",children:["Current keys: ",h?.totalKeys??0]}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground mb-1",children:["Exhausted keys: ",h?.exhaustedKeys??0]})]}),p&&(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("input",{type:"text",className:"w-full border rounded px-3 py-2 mb-2",placeholder:"Enter Gemini API key (starts with AIza)",value:a,onChange:e=>r(e.target.value),disabled:i}),(0,t.jsx)(n.$,{onClick:g,disabled:i,className:"w-full mb-2",children:i?"Adding...":"Add API Key"}),(0,t.jsx)(n.$,{onClick:()=>{f(),c("Key status refreshed")},variant:"outline",className:"w-full",children:"Refresh Key Status"})]}),d&&(0,t.jsx)("div",{className:"text-sm text-blue-600 mb-2",children:d}),(0,t.jsx)(n.$,{onClick:s,variant:"secondary",className:"w-full mt-2",children:"Close"})]})}):null}let ew=[{id:"blue",name:"Blue"},{id:"purple",name:"Purple"},{id:"pink",name:"Pink"},{id:"red",name:"Red"},{id:"orange",name:"Orange"},{id:"yellow",name:"Yellow"},{id:"green",name:"Green"},{id:"teal",name:"Teal"}];function ek(){let{user:e,loading:s,setUser:a}=(0,m.J)(),{theme:o,setTheme:d}=(0,i.D)(),[c,h]=(0,l.useState)("dashboard"),[u,x]=(0,l.useState)([]),[p,f]=(0,l.useState)({type:null,name:""}),[g,v]=(0,l.useState)(!1),[y,b]=(0,l.useState)(!1),[N,w]=(0,l.useState)(!1),[k,S]=(0,l.useState)(!1),[_,A]=(0,l.useState)(null),[$,P]=(0,l.useState)(!1),z=(0,r.useRouter)(),D=(0,l.useCallback)(async()=>{if(e)try{let e=await fetch("/api/group-chats");if(e.ok){let s=await e.json();x(s.groupChats)}else console.error("Failed to fetch group chats:",e.status,await e.text())}catch(e){console.error("Failed to fetch group chats:",e)}},[e]),O=async(e,s)=>{try{let a=await fetch("/api/group-chats",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,memberIds:s})});if(a.ok){let e=await a.json();x(s=>[e.groupChat,...s]),v(!1),f({type:"group",id:e.groupChat.id,name:e.groupChat.name}),h("dashboard"),e.groupChat.short_code&&alert(`Group chat created! Share this code with others: ${e.groupChat.short_code}`)}else console.error("Failed to create group chat:",a.status,await a.text())}catch(e){console.error("Failed to create group chat:",e)}},E=async s=>{if(e&&confirm("Are you sure you want to delete this group chat? This action cannot be undone."))try{let e=await fetch(`/api/group-chats/${s}`,{method:"DELETE"});if(e.ok)console.log(`Group chat ${s} deleted successfully.`),D(),"group"===p.type&&p.id===s&&f({type:null,name:""});else{let s=await e.json();console.error("Failed to delete group chat:",s.error||e.statusText),alert(`Failed to delete group chat: ${s.error||e.statusText}`)}}catch(e){console.error("Failed to delete group chat:",e),alert("An unexpected error occurred while deleting the group chat.")}},U=async()=>{try{let e=await fetch("/api/auth/signout",{method:"POST",credentials:"include"});e.ok?a(null):console.error("Sign out failed:",e.status),window.location.href="/auth"}catch(e){console.error("Failed to sign out:",e),window.location.href="/auth"}},W=(e,s)=>{f({type:"dm",id:e,name:`@${s}`}),h("dashboard"),A(null)},H=()=>{f({type:"global",name:"Global Chat"}),h("dashboard"),A(null)},V=async()=>{},Y=async()=>{if(!e)return;let s=(ew.findIndex(s=>s.id===e.hue)+1)%ew.length,t=ew[s].id;console.log("[dashboard] Cycling hue from",e.hue,"to",t);try{let e=await fetch("/api/user/settings",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({hue:t})});if(e.ok){let s=await e.json();console.log("[dashboard] Hue update successful:",s.user.hue),a(s.user)}else{let s=await e.json();console.error("[dashboard] Failed to update hue:",s.error||e.statusText),alert(`Failed to change hue: ${s.error||e.statusText}`)}}catch(e){console.error("[dashboard] Failed to update hue:",e),alert(`An unexpected error occurred while changing hue: ${e.message}`)}},X=async e=>{try{let s=await fetch("/api/friends",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({addresseeId:e})});if(s.ok)alert("Friend request sent!");else{let e=await s.json();alert(`Failed to send friend request: ${e.error}`)}}catch(e){console.error("Failed to send friend request:",e),alert("An error occurred while sending friend request")}};return s?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background",children:(0,t.jsx)("div",{className:"text-muted-foreground animate-pulse",children:"Loading..."})}):e?(0,t.jsxs)("div",{className:"relative min-h-screen bg-background",children:[(0,t.jsx)(ey,{}),(0,t.jsx)(M,{currentPage:c,onPageChange:e=>{"settings"===e?z.push("/settings"):"about"===e?z.push("/about"):"movies"===e?(z.push("/movies"),f({type:null,name:""}),A(null)):"games"===e?(z.push("/games"),f({type:null,name:""}),A(null)):"radio"===e?(z.push("/radio"),f({type:null,name:""}),A(null)):(h(e),"dashboard"!==e&&(f({type:null,name:""}),A(null)))},onSignOut:U,onGlobalChatClick:H,onAIChatClick:()=>{f({type:"dm",id:"00000000-0000-0000-0000-00000000000a",name:"real.AI"}),h("dashboard"),A(null)},username:e.username,onThemeCycle:V,onHueCycle:Y}),(0,t.jsxs)("div",{className:"relative z-10 pt-20 px-4 pb-4 animate-fadeIn",children:["dashboard"===c&&(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 max-w-7xl mx-auto h-[calc(100vh-6rem)]",children:[(0,t.jsxs)("div",{className:"lg:col-span-3 space-y-4 flex-shrink-0 overflow-y-auto max-h-full",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:[(0,t.jsxs)(q.Zp,{className:"animate-fadeIn card-modern",children:[(0,t.jsx)(q.aR,{children:(0,t.jsxs)(q.ZB,{className:"flex items-center justify-between text-hue heading-md",children:[(0,t.jsx)("span",{children:"Group Chats"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(n.$,{variant:"ghost",size:"sm",className:"btn-ghost hover-glow",onClick:()=>S(!0),title:"Search Messages",children:(0,t.jsx)(ef.A,{className:"h-4 w-4"})}),(0,t.jsx)(n.$,{variant:"ghost",size:"sm",className:"btn-ghost hover-glow",onClick:()=>b(!0),title:"Join Group Chat",children:(0,t.jsx)(j,{className:"h-4 w-4"})}),(0,t.jsx)(n.$,{variant:"ghost",size:"sm",className:"btn-ghost hover-glow",onClick:()=>v(!0),children:(0,t.jsx)(Z,{className:"h-4 w-4"})})]})]})}),(0,t.jsx)(q.Wu,{children:0===u.length?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center",style:{background:"linear-gradient(135deg, hsla(var(--hue), 60%, 50%, 0.1) 0%, hsla(var(--hue), 40%, 60%, 0.05) 100%)"},children:(0,t.jsx)(R.A,{className:"h-8 w-8 text-muted-foreground/50"})}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"No group chats yet"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground/70 mt-1",children:"Create or join one to get started!"})]}):(0,t.jsx)("div",{className:"space-y-2",children:u.map(s=>(0,t.jsx)("div",{className:"group",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(n.$,{variant:"group"===p.type&&p.id===s.id?"default":"ghost",className:`flex-1 justify-start text-left btn-ghost hover-lift rounded-lg p-3 ${"group"===p.type&&p.id===s.id?"animate-pulse-glow":"hover-scale"}`,style:"group"===p.type&&p.id===s.id?{background:`linear-gradient(135deg, 
                                  hsla(var(--hue), 70%, 60%, 0.15) 0%, 
                                  hsla(var(--hue), 50%, 70%, 0.1) 100%)`,borderColor:"hsla(var(--hue), 60%, 70%, 0.3)",boxShadow:"0 2px 8px hsla(var(--hue), 60%, 50%, 0.2)"}:{},onClick:()=>f({type:"group",id:s.id,name:s.name}),children:(0,t.jsxs)("div",{className:"flex items-center gap-3 w-full",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0",style:{background:"linear-gradient(135deg, hsla(var(--hue), 60%, 50%, 0.2) 0%, hsla(var(--hue), 40%, 60%, 0.1) 100%)"},children:(0,t.jsx)(R.A,{className:"h-4 w-4"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("div",{className:"font-medium truncate",children:s.name}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground/70 truncate",children:["by ",s.creator_username]})]})]})}),(0,t.jsx)("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:e.id===s.creator_id&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.$,{variant:"ghost",size:"sm",onClick:()=>w(!0),className:"text-blue-500 hover:bg-blue-500/10 rounded-lg",title:"View Join Requests",children:(0,t.jsx)(G.A,{className:"h-4 w-4"})}),(0,t.jsx)(n.$,{variant:"ghost",size:"sm",onClick:()=>E(s.id),className:"text-red-500 hover:bg-red-500/10 rounded-lg",title:"Delete Group Chat",children:(0,t.jsx)(L.A,{className:"h-4 w-4"})})]})})]})},s.id))})})]}),(0,t.jsx)(q.Zp,{className:"card-modern",children:(0,t.jsx)(ex,{currentUserId:e.id})}),(0,t.jsx)(q.Zp,{className:"card-modern",children:(0,t.jsx)(ep,{currentUserId:e.id,onViewAllPolls:()=>{h("polls"),A(null)}})})]}),(0,t.jsx)("div",{className:"lg:col-span-9 h-full",children:p.type?(0,t.jsx)("div",{className:"animate-fadeIn h-full",children:(0,t.jsx)(F.l,{chatType:p.type,chatId:p.id,chatName:p.name,currentUserId:e.id,onUserClick:e=>{console.log("[dashboard] User clicked:",e),A(e),h("profile"),f({type:null,name:""})}})}):(0,t.jsxs)(q.Zp,{className:"h-full flex items-center justify-center card-modern animate-breathe relative overflow-hidden",children:[(0,t.jsxs)("div",{className:"absolute inset-0 opacity-10",children:[(0,t.jsx)("div",{className:"absolute top-1/4 left-1/4 w-64 h-64 rounded-full animate-float",style:{background:"radial-gradient(circle, hsla(var(--hue), 60%, 50%, 0.3) 0%, transparent 70%)"}}),(0,t.jsx)("div",{className:"absolute bottom-1/4 right-1/4 w-48 h-48 rounded-full animate-float",style:{background:"radial-gradient(circle, hsla(calc(var(--hue) + 60), 60%, 50%, 0.2) 0%, transparent 70%)",animationDelay:"-2s"}})]}),(0,t.jsxs)(q.Wu,{className:"text-center py-12 relative z-10",children:[(0,t.jsx)("div",{className:"text-5xl md:text-8xl font-black tracking-tighter text-hue-animated text-glow heading-xl mb-2",children:"real."}),(0,t.jsx)("div",{className:"text-lg md:text-xl text-muted-foreground/80 mb-8 font-light",children:"Where conversations come alive"}),(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4 mb-8",children:[(0,t.jsx)(ej._,{large:!0}),(0,t.jsx)(ev.m,{})]}),(0,t.jsxs)("div",{className:"mb-8 text-sm text-muted-foreground text-shadow-soft",children:["Welcome back, ",(0,t.jsxs)("span",{className:"text-hue font-medium",children:["@",e.username]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 max-w-md mx-auto",children:[(0,t.jsxs)(n.$,{className:"btn-primary hover-lift group",onClick:H,children:[(0,t.jsx)(C,{className:"w-4 h-4 mr-2 group-hover:rotate-12 transition-transform duration-300"}),"Global Chat"]}),(0,t.jsxs)(n.$,{variant:"outline",className:"btn-secondary hover-lift group",onClick:()=>h("friends"),children:[(0,t.jsx)(R.A,{className:"w-4 h-4 mr-2 group-hover:scale-110 transition-transform duration-300"}),"Friends"]}),(0,t.jsxs)(n.$,{variant:"outline",className:"btn-secondary hover-lift group",onClick:()=>h("channels"),children:[(0,t.jsx)(j,{className:"w-4 h-4 mr-2 group-hover:rotate-12 transition-transform duration-300"}),"Channels"]})]})]})]})})]}),"friends"===c&&e&&(0,t.jsx)("div",{className:"max-w-4xl mx-auto animate-slideIn",children:(0,t.jsx)(I.r,{currentUserId:e.id,onStartDM:W,onShowProfile:e=>{A(e),h("profile")}})}),"dms"===c&&(0,t.jsx)("div",{className:"max-w-4xl mx-auto animate-slideIn",children:(0,t.jsx)(T.s,{currentUserId:e.id,onSelectDM:W})}),"polls"===c&&(0,t.jsx)("div",{className:"max-w-4xl mx-auto animate-slideIn",children:(0,t.jsx)(J,{currentUserId:e.id,userSignupCode:e.signup_code})}),"channels"===c&&(0,t.jsx)("div",{className:"max-w-4xl mx-auto animate-slideIn",children:(0,t.jsx)(B,{currentUserId:e.id,userSignupCode:e.signup_code,onSelectChannel:(e,s)=>{f({type:"channel",id:e,name:`# ${s}`}),h("dashboard"),A(null)}})}),"calendar"===c&&(0,t.jsx)("div",{className:"max-w-4xl mx-auto animate-slideIn",children:(0,t.jsx)(K,{currentUserId:e.id})}),"voice"===c&&(0,t.jsx)("div",{className:"max-w-4xl mx-auto animate-slideIn",children:(0,t.jsx)(el,{})}),"movies"===c&&(0,t.jsx)("div",{className:"max-w-7xl mx-auto animate-fadeIn",children:(0,t.jsx)(er.default,{})}),"games"===c&&(0,t.jsx)("div",{className:"max-w-7xl mx-auto animate-fadeIn",children:(0,t.jsx)(en.A,{})}),"radio"===c&&(0,t.jsx)("div",{className:"max-w-7xl mx-auto animate-fadeIn",children:(0,t.jsx)(ei.default,{})}),"profile"===c&&(0,t.jsx)("div",{className:"max-w-4xl mx-auto animate-slideIn",children:(0,t.jsx)(ea,{userId:_??void 0,onStartDM:W,onSendFriendRequest:X})})]}),(0,t.jsx)(eo,{currentUserId:e.id}),g&&e&&(0,t.jsx)(ed.o,{onClose:()=>v(!1),onCreate:O}),y&&(0,t.jsx)(ec,{onClose:()=>b(!1),onJoinSuccess:e=>{alert(`Join request sent to ${e.name}! The creator will be notified.`),D()}}),N&&(0,t.jsx)(em,{groupChatId:u.find(s=>s.creator_id===e?.id)?.id||"",groupChatName:u.find(s=>s.creator_id===e?.id)?.name||"",onClose:()=>w(!1),onRequestProcessed:()=>{D()}}),k&&(0,t.jsx)(eg,{onClose:()=>S(!1),onMessageClick:(e,s)=>{if("global"===e)f({type:"global",name:"Global Chat"});else if("dm"===e)f({type:"dm",id:s,name:"Direct Message"});else if("group"===e){let e=u.find(e=>e.id===s);f({type:"group",id:s,name:e?.name||"Group Chat"})}h("dashboard"),A(null)}}),(0,t.jsx)(eN,{isOpen:$,onClose:()=>P(!1)})]}):null}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},24098:(e,s,a)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"PreloadChunks",{enumerable:!0,get:function(){return n}});let t=a(89812),l=a(69056),r=a(29294),i=a(86004);function n(e){let{moduleIds:s}=e,a=r.workAsyncStorage.getStore();if(void 0===a)return null;let n=[];if(a.reactLoadableManifest&&s){let e=a.reactLoadableManifest;for(let a of s){if(!e[a])continue;let s=e[a].files;n.push(...s)}}return 0===n.length?null:(0,t.jsx)(t.Fragment,{children:n.map(e=>{let s=a.assetPrefix+"/_next/"+(0,i.encodeURIPath)(e);return e.endsWith(".css")?(0,t.jsx)("link",{precedence:"dynamic",href:s,rel:"stylesheet",as:"style"},e):((0,l.preload)(s,{as:"script",fetchPriority:"low"}),null)})})}},24596:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>i.a,__next_app__:()=>h,pages:()=>c,routeModule:()=>m,tree:()=>d});var t=a(7702),l=a(63409),r=a(88409),i=a.n(r),n=a(4102),o={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);a.d(s,o);let d={children:["",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,83822)),"/Users/rohan/code/realtalk/app/dashboard/page.tsx"]}]},{loading:[()=>Promise.resolve().then(a.bind(a,11671)),"/Users/rohan/code/realtalk/app/dashboard/loading.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,81622)),"/Users/rohan/code/realtalk/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,2655,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,60002,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,78907,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["/Users/rohan/code/realtalk/app/dashboard/page.tsx"],h={require:a,loadChunk:()=>Promise.resolve()},m=new t.AppPageRouteModule({definition:{kind:l.RouteKind.APP_PAGE,page:"/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31024:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>i});var t=a(89812),l=a(79636);let r=a.n(l)()(async()=>{},{loadableGenerated:{modules:["app/radio/page.tsx -> @/components/radio-page"]},ssr:!1});function i(){return(0,t.jsxs)("div",{className:"max-w-7xl mx-auto animate-fadeIn px-4",children:[(0,t.jsx)("div",{className:"sticky top-4 z-10 mb-3",children:(0,t.jsx)("button",{onClick:()=>location.href="/dashboard",className:"text-xs px-3 py-1 rounded-full border backdrop-blur-md bg-white/40 dark:bg-black/30 text-black dark:text-white border-white/40 dark:border-white/20 hover:bg-white/60 dark:hover:bg-black/50",children:"Back to Dashboard"})}),(0,t.jsx)(r,{})]})}},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},40964:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(65519).A)("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]])},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},56804:(e,s,a)=>{Promise.resolve().then(a.bind(a,6581))},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},74175:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(65519).A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},75364:(e,s,a)=>{Promise.resolve().then(a.bind(a,83822))},76338:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(65519).A)("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]])},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},79636:(e,s,a)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return l}});let t=a(67917)._(a(98420));function l(e,s){var a;let l={};"function"==typeof e&&(l.loader=e);let r={...l,...s};return(0,t.default)({...r,modules:null==(a=r.loadableGenerated)?void 0:a.modules})}("function"==typeof s.default||"object"==typeof s.default&&null!==s.default)&&void 0===s.default.__esModule&&(Object.defineProperty(s.default,"__esModule",{value:!0}),Object.assign(s.default,s),e.exports=s.default)},79646:e=>{"use strict";e.exports=require("child_process")},81630:e=>{"use strict";e.exports=require("http")},83822:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>t});let t=(0,a(430).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/rohan/code/realtalk/app/dashboard/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/rohan/code/realtalk/app/dashboard/page.tsx","default")},83997:e=>{"use strict";e.exports=require("tty")},85343:(e,s,a)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"BailoutToCSR",{enumerable:!0,get:function(){return l}});let t=a(86787);function l(e){let{reason:s,children:a}=e;throw Object.defineProperty(new t.BailoutToCSRError(s),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}},86004:(e,s)=>{"use strict";function a(e){return e.split("/").map(e=>encodeURIComponent(e)).join("/")}Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"encodeURIPath",{enumerable:!0,get:function(){return a}})},89799:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(65519).A)("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]])},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},98420:(e,s,a)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return d}});let t=a(89812),l=a(49837),r=a(85343),i=a(24098);function n(e){return{default:e&&"default"in e?e.default:e}}let o={loader:()=>Promise.resolve(n(()=>null)),loading:null,ssr:!0},d=function(e){let s={...o,...e},a=(0,l.lazy)(()=>s.loader().then(n)),d=s.loading;function c(e){let n=d?(0,t.jsx)(d,{isLoading:!0,pastDelay:!0,error:null}):null,o=!s.ssr||!!s.loading,c=o?l.Suspense:l.Fragment,h=s.ssr?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.PreloadChunks,{moduleIds:s.modules}),(0,t.jsx)(a,{...e})]}):(0,t.jsx)(r.BailoutToCSR,{reason:"next/dynamic",children:(0,t.jsx)(a,{...e})});return(0,t.jsx)(c,{...o?{fallback:n}:{},children:h})}return c.displayName="LoadableComponent",c}}};var s=require("../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),t=s.X(0,[7095,4346,3018,5772,8444,733,4541,1582],()=>a(24596));module.exports=t})();