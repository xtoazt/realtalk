(()=>{var e={};e.id=5105,e.ids=[5105],e.modules={1747:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var s=r(89812),n=r(49837),i=r(8757),a=r(49125),o=r(20126),l=r(82105);let c=(0,r(65519).A)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]),d="https://image.tmdb.org/t/p/w500";function u(){let e=process.env.NEXT_PUBLIC_TMDB_API_KEY||"2713804610e1e236b1cf44bfac3a7776",[t,r]=(0,n.useState)([]),[u,h]=(0,n.useState)([]),[f,p]=(0,n.useState)(""),[m,g]=(0,n.useState)(null),[x,y]=(0,n.useState)(!1),v=(0,n.useRef)(null),b=(0,n.useRef)(null);(0,n.useCallback)(async(t=1,r)=>{let s=r?`https://api.themoviedb.org/3/search/movie?api_key=${e}&query=${encodeURIComponent(r)}&page=${t}`:`https://api.themoviedb.org/3/movie/popular?api_key=${e}&page=${t}`,n=await fetch(s);return(await n.json()).results||[]},[e]);let _=e=>{g(e),y(!1)},w=(0,n.useMemo)(()=>t[0],[t]);return(0,s.jsxs)("div",{className:"min-h-screen",children:[(0,s.jsxs)("div",{className:"h-64 md:h-96 rounded-b-[40px] relative overflow-hidden",style:{backgroundImage:w?.poster_path?`url(${d}${w.poster_path})`:void 0,backgroundSize:"cover",backgroundPosition:"center"},children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-background to-transparent"}),(0,s.jsx)("div",{className:"absolute bottom-4 left-4 hue-bg/50 px-4 py-2 rounded-full text-sm backdrop-blur",children:"Real TV â€¢ Fresh releases in 4K when available"})]}),(0,s.jsx)("div",{className:"sticky top-4 z-10 flex justify-end px-4",children:(0,s.jsxs)("div",{className:"glass-effect flex items-center gap-2 px-4 py-2 rounded-full shadow-lg",children:[(0,s.jsx)(i.A,{className:"h-4 w-4 opacity-70"}),(0,s.jsx)("input",{value:f,onChange:e=>p(e.target.value),placeholder:"Search...",className:"bg-transparent outline-none text-sm"})]})}),(0,s.jsxs)("section",{className:"mt-8 px-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Top 10 Today"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{ref:v,className:"flex gap-3 overflow-x-auto no-scrollbar p-2 pr-10",children:t.map(e=>(0,s.jsx)("button",{onClick:()=>_(e),className:"flex-none w-40 rounded-xl overflow-hidden shadow-md transition-transform hover:scale-105",children:e.poster_path?(0,s.jsx)("img",{src:`${d}${e.poster_path}`,alt:e.title,className:"w-full h-auto"}):(0,s.jsx)("div",{className:"w-full h-60 bg-muted"})},e.id))}),(0,s.jsx)("button",{onClick:()=>{v.current&&v.current.scrollBy({left:.8*v.current.clientWidth,behavior:"smooth"})},className:"absolute right-2 top-1/2 -translate-y-1/2 bg-black/60 hover:bg-black/80 text-white rounded-full p-2","aria-label":"Scroll right",children:(0,s.jsx)(a.A,{className:"h-5 w-5"})}),(0,s.jsx)("button",{onClick:()=>{v.current&&v.current.scrollBy({left:-(.8*v.current.clientWidth),behavior:"smooth"})},className:"absolute left-2 top-1/2 -translate-y-1/2 bg-black/60 hover:bg-black/80 text-white rounded-full p-2","aria-label":"Scroll left",children:(0,s.jsx)(o.A,{className:"h-5 w-5"})})]})]}),(0,s.jsxs)("section",{className:"mt-6 px-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-3",children:"All"}),(0,s.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3",children:u.map(e=>(0,s.jsx)("button",{onClick:()=>_(e),className:"rounded-xl overflow-hidden shadow-md transition-transform hover:scale-105",children:e.poster_path?(0,s.jsx)("img",{src:`${d}${e.poster_path}`,alt:e.title,className:"w-full h-auto"}):(0,s.jsx)("div",{className:"w-full aspect-[2/3] bg-muted"})},e.id))})]}),m&&(0,s.jsxs)("div",{className:"fixed inset-0 z-50 bg-black/80 backdrop-blur-sm",children:[(0,s.jsx)("button",{onClick:()=>{y(!1),g(null),b.current&&(window.open=b.current,b.current=null)},className:"absolute top-4 left-4 bg-purple-600 hover:bg-purple-700 text-white rounded-full p-2 shadow-lg","aria-label":"Close",children:(0,s.jsx)(l.A,{className:"h-5 w-5"})}),m.poster_path&&(0,s.jsx)("img",{src:`${d}${m.poster_path}`,alt:m.title,className:"hidden md:block absolute top-6 right-6 w-60 h-80 object-cover rounded-3xl shadow-2xl"}),(0,s.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-center px-4",children:[(0,s.jsx)("h3",{className:"text-2xl md:text-3xl font-bold mb-4",children:m.title}),x?(0,s.jsx)("div",{className:"absolute inset-0",children:(0,s.jsx)("iframe",{src:`https://player.autoembed.cc/embed/movie/${m.id}`,className:"w-full h-full",sandbox:"allow-same-origin allow-scripts allow-pointer-lock allow-forms",allow:"autoplay; encrypted-media; fullscreen",referrerPolicy:"no-referrer"},m.id)}):(0,s.jsxs)("button",{onClick:()=>{m&&(b.current=window.open,window.open=()=>null,y(!0))},className:"inline-flex items-center gap-2 bg-orange-500 hover:bg-orange-600 text-white font-semibold px-6 py-3 rounded-full shadow-lg",children:[(0,s.jsx)(c,{className:"h-5 w-5"})," Play"]})]})]})]})}},2348:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return l},getImageProps:function(){return o}});let s=r(67917),n=r(17494),i=r(88474),a=s._(r(10952));function o(e){let{props:t}=(0,n.getImgProps)(e,{defaultLoader:a.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let l=i.Image},2498:(e,t,r)=>{"use strict";r.d(t,{B:()=>l});var s,n=r(49837),i=r(25136),a=(s||(s=r.t(n,2)))["useId".toString()]||(()=>void 0),o=0;function l(e){let[t,r]=n.useState(a());return(0,i.N)(()=>{e||r(e=>e??String(o++))},[e]),e||(t?`radix-${t}`:"")}},2901:(e,t)=>{"use strict";function r(e){let{widthInt:t,heightInt:r,blurWidth:s,blurHeight:n,blurDataURL:i,objectFit:a}=e,o=s?40*s:t,l=n?40*n:r,c=o&&l?"viewBox='0 0 "+o+" "+l+"'":"";return"%3Csvg xmlns='http://www.w3.org/2000/svg' "+c+"%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3CfeColorMatrix values='1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1' result='s'/%3E%3CfeFlood x='0' y='0' width='100%25' height='100%25'/%3E%3CfeComposite operator='out' in='s'/%3E%3CfeComposite in2='SourceGraphic'/%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3C/filter%3E%3Cimage width='100%25' height='100%25' x='0' y='0' preserveAspectRatio='"+(c?"none":"contain"===a?"xMidYMid":"cover"===a?"xMidYMid slice":"none")+"' style='filter: url(%23b);' href='"+i+"'/%3E%3C/svg%3E"}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getImageBlurSvg",{enumerable:!0,get:function(){return r}})},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3582:()=>{},7132:()=>{},8310:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{VALID_LOADERS:function(){return r},imageConfigDefault:function(){return s}});let r=["default","imgix","cloudinary","akamai","custom"],s={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",loaderFile:"",domains:[],disableStaticImages:!1,minimumCacheTTL:60,formats:["image/webp"],dangerouslyAllowSVG:!1,contentSecurityPolicy:"script-src 'none'; frame-src 'none'; sandbox;",contentDispositionType:"attachment",localPatterns:void 0,remotePatterns:[],qualities:void 0,unoptimized:!1}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},10952:(e,t)=>{"use strict";function r(e){var t;let{config:r,src:s,width:n,quality:i}=e,a=i||(null==(t=r.qualities)?void 0:t.reduce((e,t)=>Math.abs(t-75)<Math.abs(e-75)?t:e))||75;return r.path+"?url="+encodeURIComponent(s)+"&w="+n+"&q="+a+(s.startsWith("/_next/static/media/"),"")}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s}}),r.__next_img_default=!0;let s=r},11671:(e,t,r)=>{"use strict";function s(){return null}r.r(t),r.d(t,{default:()=>s})},11940:(e,t,r)=>{"use strict";let{EMPTY_BUFFER:s}=r(19944),n=Buffer[Symbol.species];function i(e,t,r,s,n){for(let i=0;i<n;i++)r[s+i]=e[i]^t[3&i]}function a(e,t){for(let r=0;r<e.length;r++)e[r]^=t[3&r]}function o(e){let t;return(o.readOnly=!0,Buffer.isBuffer(e))?e:(e instanceof ArrayBuffer?t=new n(e):ArrayBuffer.isView(e)?t=new n(e.buffer,e.byteOffset,e.byteLength):(t=Buffer.from(e),o.readOnly=!1),t)}if(e.exports={concat:function(e,t){if(0===e.length)return s;if(1===e.length)return e[0];let r=Buffer.allocUnsafe(t),i=0;for(let t=0;t<e.length;t++){let s=e[t];r.set(s,i),i+=s.length}return i<t?new n(r.buffer,r.byteOffset,i):r},mask:i,toArrayBuffer:function(e){return e.length===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.length)},toBuffer:o,unmask:a},!process.env.WS_NO_BUFFER_UTIL)try{let t=r(7132);e.exports.mask=function(e,r,s,n,a){a<48?i(e,r,s,n,a):t.mask(e,r,s,n,a)},e.exports.unmask=function(e,r){e.length<32?a(e,r):t.unmask(e,r)}}catch(e){}},13175:(e,t,r)=>{"use strict";let{tokenChars:s}=r(37526);e.exports={parse:function(e){let t=new Set,r=-1,n=-1,i=0;for(;i<e.length;i++){let a=e.charCodeAt(i);if(-1===n&&1===s[a])-1===r&&(r=i);else if(0!==i&&(32===a||9===a))-1===n&&-1!==r&&(n=i);else if(44===a){if(-1===r)throw SyntaxError(`Unexpected character at index ${i}`);-1===n&&(n=i);let s=e.slice(r,n);if(t.has(s))throw SyntaxError(`The "${s}" subprotocol is duplicated`);t.add(s),r=n=-1}else throw SyntaxError(`Unexpected character at index ${i}`)}if(-1===r||-1!==n)throw SyntaxError("Unexpected end of input");let a=e.slice(r,i);if(t.has(a))throw SyntaxError(`The "${a}" subprotocol is duplicated`);return t.add(a),t}}},17494:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getImgProps",{enumerable:!0,get:function(){return o}}),r(90067);let s=r(2901),n=r(8310);function i(e){return void 0!==e.default}function a(e){return void 0===e?e:"number"==typeof e?Number.isFinite(e)?e:NaN:"string"==typeof e&&/^[0-9]+$/.test(e)?parseInt(e,10):NaN}function o(e,t){var r,o;let l,c,d,{src:u,sizes:h,unoptimized:f=!1,priority:p=!1,loading:m,className:g,quality:x,width:y,height:v,fill:b=!1,style:_,overrideSrc:w,onLoad:j,onLoadingComplete:k,placeholder:N="empty",blurDataURL:C,fetchPriority:S,decoding:E="async",layout:T,objectFit:O,objectPosition:R,lazyBoundary:A,lazyRoot:P,...L}=e,{imgConf:M,showAltText:F,blurComplete:D,defaultLoader:I}=t,B=M||n.imageConfigDefault;if("allSizes"in B)l=B;else{let e=[...B.deviceSizes,...B.imageSizes].sort((e,t)=>e-t),t=B.deviceSizes.sort((e,t)=>e-t),s=null==(r=B.qualities)?void 0:r.sort((e,t)=>e-t);l={...B,allSizes:e,deviceSizes:t,qualities:s}}if(void 0===I)throw Object.defineProperty(Error("images.loaderFile detected but the file is missing default export.\nRead more: https://nextjs.org/docs/messages/invalid-images-config"),"__NEXT_ERROR_CODE",{value:"E163",enumerable:!1,configurable:!0});let $=L.loader||I;delete L.loader,delete L.srcSet;let U="__next_img_default"in $;if(U){if("custom"===l.loader)throw Object.defineProperty(Error('Image with src "'+u+'" is missing "loader" prop.\nRead more: https://nextjs.org/docs/messages/next-image-missing-loader'),"__NEXT_ERROR_CODE",{value:"E252",enumerable:!1,configurable:!0})}else{let e=$;$=t=>{let{config:r,...s}=t;return e(s)}}if(T){"fill"===T&&(b=!0);let e={intrinsic:{maxWidth:"100%",height:"auto"},responsive:{width:"100%",height:"auto"}}[T];e&&(_={..._,...e});let t={responsive:"100vw",fill:"100vw"}[T];t&&!h&&(h=t)}let q="",z=a(y),W=a(v);if((o=u)&&"object"==typeof o&&(i(o)||void 0!==o.src)){let e=i(u)?u.default:u;if(!e.src)throw Object.defineProperty(Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received "+JSON.stringify(e)),"__NEXT_ERROR_CODE",{value:"E460",enumerable:!1,configurable:!0});if(!e.height||!e.width)throw Object.defineProperty(Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received "+JSON.stringify(e)),"__NEXT_ERROR_CODE",{value:"E48",enumerable:!1,configurable:!0});if(c=e.blurWidth,d=e.blurHeight,C=C||e.blurDataURL,q=e.src,!b){if(z||W){if(z&&!W){let t=z/e.width;W=Math.round(e.height*t)}else if(!z&&W){let t=W/e.height;z=Math.round(e.width*t)}}else z=e.width,W=e.height}}let H=!p&&("lazy"===m||void 0===m);(!(u="string"==typeof u?u:q)||u.startsWith("data:")||u.startsWith("blob:"))&&(f=!0,H=!1),l.unoptimized&&(f=!0),U&&!l.dangerouslyAllowSVG&&u.split("?",1)[0].endsWith(".svg")&&(f=!0);let V=a(x),G=Object.assign(b?{position:"absolute",height:"100%",width:"100%",left:0,top:0,right:0,bottom:0,objectFit:O,objectPosition:R}:{},F?{}:{color:"transparent"},_),Z=D||"empty"===N?null:"blur"===N?'url("data:image/svg+xml;charset=utf-8,'+(0,s.getImageBlurSvg)({widthInt:z,heightInt:W,blurWidth:c,blurHeight:d,blurDataURL:C||"",objectFit:G.objectFit})+'")':'url("'+N+'")',X=Z?{backgroundSize:G.objectFit||"cover",backgroundPosition:G.objectPosition||"50% 50%",backgroundRepeat:"no-repeat",backgroundImage:Z}:{},J=function(e){let{config:t,src:r,unoptimized:s,width:n,quality:i,sizes:a,loader:o}=e;if(s)return{src:r,srcSet:void 0,sizes:void 0};let{widths:l,kind:c}=function(e,t,r){let{deviceSizes:s,allSizes:n}=e;if(r){let e=/(^|\s)(1?\d?\d)vw/g,t=[];for(let s;s=e.exec(r);s)t.push(parseInt(s[2]));if(t.length){let e=.01*Math.min(...t);return{widths:n.filter(t=>t>=s[0]*e),kind:"w"}}return{widths:n,kind:"w"}}return"number"!=typeof t?{widths:s,kind:"w"}:{widths:[...new Set([t,2*t].map(e=>n.find(t=>t>=e)||n[n.length-1]))],kind:"x"}}(t,n,a),d=l.length-1;return{sizes:a||"w"!==c?a:"100vw",srcSet:l.map((e,s)=>o({config:t,src:r,quality:i,width:e})+" "+("w"===c?e:s+1)+c).join(", "),src:o({config:t,src:r,quality:i,width:l[d]})}}({config:l,src:u,unoptimized:f,width:z,quality:V,sizes:h,loader:$});return{props:{...L,loading:H?"lazy":m,fetchPriority:S,width:z,height:W,decoding:E,className:g,style:{...G,...X},sizes:J.sizes,srcSet:J.srcSet,src:w||J.src},meta:{unoptimized:f,priority:p,placeholder:N,fill:b}}}},17592:(e,t,r)=>{"use strict";e.exports=r(24332).vendored.contexts.ImageConfigContext},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19944:e=>{"use strict";e.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}},20126:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(65519).A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},24596:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>h,tree:()=>c});var s=r(7702),n=r(63409),i=r(88409),a=r.n(i),o=r(4102),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let c={children:["",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,83822)),"/Users/rohan/code/realtalk/app/dashboard/page.tsx"]}]},{loading:[()=>Promise.resolve().then(r.bind(r,11671)),"/Users/rohan/code/realtalk/app/dashboard/loading.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,81622)),"/Users/rohan/code/realtalk/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,2655,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,60002,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,78907,23)),"next/dist/client/components/unauthorized-error"]}]}.children,d=["/Users/rohan/code/realtalk/app/dashboard/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},25085:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return m},defaultHead:function(){return u}});let s=r(67917),n=r(49184),i=r(89812),a=n._(r(49837)),o=s._(r(86340)),l=r(37178),c=r(31890),d=r(93537);function u(e){void 0===e&&(e=!1);let t=[(0,i.jsx)("meta",{charSet:"utf-8"},"charset")];return e||t.push((0,i.jsx)("meta",{name:"viewport",content:"width=device-width"},"viewport")),t}function h(e,t){return"string"==typeof t||"number"==typeof t?e:t.type===a.default.Fragment?e.concat(a.default.Children.toArray(t.props.children).reduce((e,t)=>"string"==typeof t||"number"==typeof t?e:e.concat(t),[])):e.concat(t)}r(90067);let f=["name","httpEquiv","charSet","itemProp"];function p(e,t){let{inAmpMode:r}=t;return e.reduce(h,[]).reverse().concat(u(r).reverse()).filter(function(){let e=new Set,t=new Set,r=new Set,s={};return n=>{let i=!0,a=!1;if(n.key&&"number"!=typeof n.key&&n.key.indexOf("$")>0){a=!0;let t=n.key.slice(n.key.indexOf("$")+1);e.has(t)?i=!1:e.add(t)}switch(n.type){case"title":case"base":t.has(n.type)?i=!1:t.add(n.type);break;case"meta":for(let e=0,t=f.length;e<t;e++){let t=f[e];if(n.props.hasOwnProperty(t)){if("charSet"===t)r.has(t)?i=!1:r.add(t);else{let e=n.props[t],r=s[t]||new Set;("name"!==t||!a)&&r.has(e)?i=!1:(r.add(e),s[t]=r)}}}}return i}}()).reverse().map((e,t)=>{let s=e.key||t;if(process.env.__NEXT_OPTIMIZE_FONTS&&!r&&"link"===e.type&&e.props.href&&["https://fonts.googleapis.com/css","https://use.typekit.net/"].some(t=>e.props.href.startsWith(t))){let t={...e.props||{}};return t["data-href"]=t.href,t.href=void 0,t["data-optimized-fonts"]=!0,a.default.cloneElement(e,t)}return a.default.cloneElement(e,{key:s})})}let m=function(e){let{children:t}=e,r=(0,a.useContext)(l.AmpStateContext),s=(0,a.useContext)(c.HeadManagerContext);return(0,i.jsx)(o.default,{reduceComponentsToState:p,headManager:s,inAmpMode:(0,d.isInAmpMode)(r),children:t})};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},27910:e=>{"use strict";e.exports=require("stream")},28201:(e,t,r)=>{"use strict";r.d(t,{C:()=>a});var s=r(49837),n=r(60467),i=r(25136),a=e=>{let{present:t,children:r}=e,a=function(e){var t,r;let[n,a]=s.useState(),l=s.useRef({}),c=s.useRef(e),d=s.useRef("none"),[u,h]=(t=e?"mounted":"unmounted",r={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},s.useReducer((e,t)=>r[e][t]??e,t));return s.useEffect(()=>{let e=o(l.current);d.current="mounted"===u?e:"none"},[u]),(0,i.N)(()=>{let t=l.current,r=c.current;if(r!==e){let s=d.current,n=o(t);e?h("MOUNT"):"none"===n||t?.display==="none"?h("UNMOUNT"):r&&s!==n?h("ANIMATION_OUT"):h("UNMOUNT"),c.current=e}},[e,h]),(0,i.N)(()=>{if(n){let e;let t=n.ownerDocument.defaultView??window,r=r=>{let s=o(l.current).includes(r.animationName);if(r.target===n&&s&&(h("ANIMATION_END"),!c.current)){let r=n.style.animationFillMode;n.style.animationFillMode="forwards",e=t.setTimeout(()=>{"forwards"===n.style.animationFillMode&&(n.style.animationFillMode=r)})}},s=e=>{e.target===n&&(d.current=o(l.current))};return n.addEventListener("animationstart",s),n.addEventListener("animationcancel",r),n.addEventListener("animationend",r),()=>{t.clearTimeout(e),n.removeEventListener("animationstart",s),n.removeEventListener("animationcancel",r),n.removeEventListener("animationend",r)}}h("ANIMATION_END")},[n,h]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:s.useCallback(e=>{e&&(l.current=getComputedStyle(e)),a(e)},[])}}(t),l="function"==typeof r?r({present:a.isPresent}):s.Children.only(r),c=(0,n.s)(a.ref,function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(r=(t=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in t&&t.isReactWarning)?e.props.ref:e.props.ref||e.ref}(l));return"function"==typeof r||a.isPresent?s.cloneElement(l,{ref:c}):null};function o(e){return e?.animationName||"none"}a.displayName="Presence"},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30496:()=>{},31457:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(65519).A)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},31890:(e,t,r)=>{"use strict";e.exports=r(24332).vendored.contexts.HeadManagerContext},33680:(e,t,r)=>{"use strict";let{tokenChars:s}=r(37526);function n(e,t,r){void 0===e[t]?e[t]=[r]:e[t].push(r)}e.exports={format:function(e){return Object.keys(e).map(t=>{let r=e[t];return Array.isArray(r)||(r=[r]),r.map(e=>[t].concat(Object.keys(e).map(t=>{let r=e[t];return Array.isArray(r)||(r=[r]),r.map(e=>!0===e?t:`${t}=${e}`).join("; ")})).join("; ")).join(", ")}).join(", ")},parse:function(e){let t,r;let i=Object.create(null),a=Object.create(null),o=!1,l=!1,c=!1,d=-1,u=-1,h=-1,f=0;for(;f<e.length;f++)if(u=e.charCodeAt(f),void 0===t){if(-1===h&&1===s[u])-1===d&&(d=f);else if(0!==f&&(32===u||9===u))-1===h&&-1!==d&&(h=f);else if(59===u||44===u){if(-1===d)throw SyntaxError(`Unexpected character at index ${f}`);-1===h&&(h=f);let r=e.slice(d,h);44===u?(n(i,r,a),a=Object.create(null)):t=r,d=h=-1}else throw SyntaxError(`Unexpected character at index ${f}`)}else if(void 0===r){if(-1===h&&1===s[u])-1===d&&(d=f);else if(32===u||9===u)-1===h&&-1!==d&&(h=f);else if(59===u||44===u){if(-1===d)throw SyntaxError(`Unexpected character at index ${f}`);-1===h&&(h=f),n(a,e.slice(d,h),!0),44===u&&(n(i,t,a),a=Object.create(null),t=void 0),d=h=-1}else if(61===u&&-1!==d&&-1===h)r=e.slice(d,f),d=h=-1;else throw SyntaxError(`Unexpected character at index ${f}`)}else if(l){if(1!==s[u])throw SyntaxError(`Unexpected character at index ${f}`);-1===d?d=f:o||(o=!0),l=!1}else if(c){if(1===s[u])-1===d&&(d=f);else if(34===u&&-1!==d)c=!1,h=f;else if(92===u)l=!0;else throw SyntaxError(`Unexpected character at index ${f}`)}else if(34===u&&61===e.charCodeAt(f-1))c=!0;else if(-1===h&&1===s[u])-1===d&&(d=f);else if(-1!==d&&(32===u||9===u))-1===h&&(h=f);else if(59===u||44===u){if(-1===d)throw SyntaxError(`Unexpected character at index ${f}`);-1===h&&(h=f);let s=e.slice(d,h);o&&(s=s.replace(/\\/g,""),o=!1),n(a,r,s),44===u&&(n(i,t,a),a=Object.create(null),t=void 0),r=void 0,d=h=-1}else throw SyntaxError(`Unexpected character at index ${f}`);if(-1===d||c||32===u||9===u)throw SyntaxError("Unexpected end of input");-1===h&&(h=f);let p=e.slice(d,h);return void 0===t?n(i,p,a):(void 0===r?n(a,p,!0):o?n(a,r,p.replace(/\\/g,"")):n(a,r,p),n(i,t,a)),i}}},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},35941:(e,t,r)=>{"undefined"==typeof process||"renderer"===process.type||process.__nwjs?e.exports=r(56098):e.exports=r(63133)},37178:(e,t,r)=>{"use strict";e.exports=r(24332).vendored.contexts.AmpContext},37526:(e,t,r)=>{"use strict";let{isUtf8:s}=r(79428);function n(e){let t=e.length,r=0;for(;r<t;)if((128&e[r])==0)r++;else if((224&e[r])==192){if(r+1===t||(192&e[r+1])!=128||(254&e[r])==192)return!1;r+=2}else if((240&e[r])==224){if(r+2>=t||(192&e[r+1])!=128||(192&e[r+2])!=128||224===e[r]&&(224&e[r+1])==128||237===e[r]&&(224&e[r+1])==160)return!1;r+=3}else{if((248&e[r])!=240||r+3>=t||(192&e[r+1])!=128||(192&e[r+2])!=128||(192&e[r+3])!=128||240===e[r]&&(240&e[r+1])==128||244===e[r]&&e[r+1]>143||e[r]>244)return!1;r+=4}return!0}if(e.exports={isValidStatusCode:function(e){return e>=1e3&&e<=1014&&1004!==e&&1005!==e&&1006!==e||e>=3e3&&e<=4999},isValidUTF8:n,tokenChars:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0]},s)e.exports.isValidUTF8=function(e){return e.length<24?n(e):s(e)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{let t=r(82997);e.exports.isValidUTF8=function(e){return e.length<32?n(e):t(e)}}catch(e){}},40931:(e,t,r)=>{var s=r(29021),n=r(79551),i=r(79646).spawn;function a(e){"use strict";e=e||{};var t,a,o=this,l=r(81630),c=r(55591),d={},u=!1,h={"User-Agent":"node-XMLHttpRequest",Accept:"*/*"},f=Object.assign({},h),p=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","content-transfer-encoding","cookie","cookie2","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"],m=["TRACE","TRACK","CONNECT"],g=!1,x=!1,y=!1,v={};this.UNSENT=0,this.OPENED=1,this.HEADERS_RECEIVED=2,this.LOADING=3,this.DONE=4,this.readyState=this.UNSENT,this.onreadystatechange=null,this.responseText="",this.responseXML="",this.response=Buffer.alloc(0),this.status=null,this.statusText=null,this.open=function(e,t,r,s,n){if(this.abort(),x=!1,y=!1,!(e&&-1===m.indexOf(e)))throw Error("SecurityError: Request method not allowed");d={method:e,url:t.toString(),async:"boolean"!=typeof r||r,user:s||null,password:n||null},b(this.OPENED)},this.setDisableHeaderCheck=function(e){u=e},this.setRequestHeader=function(e,t){if(this.readyState!=this.OPENED)throw Error("INVALID_STATE_ERR: setRequestHeader can only be called when state is OPEN");if(!u&&(!e||-1!==p.indexOf(e.toLowerCase())))return console.warn('Refused to set unsafe header "'+e+'"'),!1;if(g)throw Error("INVALID_STATE_ERR: send flag is true");return f[e]=t,!0},this.getResponseHeader=function(e){return"string"==typeof e&&this.readyState>this.OPENED&&a.headers[e.toLowerCase()]&&!x?a.headers[e.toLowerCase()]:null},this.getAllResponseHeaders=function(){if(this.readyState<this.HEADERS_RECEIVED||x)return"";var e="";for(var t in a.headers)"set-cookie"!==t&&"set-cookie2"!==t&&(e+=t+": "+a.headers[t]+"\r\n");return e.substr(0,e.length-2)},this.getRequestHeader=function(e){return"string"==typeof e&&f[e]?f[e]:""},this.send=function(r){if(this.readyState!=this.OPENED)throw Error("INVALID_STATE_ERR: connection must be opened before send() is called");if(g)throw Error("INVALID_STATE_ERR: send has already been called");var u,h=!1,p=!1,m=n.parse(d.url);switch(m.protocol){case"https:":h=!0;case"http:":u=m.hostname;break;case"file:":p=!0;break;case void 0:case"":u="localhost";break;default:throw Error("Protocol not supported.")}if(p){if("GET"!==d.method)throw Error("XMLHttpRequest: Only GET method is supported");if(d.async)s.readFile(unescape(m.pathname),function(e,t){e?o.handleError(e,e.errno||-1):(o.status=200,o.responseText=t.toString("utf8"),o.response=t,b(o.DONE))});else try{this.response=s.readFileSync(unescape(m.pathname)),this.responseText=this.response.toString("utf8"),this.status=200,b(o.DONE)}catch(e){this.handleError(e,e.errno||-1)}return}var y=m.port||(h?443:80),v=m.pathname+(m.search?m.search:"");if(f.Host=u,h&&443===y||80===y||(f.Host+=":"+m.port),d.user){void 0===d.password&&(d.password="");var _=new Buffer(d.user+":"+d.password);f.Authorization="Basic "+_.toString("base64")}"GET"===d.method||"HEAD"===d.method?r=null:r?(f["Content-Length"]=Buffer.isBuffer(r)?r.length:Buffer.byteLength(r),Object.keys(f).some(function(e){return"content-type"===e.toLowerCase()})||(f["Content-Type"]="text/plain;charset=UTF-8")):"POST"===d.method&&(f["Content-Length"]=0);var w=e.agent||!1,j={host:u,port:y,path:v,method:d.method,headers:f,agent:w};if(h&&(j.pfx=e.pfx,j.key=e.key,j.passphrase=e.passphrase,j.cert=e.cert,j.ca=e.ca,j.ciphers=e.ciphers,j.rejectUnauthorized=!1!==e.rejectUnauthorized),x=!1,d.async){var k=h?c.request:l.request;g=!0,o.dispatchEvent("readystatechange");var N=function(r){if(302===(a=r).statusCode||303===a.statusCode||307===a.statusCode){d.url=a.headers.location;var s=n.parse(d.url);u=s.hostname;var i={hostname:s.hostname,port:s.port,path:s.path,method:303===a.statusCode?"GET":d.method,headers:f};h&&(i.pfx=e.pfx,i.key=e.key,i.passphrase=e.passphrase,i.cert=e.cert,i.ca=e.ca,i.ciphers=e.ciphers,i.rejectUnauthorized=!1!==e.rejectUnauthorized),(t=k(i,N).on("error",C)).end();return}b(o.HEADERS_RECEIVED),o.status=a.statusCode,a.on("data",function(e){if(e){var t=Buffer.from(e);o.response=Buffer.concat([o.response,t])}g&&b(o.LOADING)}),a.on("end",function(){g&&(g=!1,b(o.DONE),o.responseText=o.response.toString("utf8"))}),a.on("error",function(e){o.handleError(e)})},C=function(e){if(t.reusedSocket&&"ECONNRESET"===e.code)return k(j,N).on("error",C);o.handleError(e)};t=k(j,N).on("error",C),e.autoUnref&&t.on("socket",e=>{e.unref()}),r&&t.write(r),t.end(),o.dispatchEvent("loadstart")}else{var S=".node-xmlhttprequest-content-"+process.pid,E=".node-xmlhttprequest-sync-"+process.pid;s.writeFileSync(E,"","utf8");for(var T="var http = require('http'), https = require('https'), fs = require('fs');var doRequest = http"+(h?"s":"")+".request;var options = "+JSON.stringify(j)+";var responseText = '';var responseData = Buffer.alloc(0);var req = doRequest(options, function(response) {response.on('data', function(chunk) {  var data = Buffer.from(chunk);  responseText += data.toString('utf8');  responseData = Buffer.concat([responseData, data]);});response.on('end', function() {fs.writeFileSync('"+S+"', JSON.stringify({err: null, data: {statusCode: response.statusCode, headers: response.headers, text: responseText, data: responseData.toString('base64')}}), 'utf8');fs.unlinkSync('"+E+"');});response.on('error', function(error) {fs.writeFileSync('"+S+"', 'NODE-XMLHTTPREQUEST-ERROR:' + JSON.stringify(error), 'utf8');fs.unlinkSync('"+E+"');});}).on('error', function(error) {fs.writeFileSync('"+S+"', 'NODE-XMLHTTPREQUEST-ERROR:' + JSON.stringify(error), 'utf8');fs.unlinkSync('"+E+"');});"+(r?"req.write('"+JSON.stringify(r).slice(1,-1).replace(/'/g,"\\'")+"');":"")+"req.end();",O=i(process.argv[0],["-e",T]);s.existsSync(E););if(o.responseText=s.readFileSync(S,"utf8"),O.stdin.end(),s.unlinkSync(S),o.responseText.match(/^NODE-XMLHTTPREQUEST-ERROR:/)){var R=JSON.parse(o.responseText.replace(/^NODE-XMLHTTPREQUEST-ERROR:/,""));o.handleError(R,503)}else{o.status=o.responseText.replace(/^NODE-XMLHTTPREQUEST-STATUS:([0-9]*),.*/,"$1");var A=JSON.parse(o.responseText.replace(/^NODE-XMLHTTPREQUEST-STATUS:[0-9]*,(.*)/,"$1"));a={statusCode:o.status,headers:A.data.headers},o.responseText=A.data.text,o.response=Buffer.from(A.data.data,"base64"),b(o.DONE,!0)}}},this.handleError=function(e,t){this.status=t||0,this.statusText=e,this.responseText=e.stack,x=!0,b(this.DONE)},this.abort=function(){t&&(t.abort(),t=null),f=Object.assign({},h),this.responseText="",this.responseXML="",this.response=Buffer.alloc(0),x=y=!0,this.readyState!==this.UNSENT&&(this.readyState!==this.OPENED||g)&&this.readyState!==this.DONE&&(g=!1,b(this.DONE)),this.readyState=this.UNSENT},this.addEventListener=function(e,t){e in v||(v[e]=[]),v[e].push(t)},this.removeEventListener=function(e,t){e in v&&(v[e]=v[e].filter(function(e){return e!==t}))},this.dispatchEvent=function(e){if("function"==typeof o["on"+e]&&(this.readyState===this.DONE&&d.async?setTimeout(function(){o["on"+e]()},0):o["on"+e]()),e in v)for(let t=0,r=v[e].length;t<r;t++)this.readyState===this.DONE?setTimeout(function(){v[e][t].call(o)},0):v[e][t].call(o)};var b=function(e){if(o.readyState!==e&&(o.readyState!==o.UNSENT||!y)&&(o.readyState=e,(d.async||o.readyState<o.OPENED||o.readyState===o.DONE)&&o.dispatchEvent("readystatechange"),o.readyState===o.DONE)){let e;e=y?"abort":x?"error":"load",o.dispatchEvent(e),o.dispatchEvent("loadend")}}}e.exports=a,a.XMLHttpRequest=a},40964:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(65519).A)("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]])},41205:e=>{"use strict";let t=Symbol("kDone"),r=Symbol("kRun");class s{constructor(e){this[t]=()=>{this.pending--,this[r]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[r]()}[r](){if(this.pending!==this.concurrency&&this.jobs.length){let e=this.jobs.shift();this.pending++,e(this[t])}}}e.exports=s},43648:()=>{},46022:e=>{function t(e,t,r,s){return Math.round(e/r)+" "+s+(t>=1.5*r?"s":"")}e.exports=function(e,r){r=r||{};var s,n,i,a,o=typeof e;if("string"===o&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*r;case"weeks":case"week":case"w":return 6048e5*r;case"days":case"day":case"d":return 864e5*r;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*r;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*r;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}(e);if("number"===o&&isFinite(e)){return r.long?(n=Math.abs(s=e))>=864e5?t(s,n,864e5,"day"):n>=36e5?t(s,n,36e5,"hour"):n>=6e4?t(s,n,6e4,"minute"):n>=1e3?t(s,n,1e3,"second"):s+" ms":(a=Math.abs(i=e))>=864e5?Math.round(i/864e5)+"d":a>=36e5?Math.round(i/36e5)+"h":a>=6e4?Math.round(i/6e4)+"m":a>=1e3?Math.round(i/1e3)+"s":i+"ms"}throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},47331:(e,t,r)=>{"use strict";e.exports=r(24332).vendored.contexts.RouterContext},49125:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(65519).A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},51958:(e,t,r)=>{"use strict";r.d(t,{X:()=>i});var s=r(49837),n=r(25136);function i(e){let[t,r]=s.useState(void 0);return(0,n.N)(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let s,n;if(!Array.isArray(t)||!t.length)return;let i=t[0];if("borderBoxSize"in i){let e=i.borderBoxSize,t=Array.isArray(e)?e[0]:e;s=t.inlineSize,n=t.blockSize}else s=e.offsetWidth,n=e.offsetHeight;r({width:s,height:n})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}r(void 0)},[e]),t}},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},56098:(e,t,r)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;let r="color: "+this.color;t.splice(1,0,r,"color: inherit");let s=0,n=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(s++,"%c"===e&&(n=s))}),t.splice(n,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){let e;return"undefined"!=typeof window&&!!window.process&&("renderer"===window.process.type||!!window.process.__nwjs)||!("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(56444)(t);let{formatters:s}=e.exports;s.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},56444:(e,t,r)=>{e.exports=function(e){function t(e){let r,n,i;let a=null;function o(...e){if(!o.enabled)return;let s=Number(new Date);o.diff=s-(r||s),o.prev=r,o.curr=s,r=s,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let n=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(r,s)=>{if("%%"===r)return"%";n++;let i=t.formatters[s];if("function"==typeof i){let t=e[n];r=i.call(o,t),e.splice(n,1),n--}return r}),t.formatArgs.call(o,e),(o.log||t.log).apply(o,e)}return o.namespace=e,o.useColors=t.useColors(),o.color=t.selectColor(e),o.extend=s,o.destroy=t.destroy,Object.defineProperty(o,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==a?a:(n!==t.namespaces&&(n=t.namespaces,i=t.enabled(e)),i),set:e=>{a=e}}),"function"==typeof t.init&&t.init(o),o}function s(e,r){let s=t(this.namespace+(void 0===r?":":r)+e);return s.log=this.log,s}function n(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){let e=[...t.names.map(n),...t.skips.map(n).map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){let r;t.save(e),t.namespaces=e,t.names=[],t.skips=[];let s=("string"==typeof e?e:"").split(/[\s,]+/),n=s.length;for(r=0;r<n;r++)s[r]&&("-"===(e=s[r].replace(/\*/g,".*?"))[0]?t.skips.push(RegExp("^"+e.slice(1)+"$")):t.names.push(RegExp("^"+e+"$")))},t.enabled=function(e){let r,s;if("*"===e[e.length-1])return!0;for(r=0,s=t.skips.length;r<s;r++)if(t.skips[r].test(e))return!1;for(r=0,s=t.names.length;r<s;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(46022),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach(r=>{t[r]=e[r]}),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t)|0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},56804:(e,t,r)=>{Promise.resolve().then(r.bind(r,95533))},58948:(e,t,r)=>{"use strict";let{Writable:s}=r(27910),n=r(69397),{BINARY_TYPES:i,EMPTY_BUFFER:a,kStatusCode:o,kWebSocket:l}=r(19944),{concat:c,toArrayBuffer:d,unmask:u}=r(11940),{isValidStatusCode:h,isValidUTF8:f}=r(37526),p=Buffer[Symbol.species];class m extends s{constructor(e={}){super(),this._allowSynchronousEvents=void 0===e.allowSynchronousEvents||e.allowSynchronousEvents,this._binaryType=e.binaryType||i[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=0|e.maxPayload,this._skipUTF8Validation=!!e.skipUTF8Validation,this[l]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=0}_write(e,t,r){if(8===this._opcode&&0==this._state)return r();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(r)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){let t=this._buffers[0];return this._buffers[0]=new p(t.buffer,t.byteOffset+e,t.length-e),new p(t.buffer,t.byteOffset,e)}let t=Buffer.allocUnsafe(e);do{let r=this._buffers[0],s=t.length-e;e>=r.length?t.set(this._buffers.shift(),s):(t.set(new Uint8Array(r.buffer,r.byteOffset,e),s),this._buffers[0]=new p(r.buffer,r.byteOffset+e,r.length-e)),e-=r.length}while(e>0);return t}startLoop(e){this._loop=!0;do switch(this._state){case 0:this.getInfo(e);break;case 1:this.getPayloadLength16(e);break;case 2:this.getPayloadLength64(e);break;case 3:this.getMask();break;case 4:this.getData(e);break;case 5:case 6:this._loop=!1;return}while(this._loop);this._errored||e()}getInfo(e){if(this._bufferedBytes<2){this._loop=!1;return}let t=this.consume(2);if((48&t[0])!=0){e(this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3"));return}let r=(64&t[0])==64;if(r&&!this._extensions[n.extensionName]){e(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));return}if(this._fin=(128&t[0])==128,this._opcode=15&t[0],this._payloadLength=127&t[1],0===this._opcode){if(r){e(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));return}if(!this._fragmented){e(this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE"));return}this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented){e(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"));return}this._compressed=r}else if(this._opcode>7&&this._opcode<11){if(!this._fin){e(this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN"));return}if(r){e(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));return}if(this._payloadLength>125||8===this._opcode&&1===this._payloadLength){e(this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH"));return}}else{e(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"));return}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=(128&t[1])==128,this._isServer){if(!this._masked){e(this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK"));return}}else if(this._masked){e(this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK"));return}126===this._payloadLength?this._state=1:127===this._payloadLength?this._state=2:this.haveLength(e)}getPayloadLength16(e){if(this._bufferedBytes<2){this._loop=!1;return}this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(e)}getPayloadLength64(e){if(this._bufferedBytes<8){this._loop=!1;return}let t=this.consume(8),r=t.readUInt32BE(0);if(r>2097151){e(this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH"));return}this._payloadLength=0x100000000*r+t.readUInt32BE(4),this.haveLength(e)}haveLength(e){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0)){e(this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));return}this._masked?this._state=3:this._state=4}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=4}getData(e){let t=a;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}t=this.consume(this._payloadLength),this._masked&&(this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3])!=0&&u(t,this._mask)}if(this._opcode>7){this.controlMessage(t,e);return}if(this._compressed){this._state=5,this.decompress(t,e);return}t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage(e)}decompress(e,t){this._extensions[n.extensionName].decompress(e,this._fin,(e,r)=>{if(e)return t(e);if(r.length){if(this._messageLength+=r.length,this._messageLength>this._maxPayload&&this._maxPayload>0){t(this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));return}this._fragments.push(r)}this.dataMessage(t),0===this._state&&this.startLoop(t)})}dataMessage(e){if(!this._fin){this._state=0;return}let t=this._messageLength,r=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let s;s="nodebuffer"===this._binaryType?c(r,t):"arraybuffer"===this._binaryType?d(c(r,t)):r,this._allowSynchronousEvents?(this.emit("message",s,!0),this._state=0):(this._state=6,setImmediate(()=>{this.emit("message",s,!0),this._state=0,this.startLoop(e)}))}else{let s=c(r,t);if(!this._skipUTF8Validation&&!f(s)){e(this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8"));return}5===this._state||this._allowSynchronousEvents?(this.emit("message",s,!1),this._state=0):(this._state=6,setImmediate(()=>{this.emit("message",s,!1),this._state=0,this.startLoop(e)}))}}controlMessage(e,t){if(8===this._opcode){if(0===e.length)this._loop=!1,this.emit("conclude",1005,a),this.end();else{let r=e.readUInt16BE(0);if(!h(r)){t(this.createError(RangeError,`invalid status code ${r}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE"));return}let s=new p(e.buffer,e.byteOffset+2,e.length-2);if(!this._skipUTF8Validation&&!f(s)){t(this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8"));return}this._loop=!1,this.emit("conclude",r,s),this.end()}this._state=0;return}this._allowSynchronousEvents?(this.emit(9===this._opcode?"ping":"pong",e),this._state=0):(this._state=6,setImmediate(()=>{this.emit(9===this._opcode?"ping":"pong",e),this._state=0,this.startLoop(t)}))}createError(e,t,r,s,n){this._loop=!1,this._errored=!0;let i=new e(r?`Invalid WebSocket frame: ${t}`:t);return Error.captureStackTrace(i,this.createError),i.code=n,i[o]=s,i}}e.exports=m},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63133:(e,t,r)=>{let s=r(83997),n=r(28354);t.init=function(e){e.inspectOpts={};let r=Object.keys(t.inspectOpts);for(let s=0;s<r.length;s++)e.inspectOpts[r[s]]=t.inspectOpts[r[s]]},t.log=function(...e){return process.stderr.write(n.formatWithOptions(t.inspectOpts,...e)+"\n")},t.formatArgs=function(r){let{namespace:s,useColors:n}=this;if(n){let t=this.color,n="\x1b[3"+(t<8?t:"8;5;"+t),i=`  ${n};1m${s} \u001B[0m`;r[0]=i+r[0].split("\n").join("\n"+i),r.push(n+"m+"+e.exports.humanize(this.diff)+"\x1b[0m")}else r[0]=(t.inspectOpts.hideDate?"":new Date().toISOString()+" ")+s+" "+r[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?!!t.inspectOpts.colors:s.isatty(process.stderr.fd)},t.destroy=n.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{let e=r(3582);e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{let r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(e,t)=>t.toUpperCase()),s=process.env[t];return s=!!/^(yes|on|true|enabled)$/i.test(s)||!/^(no|off|false|disabled)$/i.test(s)&&("null"===s?null:Number(s)),e[r]=s,e},{}),e.exports=r(56444)(t);let{formatters:i}=e.exports;i.o=function(e){return this.inspectOpts.colors=this.useColors,n.inspect(e,this.inspectOpts).split("\n").map(e=>e.trim()).join(" ")},i.O=function(e){return this.inspectOpts.colors=this.useColors,n.inspect(e,this.inspectOpts)}},69397:(e,t,r)=>{"use strict";let s;let n=r(74075),i=r(11940),a=r(41205),{kStatusCode:o}=r(19944),l=Buffer[Symbol.species],c=Buffer.from([0,0,255,255]),d=Symbol("permessage-deflate"),u=Symbol("total-length"),h=Symbol("callback"),f=Symbol("buffers"),p=Symbol("error");class m{constructor(e,t,r){this._maxPayload=0|r,this._options=e||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,s||(s=new a(void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10))}static get extensionName(){return"permessage-deflate"}offer(){let e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let e=this._deflate[h];this._deflate.close(),this._deflate=null,e&&e(Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){let t=this._options,r=e.find(e=>(!1!==t.serverNoContextTakeover||!e.server_no_context_takeover)&&(!e.server_max_window_bits||!1!==t.serverMaxWindowBits&&("number"!=typeof t.serverMaxWindowBits||!(t.serverMaxWindowBits>e.server_max_window_bits)))&&("number"!=typeof t.clientMaxWindowBits||!!e.client_max_window_bits));if(!r)throw Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(r.server_no_context_takeover=!0),t.clientNoContextTakeover&&(r.client_no_context_takeover=!0),"number"==typeof t.serverMaxWindowBits&&(r.server_max_window_bits=t.serverMaxWindowBits),"number"==typeof t.clientMaxWindowBits?r.client_max_window_bits=t.clientMaxWindowBits:(!0===r.client_max_window_bits||!1===t.clientMaxWindowBits)&&delete r.client_max_window_bits,r}acceptAsClient(e){let t=e[0];if(!1===this._options.clientNoContextTakeover&&t.client_no_context_takeover)throw Error('Unexpected parameter "client_no_context_takeover"');if(t.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(t.client_max_window_bits=this._options.clientMaxWindowBits);return t}normalizeParams(e){return e.forEach(e=>{Object.keys(e).forEach(t=>{let r=e[t];if(r.length>1)throw Error(`Parameter "${t}" must have only a single value`);if(r=r[0],"client_max_window_bits"===t){if(!0!==r){let e=+r;if(!Number.isInteger(e)||e<8||e>15)throw TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else if(!this._isServer)throw TypeError(`Invalid value for parameter "${t}": ${r}`)}else if("server_max_window_bits"===t){let e=+r;if(!Number.isInteger(e)||e<8||e>15)throw TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else if("client_no_context_takeover"===t||"server_no_context_takeover"===t){if(!0!==r)throw TypeError(`Invalid value for parameter "${t}": ${r}`)}else throw Error(`Unknown parameter "${t}"`);e[t]=r})}),e}decompress(e,t,r){s.add(s=>{this._decompress(e,t,(e,t)=>{s(),r(e,t)})})}compress(e,t,r){s.add(s=>{this._compress(e,t,(e,t)=>{s(),r(e,t)})})}_decompress(e,t,r){let s=this._isServer?"client":"server";if(!this._inflate){let e=`${s}_max_window_bits`,t="number"!=typeof this.params[e]?n.Z_DEFAULT_WINDOWBITS:this.params[e];this._inflate=n.createInflateRaw({...this._options.zlibInflateOptions,windowBits:t}),this._inflate[d]=this,this._inflate[u]=0,this._inflate[f]=[],this._inflate.on("error",y),this._inflate.on("data",x)}this._inflate[h]=r,this._inflate.write(e),t&&this._inflate.write(c),this._inflate.flush(()=>{let e=this._inflate[p];if(e){this._inflate.close(),this._inflate=null,r(e);return}let n=i.concat(this._inflate[f],this._inflate[u]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[u]=0,this._inflate[f]=[],t&&this.params[`${s}_no_context_takeover`]&&this._inflate.reset()),r(null,n)})}_compress(e,t,r){let s=this._isServer?"server":"client";if(!this._deflate){let e=`${s}_max_window_bits`,t="number"!=typeof this.params[e]?n.Z_DEFAULT_WINDOWBITS:this.params[e];this._deflate=n.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:t}),this._deflate[u]=0,this._deflate[f]=[],this._deflate.on("data",g)}this._deflate[h]=r,this._deflate.write(e),this._deflate.flush(n.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let e=i.concat(this._deflate[f],this._deflate[u]);t&&(e=new l(e.buffer,e.byteOffset,e.length-4)),this._deflate[h]=null,this._deflate[u]=0,this._deflate[f]=[],t&&this.params[`${s}_no_context_takeover`]&&this._deflate.reset(),r(null,e)})}}function g(e){this[f].push(e),this[u]+=e.length}function x(e){if(this[u]+=e.length,this[d]._maxPayload<1||this[u]<=this[d]._maxPayload){this[f].push(e);return}this[p]=RangeError("Max payload size exceeded"),this[p].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[p][o]=1009,this.removeListener("data",x),this.reset()}function y(e){this[d]._inflate=null,e[o]=1007,this[h](e)}e.exports=m},74075:e=>{"use strict";e.exports=require("zlib")},74883:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return n}});let s=r(49837);function n(e,t){let r=(0,s.useRef)(null),n=(0,s.useRef)(null);return(0,s.useCallback)(s=>{if(null===s){let e=r.current;e&&(r.current=null,e());let t=n.current;t&&(n.current=null,t())}else e&&(r.current=i(e,s)),t&&(n.current=i(t,s))},[e,t])}function i(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},75364:(e,t,r)=>{Promise.resolve().then(r.bind(r,83822))},76338:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(65519).A)("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]])},78109:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(65519).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},79646:e=>{"use strict";e.exports=require("child_process")},81630:e=>{"use strict";e.exports=require("http")},82997:()=>{},83822:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(430).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/rohan/code/realtalk/app/dashboard/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/rohan/code/realtalk/app/dashboard/page.tsx","default")},83997:e=>{"use strict";e.exports=require("tty")},86340:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a}});let s=r(49837),n=()=>{},i=()=>{};function a(e){var t;let{headManager:r,reduceComponentsToState:a}=e;function o(){if(r&&r.mountedInstances){let t=s.Children.toArray(Array.from(r.mountedInstances).filter(Boolean));r.updateHead(a(t,e))}}return null==r||null==(t=r.mountedInstances)||t.add(e.children),o(),n(()=>{var t;return null==r||null==(t=r.mountedInstances)||t.add(e.children),()=>{var t;null==r||null==(t=r.mountedInstances)||t.delete(e.children)}}),n(()=>(r&&(r._pendingUpdate=o),()=>{r&&(r._pendingUpdate=o)})),i(()=>(r&&r._pendingUpdate&&(r._pendingUpdate(),r._pendingUpdate=null),()=>{r&&r._pendingUpdate&&(r._pendingUpdate(),r._pendingUpdate=null)})),null}},88474:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Image",{enumerable:!0,get:function(){return b}});let s=r(67917),n=r(49184),i=r(89812),a=n._(r(49837)),o=s._(r(69056)),l=s._(r(25085)),c=r(17494),d=r(8310),u=r(17592);r(90067);let h=r(47331),f=s._(r(10952)),p=r(74883),m={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0};function g(e,t,r,s,n,i,a){let o=null==e?void 0:e.src;e&&e["data-loaded-src"]!==o&&(e["data-loaded-src"]=o,("decode"in e?e.decode():Promise.resolve()).catch(()=>{}).then(()=>{if(e.parentElement&&e.isConnected){if("empty"!==t&&n(!0),null==r?void 0:r.current){let t=new Event("load");Object.defineProperty(t,"target",{writable:!1,value:e});let s=!1,n=!1;r.current({...t,nativeEvent:t,currentTarget:e,target:e,isDefaultPrevented:()=>s,isPropagationStopped:()=>n,persist:()=>{},preventDefault:()=>{s=!0,t.preventDefault()},stopPropagation:()=>{n=!0,t.stopPropagation()}})}(null==s?void 0:s.current)&&s.current(e)}}))}function x(e){return a.use?{fetchPriority:e}:{fetchpriority:e}}globalThis.__NEXT_IMAGE_IMPORTED=!0;let y=(0,a.forwardRef)((e,t)=>{let{src:r,srcSet:s,sizes:n,height:o,width:l,decoding:c,className:d,style:u,fetchPriority:h,placeholder:f,loading:m,unoptimized:y,fill:v,onLoadRef:b,onLoadingCompleteRef:_,setBlurComplete:w,setShowAltText:j,sizesInput:k,onLoad:N,onError:C,...S}=e,E=(0,a.useCallback)(e=>{e&&(C&&(e.src=e.src),e.complete&&g(e,f,b,_,w,y,k))},[r,f,b,_,w,C,y,k]),T=(0,p.useMergedRef)(t,E);return(0,i.jsx)("img",{...S,...x(h),loading:m,width:l,height:o,decoding:c,"data-nimg":v?"fill":"1",className:d,style:u,sizes:n,srcSet:s,src:r,ref:T,onLoad:e=>{g(e.currentTarget,f,b,_,w,y,k)},onError:e=>{j(!0),"empty"!==f&&w(!0),C&&C(e)}})});function v(e){let{isAppRouter:t,imgAttributes:r}=e,s={as:"image",imageSrcSet:r.srcSet,imageSizes:r.sizes,crossOrigin:r.crossOrigin,referrerPolicy:r.referrerPolicy,...x(r.fetchPriority)};return t&&o.default.preload?(o.default.preload(r.src,s),null):(0,i.jsx)(l.default,{children:(0,i.jsx)("link",{rel:"preload",href:r.srcSet?void 0:r.src,...s},"__nimg-"+r.src+r.srcSet+r.sizes)})}let b=(0,a.forwardRef)((e,t)=>{let r=(0,a.useContext)(h.RouterContext),s=(0,a.useContext)(u.ImageConfigContext),n=(0,a.useMemo)(()=>{var e;let t=m||s||d.imageConfigDefault,r=[...t.deviceSizes,...t.imageSizes].sort((e,t)=>e-t),n=t.deviceSizes.sort((e,t)=>e-t),i=null==(e=t.qualities)?void 0:e.sort((e,t)=>e-t);return{...t,allSizes:r,deviceSizes:n,qualities:i}},[s]),{onLoad:o,onLoadingComplete:l}=e,p=(0,a.useRef)(o);(0,a.useEffect)(()=>{p.current=o},[o]);let g=(0,a.useRef)(l);(0,a.useEffect)(()=>{g.current=l},[l]);let[x,b]=(0,a.useState)(!1),[_,w]=(0,a.useState)(!1),{props:j,meta:k}=(0,c.getImgProps)(e,{defaultLoader:f.default,imgConf:n,blurComplete:x,showAltText:_});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(y,{...j,unoptimized:k.unoptimized,placeholder:k.placeholder,fill:k.fill,onLoadRef:p,onLoadingCompleteRef:g,setBlurComplete:b,setShowAltText:w,sizesInput:e.sizes,ref:t}),k.priority?(0,i.jsx)(v,{isAppRouter:!r,imgAttributes:j}):null]})});("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},91645:e=>{"use strict";e.exports=require("net")},91930:(e,t,r)=>{"use strict";let s=r(94735),n=r(55591),i=r(81630),a=r(91645),o=r(34631),{randomBytes:l,createHash:c}=r(55511),{Duplex:d,Readable:u}=r(27910),{URL:h}=r(79551),f=r(69397),p=r(58948),m=r(97260),{BINARY_TYPES:g,EMPTY_BUFFER:x,GUID:y,kForOnEventAttribute:v,kListener:b,kStatusCode:_,kWebSocket:w,NOOP:j}=r(19944),{EventTarget:{addEventListener:k,removeEventListener:N}}=r(97127),{format:C,parse:S}=r(33680),{toBuffer:E}=r(11940),T=Symbol("kAborted"),O=[8,13],R=["CONNECTING","OPEN","CLOSING","CLOSED"],A=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/;class P extends s{constructor(e,t,r){super(),this._binaryType=g[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=x,this._closeTimer=null,this._extensions={},this._paused=!1,this._protocol="",this._readyState=P.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,null!==e?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,void 0===t?t=[]:Array.isArray(t)||("object"==typeof t&&null!==t?(r=t,t=[]):t=[t]),function e(t,r,s,a){let o,d,u,p;let m={allowSynchronousEvents:!0,autoPong:!0,protocolVersion:O[1],maxPayload:0x6400000,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...a,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(t._autoPong=m.autoPong,!O.includes(m.protocolVersion))throw RangeError(`Unsupported protocol version: ${m.protocolVersion} (supported versions: ${O.join(", ")})`);if(r instanceof h)o=r;else try{o=new h(r)}catch(e){throw SyntaxError(`Invalid URL: ${r}`)}"http:"===o.protocol?o.protocol="ws:":"https:"===o.protocol&&(o.protocol="wss:"),t._url=o.href;let g="wss:"===o.protocol,x="ws+unix:"===o.protocol;if("ws:"===o.protocol||g||x?x&&!o.pathname?d="The URL's pathname is empty":o.hash&&(d="The URL contains a fragment identifier"):d='The URL\'s protocol must be one of "ws:", "wss:", "http:", "https", or "ws+unix:"',d){let e=SyntaxError(d);if(0===t._redirects)throw e;L(t,e);return}let v=g?443:80,b=l(16).toString("base64"),_=g?n.request:i.request,w=new Set;if(m.createConnection=m.createConnection||(g?F:M),m.defaultPort=m.defaultPort||v,m.port=o.port||v,m.host=o.hostname.startsWith("[")?o.hostname.slice(1,-1):o.hostname,m.headers={...m.headers,"Sec-WebSocket-Version":m.protocolVersion,"Sec-WebSocket-Key":b,Connection:"Upgrade",Upgrade:"websocket"},m.path=o.pathname+o.search,m.timeout=m.handshakeTimeout,m.perMessageDeflate&&(u=new f(!0!==m.perMessageDeflate?m.perMessageDeflate:{},!1,m.maxPayload),m.headers["Sec-WebSocket-Extensions"]=C({[f.extensionName]:u.offer()})),s.length){for(let e of s){if("string"!=typeof e||!A.test(e)||w.has(e))throw SyntaxError("An invalid or duplicated subprotocol was specified");w.add(e)}m.headers["Sec-WebSocket-Protocol"]=s.join(",")}if(m.origin&&(m.protocolVersion<13?m.headers["Sec-WebSocket-Origin"]=m.origin:m.headers.Origin=m.origin),(o.username||o.password)&&(m.auth=`${o.username}:${o.password}`),x){let e=m.path.split(":");m.socketPath=e[0],m.path=e[1]}if(m.followRedirects){if(0===t._redirects){t._originalIpc=x,t._originalSecure=g,t._originalHostOrSocketPath=x?m.socketPath:o.host;let e=a&&a.headers;if(a={...a,headers:{}},e)for(let[t,r]of Object.entries(e))a.headers[t.toLowerCase()]=r}else if(0===t.listenerCount("redirect")){let e=x?!!t._originalIpc&&m.socketPath===t._originalHostOrSocketPath:!t._originalIpc&&o.host===t._originalHostOrSocketPath;e&&(!t._originalSecure||g)||(delete m.headers.authorization,delete m.headers.cookie,e||delete m.headers.host,m.auth=void 0)}m.auth&&!a.headers.authorization&&(a.headers.authorization="Basic "+Buffer.from(m.auth).toString("base64")),p=t._req=_(m),t._redirects&&t.emit("redirect",t.url,p)}else p=t._req=_(m);m.timeout&&p.on("timeout",()=>{D(t,p,"Opening handshake has timed out")}),p.on("error",e=>{null===p||p[T]||(p=t._req=null,L(t,e))}),p.on("response",n=>{let i=n.headers.location,o=n.statusCode;if(i&&m.followRedirects&&o>=300&&o<400){let n;if(++t._redirects>m.maxRedirects){D(t,p,"Maximum redirects exceeded");return}p.abort();try{n=new h(i,r)}catch(e){L(t,SyntaxError(`Invalid URL: ${i}`));return}e(t,n,s,a)}else t.emit("unexpected-response",p,n)||D(t,p,`Unexpected server response: ${n.statusCode}`)}),p.on("upgrade",(e,r,s)=>{let n;if(t.emit("upgrade",e),t.readyState!==P.CONNECTING)return;p=t._req=null;let i=e.headers.upgrade;if(void 0===i||"websocket"!==i.toLowerCase()){D(t,r,"Invalid Upgrade header");return}let a=c("sha1").update(b+y).digest("base64");if(e.headers["sec-websocket-accept"]!==a){D(t,r,"Invalid Sec-WebSocket-Accept header");return}let o=e.headers["sec-websocket-protocol"];if(void 0!==o?w.size?w.has(o)||(n="Server sent an invalid subprotocol"):n="Server sent a subprotocol but none was requested":w.size&&(n="Server sent no subprotocol"),n){D(t,r,n);return}o&&(t._protocol=o);let l=e.headers["sec-websocket-extensions"];if(void 0!==l){let e;if(!u){D(t,r,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");return}try{e=S(l)}catch(e){D(t,r,"Invalid Sec-WebSocket-Extensions header");return}let s=Object.keys(e);if(1!==s.length||s[0]!==f.extensionName){D(t,r,"Server indicated an extension that was not requested");return}try{u.accept(e[f.extensionName])}catch(e){D(t,r,"Invalid Sec-WebSocket-Extensions header");return}t._extensions[f.extensionName]=u}t.setSocket(r,s,{allowSynchronousEvents:m.allowSynchronousEvents,generateMask:m.generateMask,maxPayload:m.maxPayload,skipUTF8Validation:m.skipUTF8Validation})}),m.finishRequest?m.finishRequest(p,t):p.end()}(this,e,t,r)):(this._autoPong=r.autoPong,this._isServer=!0)}get binaryType(){return this._binaryType}set binaryType(e){g.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,t,r){let s=new p({allowSynchronousEvents:r.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:r.maxPayload,skipUTF8Validation:r.skipUTF8Validation});this._sender=new m(e,this._extensions,r.generateMask),this._receiver=s,this._socket=e,s[w]=this,e[w]=this,s.on("conclude",B),s.on("drain",$),s.on("error",U),s.on("message",z),s.on("ping",W),s.on("pong",H),e.setTimeout&&e.setTimeout(0),e.setNoDelay&&e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",G),e.on("data",Z),e.on("end",X),e.on("error",J),this._readyState=P.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=P.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[f.extensionName]&&this._extensions[f.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=P.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==P.CLOSED){if(this.readyState===P.CONNECTING){D(this,this._req,"WebSocket was closed before the connection was established");return}if(this.readyState===P.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=P.CLOSING,this._sender.close(e,t,!this._isServer,e=>{!e&&(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),3e4)}}pause(){this.readyState!==P.CONNECTING&&this.readyState!==P.CLOSED&&(this._paused=!0,this._socket.pause())}ping(e,t,r){if(this.readyState===P.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState!==P.OPEN){I(this,e,r);return}void 0===t&&(t=!this._isServer),this._sender.ping(e||x,t,r)}pong(e,t,r){if(this.readyState===P.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState!==P.OPEN){I(this,e,r);return}void 0===t&&(t=!this._isServer),this._sender.pong(e||x,t,r)}resume(){this.readyState!==P.CONNECTING&&this.readyState!==P.CLOSED&&(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(e,t,r){if(this.readyState===P.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof t&&(r=t,t={}),"number"==typeof e&&(e=e.toString()),this.readyState!==P.OPEN){I(this,e,r);return}let s={binary:"string"!=typeof e,mask:!this._isServer,compress:!0,fin:!0,...t};this._extensions[f.extensionName]||(s.compress=!1),this._sender.send(e||x,s,r)}terminate(){if(this.readyState!==P.CLOSED){if(this.readyState===P.CONNECTING){D(this,this._req,"WebSocket was closed before the connection was established");return}this._socket&&(this._readyState=P.CLOSING,this._socket.destroy())}}}function L(e,t){e._readyState=P.CLOSING,e.emit("error",t),e.emitClose()}function M(e){return e.path=e.socketPath,a.connect(e)}function F(e){return e.path=void 0,e.servername||""===e.servername||(e.servername=a.isIP(e.host)?"":e.host),o.connect(e)}function D(e,t,r){e._readyState=P.CLOSING;let s=Error(r);Error.captureStackTrace(s,D),t.setHeader?(t[T]=!0,t.abort(),t.socket&&!t.socket.destroyed&&t.socket.destroy(),process.nextTick(L,e,s)):(t.destroy(s),t.once("error",e.emit.bind(e,"error")),t.once("close",e.emitClose.bind(e)))}function I(e,t,r){if(t){let r=E(t).length;e._socket?e._sender._bufferedBytes+=r:e._bufferedAmount+=r}if(r){let t=Error(`WebSocket is not open: readyState ${e.readyState} (${R[e.readyState]})`);process.nextTick(r,t)}}function B(e,t){let r=this[w];r._closeFrameReceived=!0,r._closeMessage=t,r._closeCode=e,void 0!==r._socket[w]&&(r._socket.removeListener("data",Z),process.nextTick(V,r._socket),1005===e?r.close():r.close(e,t))}function $(){let e=this[w];e.isPaused||e._socket.resume()}function U(e){let t=this[w];void 0!==t._socket[w]&&(t._socket.removeListener("data",Z),process.nextTick(V,t._socket),t.close(e[_])),t.emit("error",e)}function q(){this[w].emitClose()}function z(e,t){this[w].emit("message",e,t)}function W(e){let t=this[w];t._autoPong&&t.pong(e,!this._isServer,j),t.emit("ping",e)}function H(e){this[w].emit("pong",e)}function V(e){e.resume()}function G(){let e;let t=this[w];this.removeListener("close",G),this.removeListener("data",Z),this.removeListener("end",X),t._readyState=P.CLOSING,this._readableState.endEmitted||t._closeFrameReceived||t._receiver._writableState.errorEmitted||null===(e=t._socket.read())||t._receiver.write(e),t._receiver.end(),this[w]=void 0,clearTimeout(t._closeTimer),t._receiver._writableState.finished||t._receiver._writableState.errorEmitted?t.emitClose():(t._receiver.on("error",q),t._receiver.on("finish",q))}function Z(e){this[w]._receiver.write(e)||this.pause()}function X(){let e=this[w];e._readyState=P.CLOSING,e._receiver.end(),this.end()}function J(){let e=this[w];this.removeListener("error",J),this.on("error",j),e&&(e._readyState=P.CLOSING,this.destroy())}Object.defineProperty(P,"CONNECTING",{enumerable:!0,value:R.indexOf("CONNECTING")}),Object.defineProperty(P.prototype,"CONNECTING",{enumerable:!0,value:R.indexOf("CONNECTING")}),Object.defineProperty(P,"OPEN",{enumerable:!0,value:R.indexOf("OPEN")}),Object.defineProperty(P.prototype,"OPEN",{enumerable:!0,value:R.indexOf("OPEN")}),Object.defineProperty(P,"CLOSING",{enumerable:!0,value:R.indexOf("CLOSING")}),Object.defineProperty(P.prototype,"CLOSING",{enumerable:!0,value:R.indexOf("CLOSING")}),Object.defineProperty(P,"CLOSED",{enumerable:!0,value:R.indexOf("CLOSED")}),Object.defineProperty(P.prototype,"CLOSED",{enumerable:!0,value:R.indexOf("CLOSED")}),["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(e=>{Object.defineProperty(P.prototype,e,{enumerable:!0})}),["open","error","close","message"].forEach(e=>{Object.defineProperty(P.prototype,`on${e}`,{enumerable:!0,get(){for(let t of this.listeners(e))if(t[v])return t[b];return null},set(t){for(let t of this.listeners(e))if(t[v]){this.removeListener(e,t);break}"function"==typeof t&&this.addEventListener(e,t,{[v]:!0})}})}),P.prototype.addEventListener=k,P.prototype.removeEventListener=N,e.exports=P},93205:(e,t,r)=>{"use strict";let{Duplex:s}=r(27910);function n(e){e.emit("close")}function i(){!this.destroyed&&this._writableState.finished&&this.destroy()}function a(e){this.removeListener("error",a),this.destroy(),0===this.listenerCount("error")&&this.emit("error",e)}e.exports=function(e,t){let r=!0,o=new s({...t,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return e.on("message",function(t,r){let s=!r&&o._readableState.objectMode?t.toString():t;o.push(s)||e.pause()}),e.once("error",function(e){o.destroyed||(r=!1,o.destroy(e))}),e.once("close",function(){o.destroyed||o.push(null)}),o._destroy=function(t,s){if(e.readyState===e.CLOSED){s(t),process.nextTick(n,o);return}let i=!1;e.once("error",function(e){i=!0,s(e)}),e.once("close",function(){i||s(t),process.nextTick(n,o)}),r&&e.terminate()},o._final=function(t){if(e.readyState===e.CONNECTING){e.once("open",function(){o._final(t)});return}null!==e._socket&&(e._socket._writableState.finished?(t(),o._readableState.endEmitted&&o.destroy()):(e._socket.once("finish",function(){t()}),e.close()))},o._read=function(){e.isPaused&&e.resume()},o._write=function(t,r,s){if(e.readyState===e.CONNECTING){e.once("open",function(){o._write(t,r,s)});return}e.send(t,s)},o.on("end",i),o.on("error",a),o}},93537:(e,t)=>{"use strict";function r(e){let{ampFirst:t=!1,hybrid:r=!1,hasQuery:s=!1}=void 0===e?{}:e;return t||r&&s}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isInAmpMode",{enumerable:!0,get:function(){return r}})},94222:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var s=r(49837);function n(e){let t=s.useRef({value:e,previous:e});return s.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}},94735:e=>{"use strict";e.exports=require("events")},95533:(e,t,r)=>{"use strict";let s,n;r.r(t),r.d(t,{default:()=>ii});var i,a,o,l={};r.r(l),r.d(l,{Decoder:()=>nq,Encoder:()=>n$,PacketType:()=>o,protocol:()=>nB});var c=r(89812),d=r(49837),u=r(56954),h=r(27810),f=r(43394),p=r(55491),m=r(60467),g=r(40383),x=r(60064),y=r(84414),v="dismissableLayer.update",b=d.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),_=d.forwardRef((e,t)=>{let{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:s,onPointerDownOutside:n,onFocusOutside:a,onInteractOutside:o,onDismiss:l,...u}=e,h=d.useContext(b),[f,g]=d.useState(null),_=f?.ownerDocument??globalThis?.document,[,k]=d.useState({}),N=(0,m.s)(t,e=>g(e)),C=Array.from(h.layers),[S]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),E=C.indexOf(S),T=f?C.indexOf(f):-1,O=h.layersWithOutsidePointerEventsDisabled.size>0,R=T>=E,A=function(e,t=globalThis?.document){let r=(0,y.c)(e),s=d.useRef(!1),n=d.useRef(()=>{});return d.useEffect(()=>{let e=e=>{if(e.target&&!s.current){let s=function(){j("dismissableLayer.pointerDownOutside",r,i,{discrete:!0})},i={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",n.current),n.current=s,t.addEventListener("click",n.current,{once:!0})):s()}else t.removeEventListener("click",n.current);s.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",e),t.removeEventListener("click",n.current)}},[t,r]),{onPointerDownCapture:()=>s.current=!0}}(e=>{let t=e.target,r=[...h.branches].some(e=>e.contains(t));!R||r||(n?.(e),o?.(e),e.defaultPrevented||l?.())},_),P=function(e,t=globalThis?.document){let r=(0,y.c)(e),s=d.useRef(!1);return d.useEffect(()=>{let e=e=>{e.target&&!s.current&&j("dismissableLayer.focusOutside",r,{originalEvent:e},{discrete:!1})};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)},[t,r]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}(e=>{let t=e.target;[...h.branches].some(e=>e.contains(t))||(a?.(e),o?.(e),e.defaultPrevented||l?.())},_);return function(e,t=globalThis?.document){let r=(0,y.c)(e);d.useEffect(()=>{let e=e=>{"Escape"===e.key&&r(e)};return t.addEventListener("keydown",e,{capture:!0}),()=>t.removeEventListener("keydown",e,{capture:!0})},[r,t])}(e=>{T===h.layers.size-1&&(s?.(e),!e.defaultPrevented&&l&&(e.preventDefault(),l()))},_),d.useEffect(()=>{if(f)return r&&(0===h.layersWithOutsidePointerEventsDisabled.size&&(i=_.body.style.pointerEvents,_.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(f)),h.layers.add(f),w(),()=>{r&&1===h.layersWithOutsidePointerEventsDisabled.size&&(_.body.style.pointerEvents=i)}},[f,_,r,h]),d.useEffect(()=>()=>{f&&(h.layers.delete(f),h.layersWithOutsidePointerEventsDisabled.delete(f),w())},[f,h]),d.useEffect(()=>{let e=()=>k({});return document.addEventListener(v,e),()=>document.removeEventListener(v,e)},[]),(0,c.jsx)(x.sG.div,{...u,ref:N,style:{pointerEvents:O?R?"auto":"none":void 0,...e.style},onFocusCapture:(0,p.m)(e.onFocusCapture,P.onFocusCapture),onBlurCapture:(0,p.m)(e.onBlurCapture,P.onBlurCapture),onPointerDownCapture:(0,p.m)(e.onPointerDownCapture,A.onPointerDownCapture)})});function w(){let e=new CustomEvent(v);document.dispatchEvent(e)}function j(e,t,r,{discrete:s}){let n=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&n.addEventListener(e,t,{once:!0}),s?(0,x.hO)(n,i):n.dispatchEvent(i)}_.displayName="DismissableLayer",d.forwardRef((e,t)=>{let r=d.useContext(b),s=d.useRef(null),n=(0,m.s)(t,s);return d.useEffect(()=>{let e=s.current;if(e)return r.branches.add(e),()=>{r.branches.delete(e)}},[r.branches]),(0,c.jsx)(x.sG.div,{...e,ref:n})}).displayName="DismissableLayerBranch";var k=0;function N(){let e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var C="focusScope.autoFocusOnMount",S="focusScope.autoFocusOnUnmount",E={bubbles:!1,cancelable:!0},T=d.forwardRef((e,t)=>{let{loop:r=!1,trapped:s=!1,onMountAutoFocus:n,onUnmountAutoFocus:i,...a}=e,[o,l]=d.useState(null),u=(0,y.c)(n),h=(0,y.c)(i),f=d.useRef(null),p=(0,m.s)(t,e=>l(e)),g=d.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;d.useEffect(()=>{if(s){let e=function(e){if(g.paused||!o)return;let t=e.target;o.contains(t)?f.current=t:A(f.current,{select:!0})},t=function(e){if(g.paused||!o)return;let t=e.relatedTarget;null===t||o.contains(t)||A(f.current,{select:!0})};document.addEventListener("focusin",e),document.addEventListener("focusout",t);let r=new MutationObserver(function(e){if(document.activeElement===document.body)for(let t of e)t.removedNodes.length>0&&A(o)});return o&&r.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),r.disconnect()}}},[s,o,g.paused]),d.useEffect(()=>{if(o){P.add(g);let e=document.activeElement;if(!o.contains(e)){let t=new CustomEvent(C,E);o.addEventListener(C,u),o.dispatchEvent(t),t.defaultPrevented||(function(e,{select:t=!1}={}){let r=document.activeElement;for(let s of e)if(A(s,{select:t}),document.activeElement!==r)return}(O(o).filter(e=>"A"!==e.tagName),{select:!0}),document.activeElement===e&&A(o))}return()=>{o.removeEventListener(C,u),setTimeout(()=>{let t=new CustomEvent(S,E);o.addEventListener(S,h),o.dispatchEvent(t),t.defaultPrevented||A(e??document.body,{select:!0}),o.removeEventListener(S,h),P.remove(g)},0)}}},[o,u,h,g]);let v=d.useCallback(e=>{if(!r&&!s||g.paused)return;let t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,n=document.activeElement;if(t&&n){let t=e.currentTarget,[s,i]=function(e){let t=O(e);return[R(t,e),R(t.reverse(),e)]}(t);s&&i?e.shiftKey||n!==i?e.shiftKey&&n===s&&(e.preventDefault(),r&&A(i,{select:!0})):(e.preventDefault(),r&&A(s,{select:!0})):n===t&&e.preventDefault()}},[r,s,g.paused]);return(0,c.jsx)(x.sG.div,{tabIndex:-1,...a,ref:p,onKeyDown:v})});function O(e){let t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{let t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function R(e,t){for(let r of e)if(!function(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e&&(void 0===t||e!==t);){if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}(r,{upTo:t}))return r}function A(e,{select:t=!1}={}){if(e&&e.focus){var r;let s=document.activeElement;e.focus({preventScroll:!0}),e!==s&&(r=e)instanceof HTMLInputElement&&"select"in r&&t&&e.select()}}T.displayName="FocusScope";var P=function(){let e=[];return{add(t){let r=e[0];t!==r&&r?.pause(),(e=L(e,t)).unshift(t)},remove(t){e=L(e,t),e[0]?.resume()}}}();function L(e,t){let r=[...e],s=r.indexOf(t);return -1!==s&&r.splice(s,1),r}var M=r(2498);let F=["top","right","bottom","left"],D=Math.min,I=Math.max,B=Math.round,$=Math.floor,U=e=>({x:e,y:e}),q={left:"right",right:"left",bottom:"top",top:"bottom"},z={start:"end",end:"start"};function W(e,t){return"function"==typeof e?e(t):e}function H(e){return e.split("-")[0]}function V(e){return e.split("-")[1]}function G(e){return"x"===e?"y":"x"}function Z(e){return"y"===e?"height":"width"}let X=new Set(["top","bottom"]);function J(e){return X.has(H(e))?"y":"x"}function Y(e){return e.replace(/start|end/g,e=>z[e])}let K=["left","right"],Q=["right","left"],ee=["top","bottom"],et=["bottom","top"];function er(e){return e.replace(/left|right|bottom|top/g,e=>q[e])}function es(e){return"number"!=typeof e?{top:0,right:0,bottom:0,left:0,...e}:{top:e,right:e,bottom:e,left:e}}function en(e){let{x:t,y:r,width:s,height:n}=e;return{width:s,height:n,top:r,left:t,right:t+s,bottom:r+n,x:t,y:r}}function ei(e,t,r){let s,{reference:n,floating:i}=e,a=J(t),o=G(J(t)),l=Z(o),c=H(t),d="y"===a,u=n.x+n.width/2-i.width/2,h=n.y+n.height/2-i.height/2,f=n[l]/2-i[l]/2;switch(c){case"top":s={x:u,y:n.y-i.height};break;case"bottom":s={x:u,y:n.y+n.height};break;case"right":s={x:n.x+n.width,y:h};break;case"left":s={x:n.x-i.width,y:h};break;default:s={x:n.x,y:n.y}}switch(V(t)){case"start":s[o]-=f*(r&&d?-1:1);break;case"end":s[o]+=f*(r&&d?-1:1)}return s}let ea=async(e,t,r)=>{let{placement:s="bottom",strategy:n="absolute",middleware:i=[],platform:a}=r,o=i.filter(Boolean),l=await (null==a.isRTL?void 0:a.isRTL(t)),c=await a.getElementRects({reference:e,floating:t,strategy:n}),{x:d,y:u}=ei(c,s,l),h=s,f={},p=0;for(let r=0;r<o.length;r++){let{name:i,fn:m}=o[r],{x:g,y:x,data:y,reset:v}=await m({x:d,y:u,initialPlacement:s,placement:h,strategy:n,middlewareData:f,rects:c,platform:a,elements:{reference:e,floating:t}});d=null!=g?g:d,u=null!=x?x:u,f={...f,[i]:{...f[i],...y}},v&&p<=50&&(p++,"object"==typeof v&&(v.placement&&(h=v.placement),v.rects&&(c=!0===v.rects?await a.getElementRects({reference:e,floating:t,strategy:n}):v.rects),{x:d,y:u}=ei(c,h,l)),r=-1)}return{x:d,y:u,placement:h,strategy:n,middlewareData:f}};async function eo(e,t){var r;void 0===t&&(t={});let{x:s,y:n,platform:i,rects:a,elements:o,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:u="floating",altBoundary:h=!1,padding:f=0}=W(t,e),p=es(f),m=o[h?"floating"===u?"reference":"floating":u],g=en(await i.getClippingRect({element:null==(r=await (null==i.isElement?void 0:i.isElement(m)))||r?m:m.contextElement||await (null==i.getDocumentElement?void 0:i.getDocumentElement(o.floating)),boundary:c,rootBoundary:d,strategy:l})),x="floating"===u?{x:s,y:n,width:a.floating.width,height:a.floating.height}:a.reference,y=await (null==i.getOffsetParent?void 0:i.getOffsetParent(o.floating)),v=await (null==i.isElement?void 0:i.isElement(y))&&await (null==i.getScale?void 0:i.getScale(y))||{x:1,y:1},b=en(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:x,offsetParent:y,strategy:l}):x);return{top:(g.top-b.top+p.top)/v.y,bottom:(b.bottom-g.bottom+p.bottom)/v.y,left:(g.left-b.left+p.left)/v.x,right:(b.right-g.right+p.right)/v.x}}function el(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function ec(e){return F.some(t=>e[t]>=0)}let ed=new Set(["left","top"]);async function eu(e,t){let{placement:r,platform:s,elements:n}=e,i=await (null==s.isRTL?void 0:s.isRTL(n.floating)),a=H(r),o=V(r),l="y"===J(r),c=ed.has(a)?-1:1,d=i&&l?-1:1,u=W(t,e),{mainAxis:h,crossAxis:f,alignmentAxis:p}="number"==typeof u?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return o&&"number"==typeof p&&(f="end"===o?-1*p:p),l?{x:f*d,y:h*c}:{x:h*c,y:f*d}}function eh(){return"undefined"!=typeof window}function ef(e){return eg(e)?(e.nodeName||"").toLowerCase():"#document"}function ep(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function em(e){var t;return null==(t=(eg(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function eg(e){return!!eh()&&(e instanceof Node||e instanceof ep(e).Node)}function ex(e){return!!eh()&&(e instanceof Element||e instanceof ep(e).Element)}function ey(e){return!!eh()&&(e instanceof HTMLElement||e instanceof ep(e).HTMLElement)}function ev(e){return!!eh()&&"undefined"!=typeof ShadowRoot&&(e instanceof ShadowRoot||e instanceof ep(e).ShadowRoot)}let eb=new Set(["inline","contents"]);function e_(e){let{overflow:t,overflowX:r,overflowY:s,display:n}=eA(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+r)&&!eb.has(n)}let ew=new Set(["table","td","th"]),ej=[":popover-open",":modal"];function ek(e){return ej.some(t=>{try{return e.matches(t)}catch(e){return!1}})}let eN=["transform","translate","scale","rotate","perspective"],eC=["transform","translate","scale","rotate","perspective","filter"],eS=["paint","layout","strict","content"];function eE(e){let t=eT(),r=ex(e)?eA(e):e;return eN.some(e=>!!r[e]&&"none"!==r[e])||!!r.containerType&&"normal"!==r.containerType||!t&&!!r.backdropFilter&&"none"!==r.backdropFilter||!t&&!!r.filter&&"none"!==r.filter||eC.some(e=>(r.willChange||"").includes(e))||eS.some(e=>(r.contain||"").includes(e))}function eT(){return"undefined"!=typeof CSS&&!!CSS.supports&&CSS.supports("-webkit-backdrop-filter","none")}let eO=new Set(["html","body","#document"]);function eR(e){return eO.has(ef(e))}function eA(e){return ep(e).getComputedStyle(e)}function eP(e){return ex(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function eL(e){if("html"===ef(e))return e;let t=e.assignedSlot||e.parentNode||ev(e)&&e.host||em(e);return ev(t)?t.host:t}function eM(e,t,r){var s;void 0===t&&(t=[]),void 0===r&&(r=!0);let n=function e(t){let r=eL(t);return eR(r)?t.ownerDocument?t.ownerDocument.body:t.body:ey(r)&&e_(r)?r:e(r)}(e),i=n===(null==(s=e.ownerDocument)?void 0:s.body),a=ep(n);if(i){let e=eF(a);return t.concat(a,a.visualViewport||[],e_(n)?n:[],e&&r?eM(e):[])}return t.concat(n,eM(n,[],r))}function eF(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function eD(e){let t=eA(e),r=parseFloat(t.width)||0,s=parseFloat(t.height)||0,n=ey(e),i=n?e.offsetWidth:r,a=n?e.offsetHeight:s,o=B(r)!==i||B(s)!==a;return o&&(r=i,s=a),{width:r,height:s,$:o}}function eI(e){return ex(e)?e:e.contextElement}function eB(e){let t=eI(e);if(!ey(t))return U(1);let r=t.getBoundingClientRect(),{width:s,height:n,$:i}=eD(t),a=(i?B(r.width):r.width)/s,o=(i?B(r.height):r.height)/n;return a&&Number.isFinite(a)||(a=1),o&&Number.isFinite(o)||(o=1),{x:a,y:o}}let e$=U(0);function eU(e){let t=ep(e);return eT()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:e$}function eq(e,t,r,s){var n;void 0===t&&(t=!1),void 0===r&&(r=!1);let i=e.getBoundingClientRect(),a=eI(e),o=U(1);t&&(s?ex(s)&&(o=eB(s)):o=eB(e));let l=(void 0===(n=r)&&(n=!1),s&&(!n||s===ep(a))&&n)?eU(a):U(0),c=(i.left+l.x)/o.x,d=(i.top+l.y)/o.y,u=i.width/o.x,h=i.height/o.y;if(a){let e=ep(a),t=s&&ex(s)?ep(s):s,r=e,n=eF(r);for(;n&&s&&t!==r;){let e=eB(n),t=n.getBoundingClientRect(),s=eA(n),i=t.left+(n.clientLeft+parseFloat(s.paddingLeft))*e.x,a=t.top+(n.clientTop+parseFloat(s.paddingTop))*e.y;c*=e.x,d*=e.y,u*=e.x,h*=e.y,c+=i,d+=a,n=eF(r=ep(n))}}return en({width:u,height:h,x:c,y:d})}function ez(e,t){let r=eP(e).scrollLeft;return t?t.left+r:eq(em(e)).left+r}function eW(e,t,r){void 0===r&&(r=!1);let s=e.getBoundingClientRect();return{x:s.left+t.scrollLeft-(r?0:ez(e,s)),y:s.top+t.scrollTop}}let eH=new Set(["absolute","fixed"]);function eV(e,t,r){let s;if("viewport"===t)s=function(e,t){let r=ep(e),s=em(e),n=r.visualViewport,i=s.clientWidth,a=s.clientHeight,o=0,l=0;if(n){i=n.width,a=n.height;let e=eT();(!e||e&&"fixed"===t)&&(o=n.offsetLeft,l=n.offsetTop)}return{width:i,height:a,x:o,y:l}}(e,r);else if("document"===t)s=function(e){let t=em(e),r=eP(e),s=e.ownerDocument.body,n=I(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),i=I(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight),a=-r.scrollLeft+ez(e),o=-r.scrollTop;return"rtl"===eA(s).direction&&(a+=I(t.clientWidth,s.clientWidth)-n),{width:n,height:i,x:a,y:o}}(em(e));else if(ex(t))s=function(e,t){let r=eq(e,!0,"fixed"===t),s=r.top+e.clientTop,n=r.left+e.clientLeft,i=ey(e)?eB(e):U(1),a=e.clientWidth*i.x,o=e.clientHeight*i.y;return{width:a,height:o,x:n*i.x,y:s*i.y}}(t,r);else{let r=eU(e);s={x:t.x-r.x,y:t.y-r.y,width:t.width,height:t.height}}return en(s)}function eG(e){return"static"===eA(e).position}function eZ(e,t){if(!ey(e)||"fixed"===eA(e).position)return null;if(t)return t(e);let r=e.offsetParent;return em(e)===r&&(r=r.ownerDocument.body),r}function eX(e,t){var r;let s=ep(e);if(ek(e))return s;if(!ey(e)){let t=eL(e);for(;t&&!eR(t);){if(ex(t)&&!eG(t))return t;t=eL(t)}return s}let n=eZ(e,t);for(;n&&(r=n,ew.has(ef(r)))&&eG(n);)n=eZ(n,t);return n&&eR(n)&&eG(n)&&!eE(n)?s:n||function(e){let t=eL(e);for(;ey(t)&&!eR(t);){if(eE(t))return t;if(ek(t))break;t=eL(t)}return null}(e)||s}let eJ=async function(e){let t=this.getOffsetParent||eX,r=this.getDimensions,s=await r(e.floating);return{reference:function(e,t,r){let s=ey(t),n=em(t),i="fixed"===r,a=eq(e,!0,i,t),o={scrollLeft:0,scrollTop:0},l=U(0);if(s||!s&&!i){if(("body"!==ef(t)||e_(n))&&(o=eP(t)),s){let e=eq(t,!0,i,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else n&&(l.x=ez(n))}i&&!s&&n&&(l.x=ez(n));let c=!n||s||i?U(0):eW(n,o);return{x:a.left+o.scrollLeft-l.x-c.x,y:a.top+o.scrollTop-l.y-c.y,width:a.width,height:a.height}}(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}},eY={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:r,offsetParent:s,strategy:n}=e,i="fixed"===n,a=em(s),o=!!t&&ek(t.floating);if(s===a||o&&i)return r;let l={scrollLeft:0,scrollTop:0},c=U(1),d=U(0),u=ey(s);if((u||!u&&!i)&&(("body"!==ef(s)||e_(a))&&(l=eP(s)),ey(s))){let e=eq(s);c=eB(s),d.x=e.x+s.clientLeft,d.y=e.y+s.clientTop}let h=!a||u||i?U(0):eW(a,l,!0);return{width:r.width*c.x,height:r.height*c.y,x:r.x*c.x-l.scrollLeft*c.x+d.x+h.x,y:r.y*c.y-l.scrollTop*c.y+d.y+h.y}},getDocumentElement:em,getClippingRect:function(e){let{element:t,boundary:r,rootBoundary:s,strategy:n}=e,i=[..."clippingAncestors"===r?ek(t)?[]:function(e,t){let r=t.get(e);if(r)return r;let s=eM(e,[],!1).filter(e=>ex(e)&&"body"!==ef(e)),n=null,i="fixed"===eA(e).position,a=i?eL(e):e;for(;ex(a)&&!eR(a);){let t=eA(a),r=eE(a);r||"fixed"!==t.position||(n=null),(i?!r&&!n:!r&&"static"===t.position&&!!n&&eH.has(n.position)||e_(a)&&!r&&function e(t,r){let s=eL(t);return!(s===r||!ex(s)||eR(s))&&("fixed"===eA(s).position||e(s,r))}(e,a))?s=s.filter(e=>e!==a):n=t,a=eL(a)}return t.set(e,s),s}(t,this._c):[].concat(r),s],a=i[0],o=i.reduce((e,r)=>{let s=eV(t,r,n);return e.top=I(s.top,e.top),e.right=D(s.right,e.right),e.bottom=D(s.bottom,e.bottom),e.left=I(s.left,e.left),e},eV(t,a,n));return{width:o.right-o.left,height:o.bottom-o.top,x:o.left,y:o.top}},getOffsetParent:eX,getElementRects:eJ,getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){let{width:t,height:r}=eD(e);return{width:t,height:r}},getScale:eB,isElement:ex,isRTL:function(e){return"rtl"===eA(e).direction}};function eK(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}let eQ=e=>({name:"arrow",options:e,async fn(t){let{x:r,y:s,placement:n,rects:i,platform:a,elements:o,middlewareData:l}=t,{element:c,padding:d=0}=W(e,t)||{};if(null==c)return{};let u=es(d),h={x:r,y:s},f=G(J(n)),p=Z(f),m=await a.getDimensions(c),g="y"===f,x=g?"clientHeight":"clientWidth",y=i.reference[p]+i.reference[f]-h[f]-i.floating[p],v=h[f]-i.reference[f],b=await (null==a.getOffsetParent?void 0:a.getOffsetParent(c)),_=b?b[x]:0;_&&await (null==a.isElement?void 0:a.isElement(b))||(_=o.floating[x]||i.floating[p]);let w=_/2-m[p]/2-1,j=D(u[g?"top":"left"],w),k=D(u[g?"bottom":"right"],w),N=_-m[p]-k,C=_/2-m[p]/2+(y/2-v/2),S=I(j,D(C,N)),E=!l.arrow&&null!=V(n)&&C!==S&&i.reference[p]/2-(C<j?j:k)-m[p]/2<0,T=E?C<j?C-j:C-N:0;return{[f]:h[f]+T,data:{[f]:S,centerOffset:C-S-T,...E&&{alignmentOffset:T}},reset:E}}}),e0=(e,t,r)=>{let s=new Map,n={platform:eY,...r},i={...n.platform,_c:s};return ea(e,t,{...n,platform:i})};var e1=r(69056),e2="undefined"!=typeof document?d.useLayoutEffect:function(){};function e4(e,t){let r,s,n;if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if((r=e.length)!==t.length)return!1;for(s=r;0!=s--;)if(!e4(e[s],t[s]))return!1;return!0}if((r=(n=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(s=r;0!=s--;)if(!({}).hasOwnProperty.call(t,n[s]))return!1;for(s=r;0!=s--;){let r=n[s];if(("_owner"!==r||!e.$$typeof)&&!e4(e[r],t[r]))return!1}return!0}return e!=e&&t!=t}function e3(e){return"undefined"==typeof window?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function e5(e,t){let r=e3(e);return Math.round(t*r)/r}function e6(e){let t=d.useRef(e);return e2(()=>{t.current=e}),t}let e9=e=>({name:"arrow",options:e,fn(t){let{element:r,padding:s}="function"==typeof e?e(t):e;return r&&({}).hasOwnProperty.call(r,"current")?null!=r.current?eQ({element:r.current,padding:s}).fn(t):{}:r?eQ({element:r,padding:s}).fn(t):{}}}),e8=(e,t)=>({...function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var r,s;let{x:n,y:i,placement:a,middlewareData:o}=t,l=await eu(t,e);return a===(null==(r=o.offset)?void 0:r.placement)&&null!=(s=o.arrow)&&s.alignmentOffset?{}:{x:n+l.x,y:i+l.y,data:{...l,placement:a}}}}}(e),options:[e,t]}),e7=(e,t)=>({...function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){let{x:r,y:s,placement:n}=t,{mainAxis:i=!0,crossAxis:a=!1,limiter:o={fn:e=>{let{x:t,y:r}=e;return{x:t,y:r}}},...l}=W(e,t),c={x:r,y:s},d=await eo(t,l),u=J(H(n)),h=G(u),f=c[h],p=c[u];if(i){let e="y"===h?"top":"left",t="y"===h?"bottom":"right",r=f+d[e],s=f-d[t];f=I(r,D(f,s))}if(a){let e="y"===u?"top":"left",t="y"===u?"bottom":"right",r=p+d[e],s=p-d[t];p=I(r,D(p,s))}let m=o.fn({...t,[h]:f,[u]:p});return{...m,data:{x:m.x-r,y:m.y-s,enabled:{[h]:i,[u]:a}}}}}}(e),options:[e,t]}),te=(e,t)=>({...function(e){return void 0===e&&(e={}),{options:e,fn(t){let{x:r,y:s,placement:n,rects:i,middlewareData:a}=t,{offset:o=0,mainAxis:l=!0,crossAxis:c=!0}=W(e,t),d={x:r,y:s},u=J(n),h=G(u),f=d[h],p=d[u],m=W(o,t),g="number"==typeof m?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){let e="y"===h?"height":"width",t=i.reference[h]-i.floating[e]+g.mainAxis,r=i.reference[h]+i.reference[e]-g.mainAxis;f<t?f=t:f>r&&(f=r)}if(c){var x,y;let e="y"===h?"width":"height",t=ed.has(H(n)),r=i.reference[u]-i.floating[e]+(t&&(null==(x=a.offset)?void 0:x[u])||0)+(t?0:g.crossAxis),s=i.reference[u]+i.reference[e]+(t?0:(null==(y=a.offset)?void 0:y[u])||0)-(t?g.crossAxis:0);p<r?p=r:p>s&&(p=s)}return{[h]:f,[u]:p}}}}(e),options:[e,t]}),tt=(e,t)=>({...function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var r,s,n,i,a;let{placement:o,middlewareData:l,rects:c,initialPlacement:d,platform:u,elements:h}=t,{mainAxis:f=!0,crossAxis:p=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:y=!0,...v}=W(e,t);if(null!=(r=l.arrow)&&r.alignmentOffset)return{};let b=H(o),_=J(d),w=H(d)===d,j=await (null==u.isRTL?void 0:u.isRTL(h.floating)),k=m||(w||!y?[er(d)]:function(e){let t=er(e);return[Y(e),t,Y(t)]}(d)),N="none"!==x;!m&&N&&k.push(...function(e,t,r,s){let n=V(e),i=function(e,t,r){switch(e){case"top":case"bottom":if(r)return t?Q:K;return t?K:Q;case"left":case"right":return t?ee:et;default:return[]}}(H(e),"start"===r,s);return n&&(i=i.map(e=>e+"-"+n),t&&(i=i.concat(i.map(Y)))),i}(d,y,x,j));let C=[d,...k],S=await eo(t,v),E=[],T=(null==(s=l.flip)?void 0:s.overflows)||[];if(f&&E.push(S[b]),p){let e=function(e,t,r){void 0===r&&(r=!1);let s=V(e),n=G(J(e)),i=Z(n),a="x"===n?s===(r?"end":"start")?"right":"left":"start"===s?"bottom":"top";return t.reference[i]>t.floating[i]&&(a=er(a)),[a,er(a)]}(o,c,j);E.push(S[e[0]],S[e[1]])}if(T=[...T,{placement:o,overflows:E}],!E.every(e=>e<=0)){let e=((null==(n=l.flip)?void 0:n.index)||0)+1,t=C[e];if(t&&("alignment"!==p||_===J(t)||T.every(e=>e.overflows[0]>0&&J(e.placement)===_)))return{data:{index:e,overflows:T},reset:{placement:t}};let r=null==(i=T.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:i.placement;if(!r)switch(g){case"bestFit":{let e=null==(a=T.filter(e=>{if(N){let t=J(e.placement);return t===_||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:a[0];e&&(r=e);break}case"initialPlacement":r=d}if(o!==r)return{reset:{placement:r}}}return{}}}}(e),options:[e,t]}),tr=(e,t)=>({...function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var r,s;let n,i;let{placement:a,rects:o,platform:l,elements:c}=t,{apply:d=()=>{},...u}=W(e,t),h=await eo(t,u),f=H(a),p=V(a),m="y"===J(a),{width:g,height:x}=o.floating;"top"===f||"bottom"===f?(n=f,i=p===(await (null==l.isRTL?void 0:l.isRTL(c.floating))?"start":"end")?"left":"right"):(i=f,n="end"===p?"top":"bottom");let y=x-h.top-h.bottom,v=g-h.left-h.right,b=D(x-h[n],y),_=D(g-h[i],v),w=!t.middlewareData.shift,j=b,k=_;if(null!=(r=t.middlewareData.shift)&&r.enabled.x&&(k=v),null!=(s=t.middlewareData.shift)&&s.enabled.y&&(j=y),w&&!p){let e=I(h.left,0),t=I(h.right,0),r=I(h.top,0),s=I(h.bottom,0);m?k=g-2*(0!==e||0!==t?e+t:I(h.left,h.right)):j=x-2*(0!==r||0!==s?r+s:I(h.top,h.bottom))}await d({...t,availableWidth:k,availableHeight:j});let N=await l.getDimensions(c.floating);return g!==N.width||x!==N.height?{reset:{rects:!0}}:{}}}}(e),options:[e,t]}),ts=(e,t)=>({...function(e){return void 0===e&&(e={}),{name:"hide",options:e,async fn(t){let{rects:r}=t,{strategy:s="referenceHidden",...n}=W(e,t);switch(s){case"referenceHidden":{let e=el(await eo(t,{...n,elementContext:"reference"}),r.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:ec(e)}}}case"escaped":{let e=el(await eo(t,{...n,altBoundary:!0}),r.floating);return{data:{escapedOffsets:e,escaped:ec(e)}}}default:return{}}}}}(e),options:[e,t]}),tn=(e,t)=>({...e9(e),options:[e,t]});var ti=d.forwardRef((e,t)=>{let{children:r,width:s=10,height:n=5,...i}=e;return(0,c.jsx)(x.sG.svg,{...i,ref:t,width:s,height:n,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:(0,c.jsx)("polygon",{points:"0,0 30,0 15,10"})})});ti.displayName="Arrow";var ta=r(25136),to=r(51958),tl="Popper",[tc,td]=(0,g.A)(tl),[tu,th]=tc(tl),tf=e=>{let{__scopePopper:t,children:r}=e,[s,n]=d.useState(null);return(0,c.jsx)(tu,{scope:t,anchor:s,onAnchorChange:n,children:r})};tf.displayName=tl;var tp="PopperAnchor",tm=d.forwardRef((e,t)=>{let{__scopePopper:r,virtualRef:s,...n}=e,i=th(tp,r),a=d.useRef(null),o=(0,m.s)(t,a);return d.useEffect(()=>{i.onAnchorChange(s?.current||a.current)}),s?null:(0,c.jsx)(x.sG.div,{...n,ref:o})});tm.displayName=tp;var tg="PopperContent",[tx,ty]=tc(tg),tv=d.forwardRef((e,t)=>{let{__scopePopper:r,side:s="bottom",sideOffset:n=0,align:i="center",alignOffset:a=0,arrowPadding:o=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:h=0,sticky:f="partial",hideWhenDetached:p=!1,updatePositionStrategy:g="optimized",onPlaced:v,...b}=e,_=th(tg,r),[w,j]=d.useState(null),k=(0,m.s)(t,e=>j(e)),[N,C]=d.useState(null),S=(0,to.X)(N),E=S?.width??0,T=S?.height??0,O="number"==typeof h?h:{top:0,right:0,bottom:0,left:0,...h},R=Array.isArray(u)?u:[u],A=R.length>0,P={padding:O,boundary:R.filter(tj),altBoundary:A},{refs:L,floatingStyles:M,placement:F,isPositioned:B,middlewareData:U}=function(e){void 0===e&&(e={});let{placement:t="bottom",strategy:r="absolute",middleware:s=[],platform:n,elements:{reference:i,floating:a}={},transform:o=!0,whileElementsMounted:l,open:c}=e,[u,h]=d.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[f,p]=d.useState(s);e4(f,s)||p(s);let[m,g]=d.useState(null),[x,y]=d.useState(null),v=d.useCallback(e=>{e!==j.current&&(j.current=e,g(e))},[]),b=d.useCallback(e=>{e!==k.current&&(k.current=e,y(e))},[]),_=i||m,w=a||x,j=d.useRef(null),k=d.useRef(null),N=d.useRef(u),C=null!=l,S=e6(l),E=e6(n),T=e6(c),O=d.useCallback(()=>{if(!j.current||!k.current)return;let e={placement:t,strategy:r,middleware:f};E.current&&(e.platform=E.current),e0(j.current,k.current,e).then(e=>{let t={...e,isPositioned:!1!==T.current};R.current&&!e4(N.current,t)&&(N.current=t,e1.flushSync(()=>{h(t)}))})},[f,t,r,E,T]);e2(()=>{!1===c&&N.current.isPositioned&&(N.current.isPositioned=!1,h(e=>({...e,isPositioned:!1})))},[c]);let R=d.useRef(!1);e2(()=>(R.current=!0,()=>{R.current=!1}),[]),e2(()=>{if(_&&(j.current=_),w&&(k.current=w),_&&w){if(S.current)return S.current(_,w,O);O()}},[_,w,O,S,C]);let A=d.useMemo(()=>({reference:j,floating:k,setReference:v,setFloating:b}),[v,b]),P=d.useMemo(()=>({reference:_,floating:w}),[_,w]),L=d.useMemo(()=>{let e={position:r,left:0,top:0};if(!P.floating)return e;let t=e5(P.floating,u.x),s=e5(P.floating,u.y);return o?{...e,transform:"translate("+t+"px, "+s+"px)",...e3(P.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:t,top:s}},[r,o,P.floating,u.x,u.y]);return d.useMemo(()=>({...u,update:O,refs:A,elements:P,floatingStyles:L}),[u,O,A,P,L])}({strategy:"fixed",placement:s+("center"!==i?"-"+i:""),whileElementsMounted:(...e)=>(function(e,t,r,s){let n;void 0===s&&(s={});let{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:o="function"==typeof ResizeObserver,layoutShift:l="function"==typeof IntersectionObserver,animationFrame:c=!1}=s,d=eI(e),u=i||a?[...d?eM(d):[],...eM(t)]:[];u.forEach(e=>{i&&e.addEventListener("scroll",r,{passive:!0}),a&&e.addEventListener("resize",r)});let h=d&&l?function(e,t){let r,s=null,n=em(e);function i(){var e;clearTimeout(r),null==(e=s)||e.disconnect(),s=null}return function a(o,l){void 0===o&&(o=!1),void 0===l&&(l=1),i();let c=e.getBoundingClientRect(),{left:d,top:u,width:h,height:f}=c;if(o||t(),!h||!f)return;let p=$(u),m=$(n.clientWidth-(d+h)),g={rootMargin:-p+"px "+-m+"px "+-$(n.clientHeight-(u+f))+"px "+-$(d)+"px",threshold:I(0,D(1,l))||1},x=!0;function y(t){let s=t[0].intersectionRatio;if(s!==l){if(!x)return a();s?a(!1,s):r=setTimeout(()=>{a(!1,1e-7)},1e3)}1!==s||eK(c,e.getBoundingClientRect())||a(),x=!1}try{s=new IntersectionObserver(y,{...g,root:n.ownerDocument})}catch(e){s=new IntersectionObserver(y,g)}s.observe(e)}(!0),i}(d,r):null,f=-1,p=null;o&&(p=new ResizeObserver(e=>{let[s]=e;s&&s.target===d&&p&&(p.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var e;null==(e=p)||e.observe(t)})),r()}),d&&!c&&p.observe(d),p.observe(t));let m=c?eq(e):null;return c&&function t(){let s=eq(e);m&&!eK(m,s)&&r(),m=s,n=requestAnimationFrame(t)}(),r(),()=>{var e;u.forEach(e=>{i&&e.removeEventListener("scroll",r),a&&e.removeEventListener("resize",r)}),null==h||h(),null==(e=p)||e.disconnect(),p=null,c&&cancelAnimationFrame(n)}})(...e,{animationFrame:"always"===g}),elements:{reference:_.anchor},middleware:[e8({mainAxis:n+T,alignmentAxis:a}),l&&e7({mainAxis:!0,crossAxis:!1,limiter:"partial"===f?te():void 0,...P}),l&&tt({...P}),tr({...P,apply:({elements:e,rects:t,availableWidth:r,availableHeight:s})=>{let{width:n,height:i}=t.reference,a=e.floating.style;a.setProperty("--radix-popper-available-width",`${r}px`),a.setProperty("--radix-popper-available-height",`${s}px`),a.setProperty("--radix-popper-anchor-width",`${n}px`),a.setProperty("--radix-popper-anchor-height",`${i}px`)}}),N&&tn({element:N,padding:o}),tk({arrowWidth:E,arrowHeight:T}),p&&ts({strategy:"referenceHidden",...P})]}),[q,z]=tN(F),W=(0,y.c)(v);(0,ta.N)(()=>{B&&W?.()},[B,W]);let H=U.arrow?.x,V=U.arrow?.y,G=U.arrow?.centerOffset!==0,[Z,X]=d.useState();return(0,ta.N)(()=>{w&&X(window.getComputedStyle(w).zIndex)},[w]),(0,c.jsx)("div",{ref:L.setFloating,"data-radix-popper-content-wrapper":"",style:{...M,transform:B?M.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Z,"--radix-popper-transform-origin":[U.transformOrigin?.x,U.transformOrigin?.y].join(" "),...U.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:(0,c.jsx)(tx,{scope:r,placedSide:q,onArrowChange:C,arrowX:H,arrowY:V,shouldHideArrow:G,children:(0,c.jsx)(x.sG.div,{"data-side":q,"data-align":z,...b,ref:k,style:{...b.style,animation:B?void 0:"none"}})})})});tv.displayName=tg;var tb="PopperArrow",t_={top:"bottom",right:"left",bottom:"top",left:"right"},tw=d.forwardRef(function(e,t){let{__scopePopper:r,...s}=e,n=ty(tb,r),i=t_[n.placedSide];return(0,c.jsx)("span",{ref:n.onArrowChange,style:{position:"absolute",left:n.arrowX,top:n.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[n.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[n.placedSide],visibility:n.shouldHideArrow?"hidden":void 0},children:(0,c.jsx)(ti,{...s,ref:t,style:{...s.style,display:"block"}})})});function tj(e){return null!==e}tw.displayName=tb;var tk=e=>({name:"transformOrigin",options:e,fn(t){let{placement:r,rects:s,middlewareData:n}=t,i=n.arrow?.centerOffset!==0,a=i?0:e.arrowWidth,o=i?0:e.arrowHeight,[l,c]=tN(r),d={start:"0%",center:"50%",end:"100%"}[c],u=(n.arrow?.x??0)+a/2,h=(n.arrow?.y??0)+o/2,f="",p="";return"bottom"===l?(f=i?d:`${u}px`,p=`${-o}px`):"top"===l?(f=i?d:`${u}px`,p=`${s.floating.height+o}px`):"right"===l?(f=`${-o}px`,p=i?d:`${h}px`):"left"===l&&(f=`${s.floating.width+o}px`,p=i?d:`${h}px`),{data:{x:f,y:p}}}});function tN(e){let[t,r="center"]=e.split("-");return[t,r]}var tC=d.forwardRef((e,t)=>{let{container:r,...s}=e,[n,i]=d.useState(!1);(0,ta.N)(()=>i(!0),[]);let a=r||n&&globalThis?.document?.body;return a?e1.createPortal((0,c.jsx)(x.sG.div,{...s,ref:t}),a):null});tC.displayName="Portal";var tS=r(28201),tE=r(1317),tT=r(26958),tO=function(e){return"undefined"==typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body},tR=new WeakMap,tA=new WeakMap,tP={},tL=0,tM=function(e){return e&&(e.host||tM(e.parentNode))},tF=function(e,t,r,s){var n=(Array.isArray(e)?e:[e]).map(function(e){if(t.contains(e))return e;var r=tM(e);return r&&t.contains(r)?r:(console.error("aria-hidden",e,"in not contained inside",t,". Doing nothing"),null)}).filter(function(e){return!!e});tP[r]||(tP[r]=new WeakMap);var i=tP[r],a=[],o=new Set,l=new Set(n),c=function(e){!(!e||o.has(e))&&(o.add(e),c(e.parentNode))};n.forEach(c);var d=function(e){!(!e||l.has(e))&&Array.prototype.forEach.call(e.children,function(e){if(o.has(e))d(e);else try{var t=e.getAttribute(s),n=null!==t&&"false"!==t,l=(tR.get(e)||0)+1,c=(i.get(e)||0)+1;tR.set(e,l),i.set(e,c),a.push(e),1===l&&n&&tA.set(e,!0),1===c&&e.setAttribute(r,"true"),n||e.setAttribute(s,"true")}catch(t){console.error("aria-hidden: cannot operate on ",e,t)}})};return d(t),o.clear(),tL++,function(){a.forEach(function(e){var t=tR.get(e)-1,n=i.get(e)-1;tR.set(e,t),i.set(e,n),t||(tA.has(e)||e.removeAttribute(s),tA.delete(e)),n||e.removeAttribute(r)}),--tL||(tR=new WeakMap,tR=new WeakMap,tA=new WeakMap,tP={})}},tD=function(e,t,r){void 0===r&&(r="data-aria-hidden");var s=Array.from(Array.isArray(e)?e:[e]),n=t||tO(e);return n?(s.push.apply(s,Array.from(n.querySelectorAll("[aria-live], script"))),tF(s,n,r,"aria-hidden")):function(){return null}},tI=function(){return(tI=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function tB(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&0>t.indexOf(s)&&(r[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,s=Object.getOwnPropertySymbols(e);n<s.length;n++)0>t.indexOf(s[n])&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(r[s[n]]=e[s[n]]);return r}Object.create;Object.create;var t$=("function"==typeof SuppressedError&&SuppressedError,"right-scroll-bar-position"),tU="width-before-scroll-bar";function tq(e,t){return"function"==typeof e?e(t):e&&(e.current=t),e}var tz="undefined"!=typeof window?d.useLayoutEffect:d.useEffect,tW=new WeakMap;function tH(e){return e}var tV=function(e){void 0===e&&(e={});var t,r,s,n,i=(t=null,void 0===r&&(r=tH),s=[],n=!1,{read:function(){if(n)throw Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return s.length?s[s.length-1]:null},useMedium:function(e){var t=r(e,n);return s.push(t),function(){s=s.filter(function(e){return e!==t})}},assignSyncMedium:function(e){for(n=!0;s.length;){var t=s;s=[],t.forEach(e)}s={push:function(t){return e(t)},filter:function(){return s}}},assignMedium:function(e){n=!0;var t=[];if(s.length){var r=s;s=[],r.forEach(e),t=s}var i=function(){var r=t;t=[],r.forEach(e)},a=function(){return Promise.resolve().then(i)};a(),s={push:function(e){t.push(e),a()},filter:function(e){return t=t.filter(e),s}}}});return i.options=tI({async:!0,ssr:!1},e),i}(),tG=function(){},tZ=d.forwardRef(function(e,t){var r,s,n,i,a=d.useRef(null),o=d.useState({onScrollCapture:tG,onWheelCapture:tG,onTouchMoveCapture:tG}),l=o[0],c=o[1],u=e.forwardProps,h=e.children,f=e.className,p=e.removeScrollBar,m=e.enabled,g=e.shards,x=e.sideCar,y=e.noRelative,v=e.noIsolation,b=e.inert,_=e.allowPinchZoom,w=e.as,j=e.gapMode,k=tB(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),N=(r=[a,t],s=function(e){return r.forEach(function(t){return tq(t,e)})},(n=(0,d.useState)(function(){return{value:null,callback:s,facade:{get current(){return n.value},set current(value){var e=n.value;e!==value&&(n.value=value,n.callback(value,e))}}}})[0]).callback=s,i=n.facade,tz(function(){var e=tW.get(i);if(e){var t=new Set(e),s=new Set(r),n=i.current;t.forEach(function(e){s.has(e)||tq(e,null)}),s.forEach(function(e){t.has(e)||tq(e,n)})}tW.set(i,r)},[r]),i),C=tI(tI({},k),l);return d.createElement(d.Fragment,null,m&&d.createElement(x,{sideCar:tV,removeScrollBar:p,shards:g,noRelative:y,noIsolation:v,inert:b,setCallbacks:c,allowPinchZoom:!!_,lockRef:a,gapMode:j}),u?d.cloneElement(d.Children.only(h),tI(tI({},C),{ref:N})):d.createElement(void 0===w?"div":w,tI({},C,{className:f,ref:N}),h))});tZ.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},tZ.classNames={fullWidth:tU,zeroRight:t$};var tX=function(e){var t=e.sideCar,r=tB(e,["sideCar"]);if(!t)throw Error("Sidecar: please provide `sideCar` property to import the right car");var s=t.read();if(!s)throw Error("Sidecar medium not found");return d.createElement(s,tI({},r))};tX.isSideCarExport=!0;var tJ=function(){var e=0,t=null;return{add:function(s){if(0==e&&(t=function(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=a||r.nc;return t&&e.setAttribute("nonce",t),e}())){var n,i;(n=t).styleSheet?n.styleSheet.cssText=s:n.appendChild(document.createTextNode(s)),i=t,(document.head||document.getElementsByTagName("head")[0]).appendChild(i)}e++},remove:function(){--e||!t||(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},tY=function(){var e=tJ();return function(t,r){d.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},tK=function(){var e=tY();return function(t){return e(t.styles,t.dynamic),null}},tQ={left:0,top:0,right:0,gap:0},t0=function(e){return parseInt(e||"",10)||0},t1=function(e){var t=window.getComputedStyle(document.body),r=t["padding"===e?"paddingLeft":"marginLeft"],s=t["padding"===e?"paddingTop":"marginTop"],n=t["padding"===e?"paddingRight":"marginRight"];return[t0(r),t0(s),t0(n)]},t2=function(e){if(void 0===e&&(e="margin"),"undefined"==typeof window)return tQ;var t=t1(e),r=document.documentElement.clientWidth,s=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,s-r+t[2]-t[0])}},t4=tK(),t3="data-scroll-locked",t5=function(e,t,r,s){var n=e.left,i=e.top,a=e.right,o=e.gap;return void 0===r&&(r="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(s,";\n   padding-right: ").concat(o,"px ").concat(s,";\n  }\n  body[").concat(t3,"] {\n    overflow: hidden ").concat(s,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(s,";"),"margin"===r&&"\n    padding-left: ".concat(n,"px;\n    padding-top: ").concat(i,"px;\n    padding-right: ").concat(a,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(o,"px ").concat(s,";\n    "),"padding"===r&&"padding-right: ".concat(o,"px ").concat(s,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(t$," {\n    right: ").concat(o,"px ").concat(s,";\n  }\n  \n  .").concat(tU," {\n    margin-right: ").concat(o,"px ").concat(s,";\n  }\n  \n  .").concat(t$," .").concat(t$," {\n    right: 0 ").concat(s,";\n  }\n  \n  .").concat(tU," .").concat(tU," {\n    margin-right: 0 ").concat(s,";\n  }\n  \n  body[").concat(t3,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(o,"px;\n  }\n")},t6=function(){var e=parseInt(document.body.getAttribute(t3)||"0",10);return isFinite(e)?e:0},t9=function(){d.useEffect(function(){return document.body.setAttribute(t3,(t6()+1).toString()),function(){var e=t6()-1;e<=0?document.body.removeAttribute(t3):document.body.setAttribute(t3,e.toString())}},[])},t8=function(e){var t=e.noRelative,r=e.noImportant,s=e.gapMode,n=void 0===s?"margin":s;t9();var i=d.useMemo(function(){return t2(n)},[n]);return d.createElement(t4,{styles:t5(i,!t,n,r?"":"!important")})},t7=!1;if("undefined"!=typeof window)try{var re=Object.defineProperty({},"passive",{get:function(){return t7=!0,!0}});window.addEventListener("test",re,re),window.removeEventListener("test",re,re)}catch(e){t7=!1}var rt=!!t7&&{passive:!1},rr=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return"hidden"!==r[t]&&(r.overflowY!==r.overflowX||"TEXTAREA"===e.tagName||"visible"!==r[t])},rs=function(e,t){var r=t.ownerDocument,s=t;do{if("undefined"!=typeof ShadowRoot&&s instanceof ShadowRoot&&(s=s.host),rn(e,s)){var n=ri(e,s);if(n[1]>n[2])return!0}s=s.parentNode}while(s&&s!==r.body);return!1},rn=function(e,t){return"v"===e?rr(t,"overflowY"):rr(t,"overflowX")},ri=function(e,t){return"v"===e?[t.scrollTop,t.scrollHeight,t.clientHeight]:[t.scrollLeft,t.scrollWidth,t.clientWidth]},ra=function(e,t,r,s,n){var i,a=(i=window.getComputedStyle(t).direction,"h"===e&&"rtl"===i?-1:1),o=a*s,l=r.target,c=t.contains(l),d=!1,u=o>0,h=0,f=0;do{if(!l)break;var p=ri(e,l),m=p[0],g=p[1]-p[2]-a*m;(m||g)&&rn(e,l)&&(h+=g,f+=m);var x=l.parentNode;l=x&&x.nodeType===Node.DOCUMENT_FRAGMENT_NODE?x.host:x}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return u&&(n&&1>Math.abs(h)||!n&&o>h)?d=!0:!u&&(n&&1>Math.abs(f)||!n&&-o>f)&&(d=!0),d},ro=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},rl=function(e){return[e.deltaX,e.deltaY]},rc=function(e){return e&&"current"in e?e.current:e},rd=0,ru=[];let rh=(tV.useMedium(function(e){var t=d.useRef([]),r=d.useRef([0,0]),s=d.useRef(),n=d.useState(rd++)[0],i=d.useState(tK)[0],a=d.useRef(e);d.useEffect(function(){a.current=e},[e]),d.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(n));var t=(function(e,t,r){if(r||2==arguments.length)for(var s,n=0,i=t.length;n<i;n++)!s&&n in t||(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))})([e.lockRef.current],(e.shards||[]).map(rc),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(n))}),function(){document.body.classList.remove("block-interactivity-".concat(n)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(n))})}}},[e.inert,e.lockRef.current,e.shards]);var o=d.useCallback(function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!a.current.allowPinchZoom;var n,i=ro(e),o=r.current,l="deltaX"in e?e.deltaX:o[0]-i[0],c="deltaY"in e?e.deltaY:o[1]-i[1],d=e.target,u=Math.abs(l)>Math.abs(c)?"h":"v";if("touches"in e&&"h"===u&&"range"===d.type)return!1;var h=rs(u,d);if(!h)return!0;if(h?n=u:(n="v"===u?"h":"v",h=rs(u,d)),!h)return!1;if(!s.current&&"changedTouches"in e&&(l||c)&&(s.current=n),!n)return!0;var f=s.current||n;return ra(f,t,e,"h"===f?l:c,!0)},[]),l=d.useCallback(function(e){if(ru.length&&ru[ru.length-1]===i){var r="deltaY"in e?rl(e):ro(e),s=t.current.filter(function(t){var s;return t.name===e.type&&(t.target===e.target||e.target===t.shadowParent)&&(s=t.delta)[0]===r[0]&&s[1]===r[1]})[0];if(s&&s.should){e.cancelable&&e.preventDefault();return}if(!s){var n=(a.current.shards||[]).map(rc).filter(Boolean).filter(function(t){return t.contains(e.target)});(n.length>0?o(e,n[0]):!a.current.noIsolation)&&e.cancelable&&e.preventDefault()}}},[]),c=d.useCallback(function(e,r,s,n){var i={name:e,delta:r,target:s,should:n,shadowParent:function(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}(s)};t.current.push(i),setTimeout(function(){t.current=t.current.filter(function(e){return e!==i})},1)},[]),u=d.useCallback(function(e){r.current=ro(e),s.current=void 0},[]),h=d.useCallback(function(t){c(t.type,rl(t),t.target,o(t,e.lockRef.current))},[]),f=d.useCallback(function(t){c(t.type,ro(t),t.target,o(t,e.lockRef.current))},[]);d.useEffect(function(){return ru.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",l,rt),document.addEventListener("touchmove",l,rt),document.addEventListener("touchstart",u,rt),function(){ru=ru.filter(function(e){return e!==i}),document.removeEventListener("wheel",l,rt),document.removeEventListener("touchmove",l,rt),document.removeEventListener("touchstart",u,rt)}},[]);var p=e.removeScrollBar,m=e.inert;return d.createElement(d.Fragment,null,m?d.createElement(i,{styles:"\n  .block-interactivity-".concat(n," {pointer-events: none;}\n  .allow-interactivity-").concat(n," {pointer-events: all;}\n")}):null,p?d.createElement(t8,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}),tX);var rf=d.forwardRef(function(e,t){return d.createElement(tZ,tI({},e,{ref:t,sideCar:rh}))});rf.classNames=tZ.classNames;var rp="Popover",[rm,rg]=(0,g.A)(rp,[td]),rx=td(),[ry,rv]=rm(rp),rb=e=>{let{__scopePopover:t,children:r,open:s,defaultOpen:n,onOpenChange:i,modal:a=!1}=e,o=rx(t),l=d.useRef(null),[u,h]=d.useState(!1),[f=!1,p]=(0,tT.i)({prop:s,defaultProp:n,onChange:i});return(0,c.jsx)(tf,{...o,children:(0,c.jsx)(ry,{scope:t,contentId:(0,M.B)(),triggerRef:l,open:f,onOpenChange:p,onOpenToggle:d.useCallback(()=>p(e=>!e),[p]),hasCustomAnchor:u,onCustomAnchorAdd:d.useCallback(()=>h(!0),[]),onCustomAnchorRemove:d.useCallback(()=>h(!1),[]),modal:a,children:r})})};rb.displayName=rp;var r_="PopoverAnchor";d.forwardRef((e,t)=>{let{__scopePopover:r,...s}=e,n=rv(r_,r),i=rx(r),{onCustomAnchorAdd:a,onCustomAnchorRemove:o}=n;return d.useEffect(()=>(a(),()=>o()),[a,o]),(0,c.jsx)(tm,{...i,...s,ref:t})}).displayName=r_;var rw="PopoverTrigger",rj=d.forwardRef((e,t)=>{let{__scopePopover:r,...s}=e,n=rv(rw,r),i=rx(r),a=(0,m.s)(t,n.triggerRef),o=(0,c.jsx)(x.sG.button,{type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":rL(n.open),...s,ref:a,onClick:(0,p.m)(e.onClick,n.onOpenToggle)});return n.hasCustomAnchor?o:(0,c.jsx)(tm,{asChild:!0,...i,children:o})});rj.displayName=rw;var rk="PopoverPortal",[rN,rC]=rm(rk,{forceMount:void 0}),rS=e=>{let{__scopePopover:t,forceMount:r,children:s,container:n}=e,i=rv(rk,t);return(0,c.jsx)(rN,{scope:t,forceMount:r,children:(0,c.jsx)(tS.C,{present:r||i.open,children:(0,c.jsx)(tC,{asChild:!0,container:n,children:s})})})};rS.displayName=rk;var rE="PopoverContent",rT=d.forwardRef((e,t)=>{let r=rC(rE,e.__scopePopover),{forceMount:s=r.forceMount,...n}=e,i=rv(rE,e.__scopePopover);return(0,c.jsx)(tS.C,{present:s||i.open,children:i.modal?(0,c.jsx)(rO,{...n,ref:t}):(0,c.jsx)(rR,{...n,ref:t})})});rT.displayName=rE;var rO=d.forwardRef((e,t)=>{let r=rv(rE,e.__scopePopover),s=d.useRef(null),n=(0,m.s)(t,s),i=d.useRef(!1);return d.useEffect(()=>{let e=s.current;if(e)return tD(e)},[]),(0,c.jsx)(rf,{as:tE.DX,allowPinchZoom:!0,children:(0,c.jsx)(rA,{...e,ref:n,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,p.m)(e.onCloseAutoFocus,e=>{e.preventDefault(),i.current||r.triggerRef.current?.focus()}),onPointerDownOutside:(0,p.m)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey;i.current=2===t.button||r},{checkForDefaultPrevented:!1}),onFocusOutside:(0,p.m)(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),rR=d.forwardRef((e,t)=>{let r=rv(rE,e.__scopePopover),s=d.useRef(!1),n=d.useRef(!1);return(0,c.jsx)(rA,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(s.current||r.triggerRef.current?.focus(),t.preventDefault()),s.current=!1,n.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(s.current=!0,"pointerdown"!==t.detail.originalEvent.type||(n.current=!0));let i=t.target;r.triggerRef.current?.contains(i)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&n.current&&t.preventDefault()}})}),rA=d.forwardRef((e,t)=>{let{__scopePopover:r,trapFocus:s,onOpenAutoFocus:n,onCloseAutoFocus:i,disableOutsidePointerEvents:a,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:u,onInteractOutside:h,...f}=e,p=rv(rE,r),m=rx(r);return d.useEffect(()=>{let e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??N()),document.body.insertAdjacentElement("beforeend",e[1]??N()),k++,()=>{1===k&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),k--}},[]),(0,c.jsx)(T,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:n,onUnmountAutoFocus:i,children:(0,c.jsx)(_,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:h,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:u,onDismiss:()=>p.onOpenChange(!1),children:(0,c.jsx)(tv,{"data-state":rL(p.open),role:"dialog",id:p.contentId,...m,...f,ref:t,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),rP="PopoverClose";function rL(e){return e?"open":"closed"}d.forwardRef((e,t)=>{let{__scopePopover:r,...s}=e,n=rv(rP,r);return(0,c.jsx)(x.sG.button,{type:"button",...s,ref:t,onClick:(0,p.m)(e.onClick,()=>n.onOpenChange(!1))})}).displayName=rP,d.forwardRef((e,t)=>{let{__scopePopover:r,...s}=e,n=rx(r);return(0,c.jsx)(tw,{...n,...s,ref:t})}).displayName="PopoverArrow";var rM=r(87677);let rF=d.forwardRef(({className:e,align:t="center",sideOffset:r=4,...s},n)=>(0,c.jsx)(rS,{children:(0,c.jsx)(rT,{ref:n,align:t,sideOffset:r,className:(0,rM.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s})}));rF.displayName=rT.displayName;var rD=r(65519);let rI=(0,rD.A)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),rB=(0,rD.A)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),r$=(0,rD.A)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),rU=(0,rD.A)("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),rq=(0,rD.A)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),rz=(0,rD.A)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),rW=(0,rD.A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),rH=(0,rD.A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),rV=(0,rD.A)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),rG=(0,rD.A)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),rZ=(0,rD.A)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),rX=(0,rD.A)("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),rJ=(0,rD.A)("Clapperboard",[["path",{d:"M20.2 6 3 11l-.9-2.4c-.3-1.1.3-2.2 1.3-2.5l13.5-4c1.1-.3 2.2.3 2.5 1.3Z",key:"1tn4o7"}],["path",{d:"m6.2 5.3 3.1 3.9",key:"iuk76l"}],["path",{d:"m12.4 3.4 3.1 4",key:"6hsd6n"}],["path",{d:"M3 11h18v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2Z",key:"ltgou9"}]]),rY=(0,rD.A)("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);var rK=r(40964),rQ=r(76338);let r0=(0,rD.A)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);function r1({currentPage:e,onPageChange:t,onSignOut:r,onGlobalChatClick:s,onAIChatClick:n,username:i,onThemeCycle:a,onHueCycle:o}){let[l,u]=(0,d.useState)(!1),[h,p]=(0,d.useState)(!1),m=[{id:"dashboard",label:"Dashboard",icon:rI},{id:"friends",label:"Friends",icon:rB},{id:"dms",label:"DMs",icon:r$},{id:"channels",label:"Channels",icon:rU},{id:"polls",label:"Polls",icon:rq},{id:"voice",label:"Voice",icon:rz},{id:"calendar",label:"Calendar",icon:rW},{id:"profile",label:"Profile",icon:rH},{id:"settings",label:"Settings",icon:rV},{id:"about",label:"About",icon:rG}],g=e=>{h||(p(!0),u(e),setTimeout(()=>p(!1),300))},x=e=>{"global"===e?s():"ai-chat"===e?n():t(e)};return(0,c.jsx)("div",{className:"fixed z-50 transition-all duration-300 top-4 left-1/2 -translate-x-1/2",children:(0,c.jsx)("div",{className:`bg-gradient-to-r from-gray-900 via-black to-gray-900 dark:from-gray-800 dark:via-gray-900 dark:to-gray-800 text-white rounded-full transition-all duration-300 ease-out backdrop-blur-md border border-gray-700 dark:border-gray-600 ${l?"px-4 py-2 min-w-[750px] shadow-2xl scale-105":"px-8 py-4 w-fit shadow-xl hover:shadow-2xl hover:scale-102"}`,onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),style:{background:l?"linear-gradient(135deg, rgba(17,24,39,0.95) 0%, rgba(0,0,0,0.98) 50%, rgba(17,24,39,0.95) 100%)":"linear-gradient(135deg, rgba(0,0,0,0.92) 0%, rgba(17,24,39,0.95) 100%)",boxShadow:l?"0 25px 50px -12px rgba(0, 0, 0, 0.8), 0 0 0 1px rgba(255, 255, 255, 0.1)":"0 20px 25px -5px rgba(0, 0, 0, 0.6), 0 0 0 1px rgba(255, 255, 255, 0.05)"},children:l?(0,c.jsxs)("div",{className:"flex items-center justify-center gap-1 py-1",children:[(0,c.jsx)(f.$,{variant:"ghost",size:"icon",onClick:()=>x("global"),className:"h-8 w-8 text-white hover:bg-gray-700/50 transition-all duration-200 hover:scale-105 rounded-full border border-gray-600/30",title:"Global",children:(0,c.jsx)(rZ,{className:"h-3 w-3"})}),(0,c.jsx)(f.$,{variant:"ghost",size:"icon",onClick:()=>x("ai-chat"),className:"h-8 w-8 text-white hover:bg-blue-700/50 transition-all duration-200 hover:scale-105 rounded-full border border-blue-600/30",title:"AI Chat",children:(0,c.jsx)(rX,{className:"h-3 w-3"})}),(0,c.jsx)("div",{className:"w-px h-5 bg-gray-600 mx-1"}),m.map(t=>{let r=t.icon,s="channels"===t.id||"dms"===t.id||"polls"===t.id;return(0,c.jsxs)(f.$,{variant:e===t.id?"secondary":"ghost",size:s?"sm":"icon",onClick:()=>x(t.id),className:`h-8 ${s?"px-3":"w-8"} transition-all duration-200 hover:scale-105 rounded-full ${e===t.id?"bg-white text-black hover:bg-gray-100 shadow-lg border border-gray-300":"text-white hover:bg-gray-700/50 border border-gray-600/30"}`,children:[(0,c.jsx)(r,{className:"h-3 w-3"}),s&&(0,c.jsx)("span",{className:"ml-1 text-xs hidden md:inline",children:t.label})]},t.id)}),(0,c.jsxs)(rb,{children:[(0,c.jsx)(rj,{asChild:!0,children:(0,c.jsxs)(f.$,{variant:"movies"===e||"games"===e?"secondary":"ghost",size:"sm",className:`h-8 px-3 transition-all duration-200 hover:scale-105 rounded-full ${"movies"===e||"games"===e?"bg-white text-black hover:bg-gray-100 shadow-lg border border-gray-300":"text-white hover:bg-gray-700/50 border border-gray-600/30"}`,title:"Entertainment",children:[(0,c.jsx)(rJ,{className:"h-3 w-3"}),(0,c.jsx)("span",{className:"ml-1 text-xs hidden md:inline",children:"Entertainment"})]})}),(0,c.jsx)(rF,{className:"w-44 p-2",align:"center",children:(0,c.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,c.jsxs)(f.$,{variant:"ghost",size:"sm",onClick:()=>x("movies"),className:"justify-start gap-2",children:[(0,c.jsx)(rJ,{className:"h-3 w-3"}),(0,c.jsx)("span",{className:"text-xs",children:"Movies"})]}),(0,c.jsxs)(f.$,{variant:"ghost",size:"sm",onClick:()=>x("games"),className:"justify-start gap-2",children:[(0,c.jsx)(rY,{className:"h-3 w-3"}),(0,c.jsx)("span",{className:"text-xs",children:"Games"})]})]})})]}),(0,c.jsx)("div",{className:"w-px h-5 bg-gray-600 mx-1"}),(0,c.jsx)(f.$,{variant:"ghost",size:"icon",onClick:a,className:"h-8 w-8 text-white hover:bg-purple-700/50 transition-all duration-200 hover:scale-105 rounded-full border border-purple-600/30",title:"Toggle Theme",children:(0,c.jsx)(rK.A,{className:"h-3 w-3"})}),(0,c.jsx)(f.$,{variant:"ghost",size:"icon",onClick:o,className:"h-8 w-8 text-white hover:bg-purple-700/50 transition-all duration-200 hover:scale-105 rounded-full border border-purple-600/30",title:"Cycle Color",children:(0,c.jsx)(rQ.A,{className:"h-3 w-3"})}),(0,c.jsx)(f.$,{variant:"ghost",size:"icon",onClick:r,className:"h-8 w-8 text-white hover:bg-red-700/50 transition-all duration-200 hover:scale-105 rounded-full border border-red-600/30",title:"Sign out",children:(0,c.jsx)(r0,{className:"h-3 w-3"})})]}):(0,c.jsxs)("div",{className:"flex items-center gap-3 transition-all duration-200",children:[(0,c.jsxs)("div",{className:"relative",children:[(0,c.jsx)("div",{className:"w-3 h-3 bg-green-400 rounded-full animate-pulse"}),(0,c.jsx)("div",{className:"absolute inset-0 w-3 h-3 bg-green-400 rounded-full animate-ping opacity-30"})]}),(0,c.jsx)("span",{className:"text-lg font-bold tracking-wide bg-gradient-to-r from-white to-gray-300 bg-clip-text text-transparent",children:"real."}),(0,c.jsxs)("span",{className:"text-xs text-gray-300 opacity-80 font-medium",children:["@",i]})]})})})}var r2=r(31457);let r4=(0,rD.A)("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);var r3=r(98004);let r5=(0,rD.A)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);var r6=r(2348),r9=r.n(r6);function r8({message:e,currentUserId:t,currentUserHasGold:r=!1,onAddReaction:s,onRemoveReaction:n,onReply:i,onDelete:a,onUserClick:o}){let[l,u]=(0,d.useState)(!1),[h,p]=(0,d.useState)(!1),m=e.sender_id===t,g=e.is_ai_response,x=t=>{e.reactions?.find(e=>e.emoji===t&&e.reacted_by_me)?n?.(e.id,t):s?.(e.id,t),u(!1)};return(0,c.jsx)("div",{className:`flex ${m?"justify-end":"justify-start"} mb-4 group`,children:(0,c.jsxs)("div",{className:`max-w-[70%] ${m?"order-2":"order-1"}`,children:[(0,c.jsxs)("div",{className:`flex items-center gap-2 mb-1 ${m?"justify-end":"justify-start"}`,children:[(0,c.jsx)("span",{className:`${g?"text-blue-500 font-medium":e.has_gold_animation?"bg-gradient-to-r from-yellow-400 via-yellow-500 to-yellow-600 bg-clip-text text-transparent animate-pulse font-medium":(e.name_color,"font-medium")} ${g||m?"":"cursor-pointer hover:underline"}`,style:e.name_color&&!e.has_gold_animation?{color:e.name_color}:{},onClick:()=>{!g&&o&&e.sender_id!==t&&o(e.sender_id)},children:g?"AI Assistant":e.username}),e.custom_title&&(0,c.jsx)("span",{className:"text-xs italic text-gray-500",children:e.custom_title}),(0,c.jsx)("span",{className:"text-xs text-gray-400",children:new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),e.parent_message_id&&e.parent_message_content&&e.parent_message_username&&(0,c.jsxs)("div",{className:"mb-1 p-2 bg-gray-100 dark:bg-gray-800 border-l-4 border-blue-400 rounded-r-md text-xs text-gray-600 dark:text-gray-300 italic",children:["Replying to @",e.parent_message_username,': "',e.parent_message_content,'"']}),(0,c.jsx)("div",{className:`px-4 py-2 rounded-2xl ${m?"bg-black dark:bg-gray-700 text-white":g?"bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-700":"bg-gray-100 dark:bg-gray-800"}`,children:"image"===e.message_type?(0,c.jsx)("div",{className:"relative max-w-sm",children:h?(0,c.jsx)("div",{className:"w-64 h-48 bg-gray-200 dark:bg-gray-700 rounded-lg flex items-center justify-center",children:(0,c.jsx)("span",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Failed to load image"})}):(0,c.jsx)(r9(),{src:e.content||"/placeholder.svg",alt:"Shared image",width:400,height:300,className:"rounded-lg object-cover max-h-80 w-auto",onError:()=>p(!0),priority:!1,quality:85})}):(0,c.jsx)("p",{className:"text-sm whitespace-pre-wrap break-words",children:e.content})}),e.reactions&&e.reactions.length>0&&(0,c.jsx)("div",{className:"flex gap-1 mt-1",children:e.reactions.map(e=>(0,c.jsxs)(f.$,{variant:"outline",size:"sm",className:`h-6 px-2 rounded-full text-xs ${e.reacted_by_me?"bg-blue-100 dark:bg-blue-900/50 border-blue-400":"bg-gray-50 dark:bg-gray-800"}`,onClick:()=>x(e.emoji),children:[e.emoji," ",e.count]},e.emoji))}),(0,c.jsxs)("div",{className:"flex items-center gap-2 mt-1 opacity-0 group-hover:opacity-100 transition-opacity relative",children:[(0,c.jsx)(f.$,{variant:"ghost",size:"sm",className:"h-6 px-2",onClick:()=>u(!l),children:(0,c.jsx)(r2.A,{className:"h-3 w-3"})}),i&&(0,c.jsx)(f.$,{variant:"ghost",size:"sm",className:"h-6 px-2",onClick:()=>i(e),children:(0,c.jsx)(r4,{className:"h-3 w-3"})}),(m||r)&&a&&(0,c.jsx)(f.$,{variant:"ghost",size:"sm",className:"h-6 px-2 text-red-500 hover:bg-red-500/10",onClick:()=>{confirm("Are you sure you want to delete this message?")&&a?.(e.id)},children:(0,c.jsx)(r3.A,{className:"h-3 w-3"})}),(0,c.jsx)(f.$,{variant:"ghost",size:"sm",className:"h-6 px-2",children:(0,c.jsx)(r5,{className:"h-3 w-3"})}),l&&(0,c.jsx)("div",{className:"absolute bottom-full left-0 mb-2 flex gap-1 p-2 bg-white dark:bg-gray-800 border rounded-lg shadow-lg z-10",children:["\uD83D\uDE00","\uD83D\uDE02","\uD83D\uDE0A","\uD83D\uDE0D","\uD83E\uDD29","\uD83E\uDD73","\uD83D\uDC4D","\uD83D\uDC4E","â¤ï¸","\uD83D\uDC94","\uD83D\uDD25","\uD83D\uDCAF","\uD83E\uDD14","\uD83E\uDD2F","\uD83D\uDE22","\uD83D\uDE21"].map(e=>(0,c.jsx)(f.$,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-lg",onClick:()=>x(e),children:e},e))})]})]})})}var r7=r(76576),se=r(82105);let st=(0,rD.A)("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]),sr=(0,rD.A)("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]),ss=(0,rD.A)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),sn=["\uD83D\uDE00","\uD83D\uDE02","\uD83D\uDE0A","\uD83D\uDE0D","\uD83E\uDD29","\uD83E\uDD73","\uD83D\uDC4D","\uD83D\uDC4E","â¤ï¸","\uD83D\uDC94","\uD83D\uDD25","\uD83D\uDCAF","\uD83E\uDD14","\uD83E\uDD2F","\uD83D\uDE22","\uD83D\uDE21"];function si({onSendMessage:e,placeholder:t="Type a message...",disabled:r=!1,replyToMessage:s,onClearReply:n}){let[i,a]=(0,d.useState)(""),[o,l]=(0,d.useState)(!1),u=(0,d.useRef)(null),h=(0,d.useRef)(null),p=async t=>{let r=t.target.files?.[0];if(r){l(!0);try{let t=await fetch(`/api/upload-image?filename=${encodeURIComponent(r.name)}`,{method:"POST",body:r});if(t.ok){let r=await t.json();e(r.url,s?.id,"image"),n?.()}else{let e=await t.json();console.error("Image upload failed:",e.error||t.statusText),alert(`Failed to upload image: ${e.error||t.statusText}`)}}catch(e){console.error("Image upload error:",e),alert("An unexpected error occurred during image upload.")}finally{l(!1),u.current&&(u.current.value="")}}},m=e=>{a(t=>t+e),h.current?.focus()};return(0,c.jsxs)("form",{onSubmit:t=>{t.preventDefault(),i.trim()&&!r&&(e(i.trim(),s?.id,"text"),a(""),n?.())},className:"flex flex-col p-4 border-t bg-white",children:[s&&(0,c.jsxs)("div",{className:"flex items-center justify-between p-2 mb-2 bg-blue-50 border border-blue-200 rounded-md text-sm text-blue-800",children:[(0,c.jsxs)("div",{className:"flex-1 truncate",children:["Replying to ",(0,c.jsxs)("span",{className:"font-semibold",children:["@",s.username]}),': "',s.content,'"']}),(0,c.jsx)(f.$,{variant:"ghost",size:"sm",onClick:n,className:"h-6 w-6 p-0 ml-2",children:(0,c.jsx)(se.A,{className:"h-4 w-4"})})]}),(0,c.jsxs)("div",{className:"flex items-center gap-2",children:[(0,c.jsx)("input",{type:"file",accept:"image/*",ref:u,onChange:p,className:"hidden",disabled:r||o}),(0,c.jsx)(f.$,{type:"button",variant:"ghost",size:"sm",className:"shrink-0",onClick:()=>u.current?.click(),disabled:r||o,children:o?(0,c.jsx)("span",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary"}):(0,c.jsx)(st,{className:"h-4 w-4"})}),(0,c.jsxs)("div",{className:"flex-1 relative",children:[(0,c.jsx)(r7.p,{ref:h,value:i,onChange:e=>a(e.target.value),placeholder:t,disabled:r||o,className:"pr-10 border-gray-200 focus:border-gray-400 transition-colors"}),(0,c.jsxs)(rb,{children:[(0,c.jsx)(rj,{asChild:!0,children:(0,c.jsx)(f.$,{type:"button",variant:"ghost",size:"sm",className:"absolute right-2 top-1/2 -translate-y-1/2 h-6 w-6 p-0",disabled:r||o,children:(0,c.jsx)(sr,{className:"h-4 w-4"})})}),(0,c.jsx)(rF,{className:"w-64 p-2 grid grid-cols-6 gap-1",children:sn.map(e=>(0,c.jsx)(f.$,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-lg",onClick:()=>m(e),children:e},e))})]})]}),(0,c.jsx)(f.$,{type:"submit",disabled:!i.trim()||r||o,size:"sm",className:"shrink-0 bg-black hover:bg-gray-800 text-white",children:(0,c.jsx)(ss,{className:"h-4 w-4"})})]})]})}var sa=r(84962);let so=(0,rD.A)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);function sl({chatType:e,chatId:t,chatName:r,currentUserId:s,onUserClick:n}){let[i,a]=(0,d.useState)([]),[o,l]=(0,d.useState)(!0),[u,h]=(0,d.useState)(!1),[p,m]=(0,d.useState)(null),[g,x]=(0,d.useState)(!1),[y,v]=(0,d.useState)(!1),b=(0,d.useRef)(null),_=(0,d.useRef)(null),w=(0,d.useRef)([]),{user:j}=(0,sa.J)(),k=()=>{b.current?.scrollIntoView({behavior:"smooth"}),x(!1),v(!1)},N=(0,d.useCallback)(async()=>{try{let n=new URLSearchParams({chatType:e});t&&n.append("chatId",t);let i=await fetch(`/api/messages?${n}`);if(!i.ok){console.error("Failed to fetch messages:",i.status,await i.text());return}let o=await i.json();if(o.messages){let e=new Set(w.current.map(e=>e.id)),t=o.messages.filter(t=>!e.has(t.id));a(o.messages),t.length>0&&g&&v(!0),j&&j.notifications_enabled&&t.length>0&&t.forEach(e=>{if(e.sender_id!==s){let t="dm"===e.chat_type?`New DM from ${e.username}`:"group"===e.chat_type||"channel"===e.chat_type?`New message in ${r}`:`New global message from ${e.username}`;if("Notification"in window&&"granted"===Notification.permission)try{let r=new Notification(t,{body:"image"===e.message_type?"\uD83D\uDCF7 Sent an image":e.content.length>100?e.content.substring(0,100)+"...":e.content,icon:"/favicon.png",tag:`${e.chat_type}-${e.chat_id||"global"}`,badge:"/favicon.png",requireInteraction:!1,silent:!1});setTimeout(()=>{r.close()},5e3),r.onclick=()=>{window.focus(),r.close()}}catch(e){console.warn("Failed to show notification:",e)}}})}}catch(e){console.error("Failed to fetch messages:",e)}finally{l(!1)}},[e,t,j,s,r,g]),C=async(r,s,n="text")=>{h(!0);try{let i=await fetch("/api/messages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:r,chatType:e,chatId:t,parentMessageId:s,messageType:n})});if(i.ok){let e=!_.current||_.current.scrollHeight-_.current.scrollTop-_.current.clientHeight<100;await N(),e&&setTimeout(()=>{k()},100)}else console.error("Failed to send message:",i.status,await i.text())}catch(e){console.error("Failed to send message:",e)}finally{h(!1)}},S=async(e,t)=>{try{let r=await fetch(`/api/messages/${e}/reactions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({emoji:t})});r.ok?N():console.error("Failed to add reaction:",r.status,await r.text())}catch(e){console.error("Failed to add reaction:",e)}},E=async(e,t)=>{try{let r=await fetch(`/api/messages/${e}/reactions`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({emoji:t})});r.ok?N():console.error("Failed to remove reaction:",r.status,await r.text())}catch(e){console.error("Failed to remove reaction:",e)}},T=e=>{m(e)},O=async e=>{try{let t=await fetch(`/api/messages/${e}/delete`,{method:"DELETE"});if(t.ok)N();else{let e=await t.json();console.error("Failed to delete message:",e.error),alert(`Failed to delete message: ${e.error}`)}}catch(e){console.error("Failed to delete message:",e),alert("An error occurred while deleting the message")}};return o?(0,c.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,c.jsx)("div",{className:"text-muted-foreground animate-pulse",children:"Loading messages..."})}):(0,c.jsxs)("div",{className:"flex-1 flex flex-col h-full bg-card rounded-lg shadow-md overflow-hidden border relative",children:[(0,c.jsxs)("div",{className:"border-b p-4 bg-card",children:[(0,c.jsx)("h2",{className:"font-medium text-card-foreground",children:r}),(0,c.jsx)("p",{className:"text-sm text-muted-foreground",children:"global"===e?"Global chat â€¢ Everyone can see your messages":"group"===e?"Group chat":"channel"===e?"Channel":"Direct message"})]}),(0,c.jsxs)("div",{ref:_,className:"flex-1 overflow-y-auto p-4 space-y-1 bg-background",onScroll:()=>{if(!_.current)return;let{scrollTop:e,scrollHeight:t,clientHeight:r}=_.current,s=t-e-r<100;x(!s),s&&v(!1)},children:[0===i.length?(0,c.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,c.jsxs)("div",{className:"text-center text-muted-foreground",children:[(0,c.jsx)("p",{children:"No messages yet"}),(0,c.jsx)("p",{className:"text-sm mt-1",children:"Start the conversation!"})]})}):i.map(e=>(0,c.jsx)(r8,{message:e,currentUserId:s,currentUserHasGold:j?.has_gold_animation||!1,onAddReaction:S,onRemoveReaction:E,onReply:T,onDelete:O,onUserClick:n},e.id)),(0,c.jsx)("div",{ref:b})]}),g&&(0,c.jsx)("div",{className:"absolute bottom-20 right-4 z-10",children:(0,c.jsxs)(f.$,{onClick:k,className:`rounded-full w-12 h-12 shadow-lg transition-all duration-200 hover:scale-110 ${y?"bg-blue-500 hover:bg-blue-600 animate-pulse":"bg-gray-600 hover:bg-gray-700"}`,size:"sm",children:[(0,c.jsx)(so,{className:"h-5 w-5"}),y&&(0,c.jsx)("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-ping"})]})}),(0,c.jsx)("div",{className:"bg-card border-t",children:(0,c.jsx)(si,{onSendMessage:C,placeholder:`Message ${r}...`,disabled:u,replyToMessage:p?{id:p.id,content:p.content,username:p.username}:void 0,onClearReply:()=>{m(null)}})})]})}var sc=r(53380);let sd=(0,rD.A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var su=r(8757);let sh=(0,rD.A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);function sf({currentUserId:e,onStartDM:t}){let[r,s]=(0,d.useState)(""),[n,i]=(0,d.useState)([]),[a,o]=(0,d.useState)([]),[l,u]=(0,d.useState)(!1),[h,p]=(0,d.useState)(!1),[m,g]=(0,d.useState)(null),[x,y]=(0,d.useState)(Date.now()),v=(0,d.useCallback)(async()=>{try{u(!0);let e=await fetch("/api/friends");if(e.ok){let t=await e.json();o(t.friendships),y(Date.now())}else console.error("Failed to fetch friendships:",e.status,await e.text())}catch(e){console.error("Failed to fetch friendships:",e)}finally{u(!1)}},[]),b=async e=>{g(null);try{console.log("[friends-page] Sending friend request to:",e);let t=await fetch("/api/friends",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({addresseeId:e})});if(t.ok)console.log("[friends-page] Friend request sent successfully"),v();else{let e=await t.json();console.error("Failed to send friend request:",e.error),g(e.error||"Failed to send friend request.")}}catch(e){console.error("Failed to send friend request:",e),g(e.message||"Something went wrong.")}},_=async(e,t)=>{try{let r=await fetch(`/api/friends/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:t})});if(r.ok)v();else{let e=await r.json();console.error("Failed to respond to friend request:",e.error||r.statusText),alert(`Failed to respond: ${e.error||r.statusText}`)}}catch(e){console.error("Failed to respond to friend request:",e),alert("An unexpected error occurred while responding to request.")}},w=(e,t)=>t?"bg-gradient-to-r from-yellow-400 via-yellow-500 to-yellow-600 bg-clip-text text-transparent animate-pulse font-medium":e?{color:e}:{},j=e=>{let t=C.some(t=>t.requester_id===e.id||t.addressee_id===e.id),r=k.some(t=>t.requester_id===e.id),s=N.some(t=>t.addressee_id===e.id);return t?{text:"Friends",disabled:!0,variant:"secondary"}:r?{text:"Accept?",disabled:!1,variant:"default"}:s?{text:"Pending",disabled:!0,variant:"outline"}:{text:"Add Friend",disabled:!1,variant:"default"}},k=a.filter(t=>"pending"===t.status&&t.addressee_id===e),N=a.filter(t=>"pending"===t.status&&t.requester_id===e),C=a.filter(e=>"accepted"===e.status);return(0,c.jsxs)("div",{className:"space-y-6",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsx)("h2",{className:"text-2xl font-bold",children:"Friends"}),(0,c.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,c.jsx)(sd,{className:"h-4 w-4 animate-spin"}),(0,c.jsxs)("span",{children:["Last updated: ",new Date(x).toLocaleTimeString()]})]})]}),(0,c.jsxs)(sc.Zp,{children:[(0,c.jsx)(sc.aR,{children:(0,c.jsxs)(sc.ZB,{className:"flex items-center gap-2",children:[(0,c.jsx)(su.A,{className:"h-5 w-5"}),"Find Friends"]})}),(0,c.jsxs)(sc.Wu,{className:"space-y-4",children:[(0,c.jsxs)("div",{className:"flex gap-2",children:[(0,c.jsx)(r7.p,{value:r,onChange:e=>s(e.target.value),placeholder:"Search by username...",className:"transition-all duration-200 focus:scale-102"}),h&&(0,c.jsx)("div",{className:"flex items-center px-3",children:(0,c.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary"})})]}),m&&(0,c.jsx)("div",{className:"text-sm text-destructive text-center p-2 bg-destructive/10 rounded-md animate-fadeIn",children:m}),n.length>0&&(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Found ",n.length," user(s)"]}),n.map(e=>{let t=j(e);return(0,c.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-accent/50 transition-all duration-200",children:[(0,c.jsxs)("span",{className:e.has_gold_animation?w(void 0,!0):"",style:e.has_gold_animation?{}:w(e.name_color),children:["@",e.username]}),(0,c.jsxs)(f.$,{size:"sm",variant:t.variant,onClick:()=>b(e.id),className:"transition-all duration-200 hover:scale-105",disabled:t.disabled,children:[(0,c.jsx)(rB,{className:"h-4 w-4 mr-1"}),t.text]})]},e.id)})]}),r.trim()&&0===n.length&&!h&&!m&&(0,c.jsxs)("div",{className:"text-center py-4 text-gray-500",children:['No users found for "',r,'"']})]})]}),k.length>0&&(0,c.jsxs)(sc.Zp,{className:"border-primary/20",children:[(0,c.jsx)(sc.aR,{children:(0,c.jsxs)(sc.ZB,{className:"text-primary",children:["Friend Requests (",k.length,")"]})}),(0,c.jsx)(sc.Wu,{children:(0,c.jsx)("div",{className:"space-y-2",children:k.map(e=>(0,c.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-primary/5",children:[(0,c.jsxs)("span",{className:e.requester_has_gold?w(void 0,!0):"",style:e.requester_has_gold?{}:w(e.requester_name_color),children:["@",e.requester_username]}),(0,c.jsxs)("div",{className:"flex gap-2",children:[(0,c.jsx)(f.$,{size:"sm",onClick:()=>_(e.id,"accepted"),className:"bg-green-600 hover:bg-green-700 transition-all duration-200 hover:scale-105",children:(0,c.jsx)(sh,{className:"h-4 w-4"})}),(0,c.jsx)(f.$,{size:"sm",variant:"destructive",onClick:()=>_(e.id,"blocked"),className:"transition-all duration-200 hover:scale-105",children:(0,c.jsx)(se.A,{className:"h-4 w-4"})})]})]},e.id))})})]}),N.length>0&&(0,c.jsxs)(sc.Zp,{children:[(0,c.jsx)(sc.aR,{children:(0,c.jsxs)(sc.ZB,{children:["Sent Requests (",N.length,")"]})}),(0,c.jsx)(sc.Wu,{children:(0,c.jsx)("div",{className:"space-y-2",children:N.map(e=>(0,c.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,c.jsxs)("span",{className:e.addressee_has_gold?w(void 0,!0):"",style:e.addressee_has_gold?{}:w(e.addressee_name_color),children:["@",e.addressee_username]}),(0,c.jsx)("span",{className:"text-sm text-muted-foreground animate-pulse",children:"Pending"})]},e.id))})})]}),(0,c.jsxs)(sc.Zp,{children:[(0,c.jsx)(sc.aR,{children:(0,c.jsxs)(sc.ZB,{children:["Friends (",C.length,")"]})}),(0,c.jsx)(sc.Wu,{children:l?(0,c.jsx)("div",{className:"text-center text-muted-foreground py-4 animate-pulse",children:"Loading friends..."}):0===C.length?(0,c.jsx)("p",{className:"text-muted-foreground text-center py-4",children:"No friends yet. Start by searching for users above!"}):(0,c.jsx)("div",{className:"space-y-2",children:C.map(r=>{let s=r.requester_id===e?{id:r.addressee_id,username:r.addressee_username,name_color:r.addressee_name_color,has_gold:r.addressee_has_gold}:{id:r.requester_id,username:r.requester_username,name_color:r.requester_name_color,has_gold:r.requester_has_gold};return(0,c.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-accent/50 transition-colors duration-200",children:[(0,c.jsxs)("span",{className:s.has_gold?w(void 0,!0):"",style:s.has_gold?{}:w(s.name_color),children:["@",s.username]}),(0,c.jsxs)(f.$,{size:"sm",onClick:()=>t(s.id,s.username),className:"transition-all duration-200 hover:scale-105",children:[(0,c.jsx)(r4,{className:"h-4 w-4 mr-1"}),"Message"]})]},r.id)})})})]})]})}function sp({currentUserId:e,onSelectDM:t}){let[r,s]=(0,d.useState)([]),[n,i]=(0,d.useState)(!0),[a,o]=(0,d.useState)(Date.now());(0,d.useCallback)(async()=>{try{let e=await fetch("/api/dms");if(e.ok){let t=await e.json();s(t.dms),o(Date.now())}}catch(e){console.error("Failed to fetch DMs:",e)}finally{i(!1)}},[]);let l=(e,t)=>t?"bg-gradient-to-r from-yellow-400 via-yellow-500 to-yellow-600 bg-clip-text text-transparent animate-pulse font-medium":e?{color:e}:{},u=e=>{let t=new Date(e),r=(new Date().getTime()-t.getTime())/36e5;return r<1?"Just now":r<24?t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):t.toLocaleDateString()};return n?(0,c.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,c.jsx)("div",{className:"text-muted-foreground animate-pulse",children:"Loading DMs..."})}):(0,c.jsxs)("div",{className:"space-y-6",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsx)("h2",{className:"text-2xl font-bold",children:"Direct Messages"}),(0,c.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,c.jsx)(sd,{className:"h-4 w-4 animate-spin"}),(0,c.jsxs)("span",{children:["Last updated: ",new Date(a).toLocaleTimeString()]})]})]}),(0,c.jsxs)(sc.Zp,{className:"animate-fadeIn",children:[(0,c.jsx)(sc.aR,{children:(0,c.jsxs)(sc.ZB,{className:"flex items-center gap-2",children:[(0,c.jsx)(r4,{className:"h-5 w-5"}),"Direct Messages"]})}),(0,c.jsx)(sc.Wu,{children:0===r.length?(0,c.jsxs)("div",{className:"text-center py-8",children:[(0,c.jsx)(r4,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4 animate-pulse"}),(0,c.jsx)("p",{className:"text-muted-foreground",children:"No direct messages yet"}),(0,c.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Start a conversation with a friend!"})]}):(0,c.jsx)("div",{className:"space-y-2",children:r.map(e=>(0,c.jsxs)("div",{className:"group flex items-center justify-between p-3 border rounded-lg hover:bg-accent/50 transition-all duration-200 hover:scale-102 animate-slideIn",children:[(0,c.jsxs)("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>t(e.friend_id,e.friend_username),children:[(0,c.jsx)("div",{className:"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center",children:(0,c.jsx)("span",{className:"text-sm font-medium text-primary",children:e.friend_username.charAt(0).toUpperCase()})}),(0,c.jsxs)("div",{children:[(0,c.jsxs)("span",{className:e.friend_has_gold?l(void 0,!0):"",style:e.friend_has_gold?{}:l(e.friend_name_color),children:["@",e.friend_username]}),(0,c.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Last message: ",u(e.last_message_at)]})]})]}),(0,c.jsxs)("div",{className:"flex items-center gap-2",children:[(0,c.jsx)(f.$,{size:"icon",variant:"ghost",onClick:()=>t(e.friend_id,e.friend_username),title:"Message",children:(0,c.jsx)(r$,{className:"h-4 w-4"})}),(0,c.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"})]})]},e.friend_id))})})]})]})}let sm=d.forwardRef(({className:e,...t},r)=>(0,c.jsx)("textarea",{className:(0,rM.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...t}));sm.displayName="Textarea";var sg=r(94222),sx="Checkbox",[sy,sv]=(0,g.A)(sx),[sb,s_]=sy(sx),sw=d.forwardRef((e,t)=>{let{__scopeCheckbox:r,name:s,checked:n,defaultChecked:i,required:a,disabled:o,value:l="on",onCheckedChange:u,form:h,...f}=e,[g,y]=d.useState(null),v=(0,m.s)(t,e=>y(e)),b=d.useRef(!1),_=!g||h||!!g.closest("form"),[w=!1,j]=(0,tT.i)({prop:n,defaultProp:i,onChange:u}),k=d.useRef(w);return d.useEffect(()=>{let e=g?.form;if(e){let t=()=>j(k.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[g,j]),(0,c.jsxs)(sb,{scope:r,state:w,disabled:o,children:[(0,c.jsx)(x.sG.button,{type:"button",role:"checkbox","aria-checked":sC(w)?"mixed":w,"aria-required":a,"data-state":sS(w),"data-disabled":o?"":void 0,disabled:o,value:l,...f,ref:v,onKeyDown:(0,p.m)(e.onKeyDown,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,p.m)(e.onClick,e=>{j(e=>!!sC(e)||!e),_&&(b.current=e.isPropagationStopped(),b.current||e.stopPropagation())})}),_&&(0,c.jsx)(sN,{control:g,bubbles:!b.current,name:s,value:l,checked:w,required:a,disabled:o,form:h,style:{transform:"translateX(-100%)"},defaultChecked:!sC(i)&&i})]})});sw.displayName=sx;var sj="CheckboxIndicator",sk=d.forwardRef((e,t)=>{let{__scopeCheckbox:r,forceMount:s,...n}=e,i=s_(sj,r);return(0,c.jsx)(tS.C,{present:s||sC(i.state)||!0===i.state,children:(0,c.jsx)(x.sG.span,{"data-state":sS(i.state),"data-disabled":i.disabled?"":void 0,...n,ref:t,style:{pointerEvents:"none",...e.style}})})});sk.displayName=sj;var sN=e=>{let{control:t,checked:r,bubbles:s=!0,defaultChecked:n,...i}=e,a=d.useRef(null),o=(0,sg.Z)(r),l=(0,to.X)(t);d.useEffect(()=>{let e=a.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(o!==r&&t){let n=new Event("click",{bubbles:s});e.indeterminate=sC(r),t.call(e,!sC(r)&&r),e.dispatchEvent(n)}},[o,r,s]);let u=d.useRef(!sC(r)&&r);return(0,c.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n??u.current,...i,tabIndex:-1,ref:a,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function sC(e){return"indeterminate"===e}function sS(e){return sC(e)?"indeterminate":e?"checked":"unchecked"}let sE=d.forwardRef(({className:e,...t},r)=>(0,c.jsx)(sw,{ref:r,className:(0,rM.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:(0,c.jsx)(sk,{className:(0,rM.cn)("flex items-center justify-center text-current"),children:(0,c.jsx)(sh,{className:"h-4 w-4"})})}));sE.displayName=sw.displayName;let sT=(0,rD.A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var sO=r(78109);let sR=(0,rD.A)("Vote",[["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}],["path",{d:"M5 7c0-1.1.9-2 2-2h10a2 2 0 0 1 2 2v12H5V7Z",key:"1ezoue"}],["path",{d:"M22 19H2",key:"nuriw5"}]]),sA=(0,rD.A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);function sP({currentUserId:e,userSignupCode:t}){let[r,s]=(0,d.useState)([]),[n,i]=(0,d.useState)([]),[a,o]=(0,d.useState)(!1),[l,u]=(0,d.useState)(!0),[h,p]=(0,d.useState)(null),[m,g]=(0,d.useState)(""),[x,y]=(0,d.useState)(""),[v,b]=(0,d.useState)(["",""]),[_,w]=(0,d.useState)(!1),[j,k]=(0,d.useState)([]),[N,C]=(0,d.useState)(""),S=(0,d.useCallback)(async()=>{try{let e=await fetch("/api/polls");if(e.ok){let t=await e.json();console.log("[polls-page] Fetched polls:",t.polls),s(t.polls)}else console.error("[polls-page] Failed to fetch polls:",e.status)}catch(e){console.error("Failed to fetch polls:",e)}finally{u(!1)}},[]);(0,d.useCallback)(async()=>{try{let e=await fetch("/api/friends/accepted");if(e.ok){let t=await e.json();i(t.friends)}}catch(e){console.error("Failed to fetch friends:",e)}},[]);let E=async()=>{if(m.trim()&&!(v.filter(e=>e.trim()).length<2))try{let e=await fetch("/api/polls",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:m.trim(),description:x.trim()||void 0,options:v.filter(e=>e.trim()),is_public:_,shared_with:j,expires_at:N||void 0})});if(e.ok)o(!1),R(),S();else{let t=await e.json();console.error("Failed to create poll:",t.error),alert(`Failed to create poll: ${t.error}`)}}catch(e){console.error("Failed to create poll:",e),alert("An unexpected error occurred while creating the poll.")}},T=async e=>{if(confirm("Are you sure you want to delete this poll? This action cannot be undone."))try{let t=await fetch(`/api/polls/${e}`,{method:"DELETE"});if(t.ok)S();else{let e=await t.json();alert(`Failed to delete poll: ${e.error||t.statusText}`)}}catch(e){console.error("Failed to delete poll:",e),alert("An unexpected error occurred while deleting the poll.")}},O=async(e,t)=>{console.log(`[polls-page] Voting on poll ${e} with option ${t}`),p(e);try{let r=await fetch(`/api/polls/${e}/vote`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({option_index:t})});if(r.ok)console.log("[polls-page] Vote successful, refreshing polls"),await S();else{let e=await r.json();console.error("Failed to vote:",e.error),alert(`Failed to vote: ${e.error||"Unknown error"}`)}}catch(e){console.error("Failed to vote:",e),alert("An unexpected error occurred while voting.")}finally{p(null)}},R=()=>{g(""),y(""),b(["",""]),w(!1),k([]),C("")},A=e=>{v.length>2&&b(v.filter((t,r)=>r!==e))},P=(e,t)=>{let r=[...v];r[e]=t,b(r)},L=(e,t)=>t?"bg-gradient-to-r from-yellow-400 via-yellow-500 to-yellow-600 bg-clip-text text-transparent animate-pulse font-medium":e?{color:e}:{},M=e=>new Date(e).toLocaleDateString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),F=e=>!!e&&new Date(e)<new Date,D=(e,t)=>0===t?0:Math.round(e/t*100);return l?(0,c.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,c.jsx)("div",{className:"text-muted-foreground animate-pulse",children:"Loading polls..."})}):(0,c.jsxs)("div",{className:"space-y-6 relative z-10",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsx)("h2",{className:"text-2xl font-bold",children:"Polls"}),(0,c.jsxs)(f.$,{onClick:()=>o(!0),className:"hover-lift hover-glow",children:[(0,c.jsx)(sT,{className:"h-4 w-4 mr-2"}),"Create Poll"]})]}),(0,c.jsx)("div",{className:"grid gap-4",children:0===r.length?(0,c.jsx)(sc.Zp,{className:"glass-effect animate-fadeIn",children:(0,c.jsxs)(sc.Wu,{className:"text-center py-8",children:[(0,c.jsx)(rq,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,c.jsx)("p",{className:"text-muted-foreground",children:"No polls yet"}),(0,c.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Create your first poll to gather opinions!"})]})}):r.map((t,r)=>{let s=void 0!==t.user_response;return(0,c.jsxs)(sc.Zp,{className:`glass-effect hover-lift animate-fadeIn ${F(t.expires_at)?"opacity-75":""}`,style:{animationDelay:`${.1*r}s`},children:[(0,c.jsxs)(sc.aR,{children:[(0,c.jsx)("div",{className:"flex items-start justify-between",children:(0,c.jsxs)("div",{className:"flex-1",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsx)(sc.ZB,{className:"text-lg",children:t.title}),(0,c.jsxs)("div",{className:"flex items-center gap-2",children:[(0,c.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[t.is_public?(0,c.jsx)(rZ,{className:"h-3 w-3 hue-accent"}):(0,c.jsx)(sO.A,{className:"h-3 w-3"}),(0,c.jsx)(sR,{className:"h-3 w-3"}),(0,c.jsxs)("span",{children:[t.total_responses," votes"]}),t.expires_at&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(sA,{className:"h-3 w-3"}),(0,c.jsx)("span",{className:F(t.expires_at)?"text-red-500":"",children:F(t.expires_at)?"Expired":`Expires ${M(t.expires_at)}`})]})]}),t.creator_id===e&&(0,c.jsx)(f.$,{variant:"ghost",size:"sm",onClick:()=>T(t.id),className:"text-red-500 hover:bg-red-500/10 h-6 w-6 p-0",title:"Delete Poll",children:(0,c.jsx)(r3.A,{className:"h-3 w-3"})})]})]}),t.description&&(0,c.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:t.description})]})}),(0,c.jsxs)("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[(0,c.jsxs)("span",{className:t.creator_username?L(void 0,!1):"",children:["by @",t.creator_username]}),(0,c.jsxs)("span",{children:[void 0!==t.user_response?"You voted":"Click to vote"," â€¢ ",t.total_responses," total votes"]})]})]}),(0,c.jsxs)(sc.Wu,{className:"space-y-3",children:[t.options.map((e,r)=>{let n=t.results.find(e=>e.option_index===r),i=n?.count||0,a=D(i,t.total_responses),o=t.user_response===r,l=h===t.id;return(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsxs)(f.$,{variant:o?"default":"outline",className:`flex-1 justify-start hover-lift transition-all duration-200 ${o?"hue-shadow":""} ${F(t.expires_at)?"":"cursor-pointer"}`,onClick:()=>!F(t.expires_at)&&!l&&O(t.id,r),disabled:F(t.expires_at)||l,children:[(0,c.jsx)("span",{className:"flex-1 text-left",children:e}),l&&(0,c.jsx)("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin ml-2"})]}),s&&(0,c.jsxs)("span",{className:"text-sm text-muted-foreground ml-3 min-w-[60px] text-right",children:[i," (",a,"%)"]})]}),s&&(0,c.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 overflow-hidden",children:(0,c.jsx)("div",{className:`h-2 rounded-full transition-all duration-700 ease-out ${o?"bg-gradient-to-r from-blue-500 to-purple-500 hue-shadow":"bg-gray-400 dark:bg-gray-600"}`,style:{width:`${a}%`,backgroundColor:o?"hsl(var(--hue) 60% 50%)":void 0}})})]},r)}),!F(t.expires_at)&&(0,c.jsxs)("p",{className:"text-xs text-muted-foreground text-center mt-4 opacity-70",children:["Click on an option to ",s?"change your vote":"cast your vote"]})]})]},t.id)})}),a&&(0,c.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,c.jsxs)(sc.Zp,{className:"w-full max-w-md max-h-[90vh] overflow-y-auto glass-effect animate-fadeIn",children:[(0,c.jsxs)(sc.aR,{className:"flex flex-row items-center justify-between",children:[(0,c.jsx)(sc.ZB,{children:"Create Poll"}),(0,c.jsx)(f.$,{variant:"ghost",size:"sm",onClick:()=>o(!1),children:(0,c.jsx)(se.A,{className:"h-4 w-4"})})]}),(0,c.jsxs)(sc.Wu,{className:"space-y-4",children:[(0,c.jsx)("div",{children:(0,c.jsx)(r7.p,{value:m,onChange:e=>g(e.target.value),placeholder:"Poll title",className:"focus:hue-shadow"})}),(0,c.jsx)("div",{children:(0,c.jsx)(sm,{value:x,onChange:e=>y(e.target.value),placeholder:"Description (optional)",rows:2,className:"focus:hue-shadow"})}),(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsx)("label",{className:"text-sm font-medium",children:"Options"}),v.map((e,t)=>(0,c.jsxs)("div",{className:"flex gap-2",children:[(0,c.jsx)(r7.p,{value:e,onChange:e=>P(t,e.target.value),placeholder:`Option ${t+1}`,className:"focus:hue-shadow"}),v.length>2&&(0,c.jsx)(f.$,{variant:"ghost",size:"sm",onClick:()=>A(t),children:(0,c.jsx)(se.A,{className:"h-4 w-4"})})]},t)),v.length<6&&(0,c.jsxs)(f.$,{variant:"outline",size:"sm",onClick:()=>{v.length<6&&b([...v,""])},className:"hover-lift bg-transparent",children:[(0,c.jsx)(sT,{className:"h-4 w-4 mr-1"}),"Add Option"]})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)(r7.p,{type:"datetime-local",value:N,onChange:e=>C(e.target.value),className:"focus:hue-shadow"}),(0,c.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Optional expiration date"})]}),"qwea"===t&&(0,c.jsxs)("div",{className:"flex items-center space-x-2 p-3 hue-bg rounded-lg",children:[(0,c.jsx)(sE,{id:"public",checked:_,onCheckedChange:w}),(0,c.jsx)("label",{htmlFor:"public",className:"text-sm font-medium",children:"Share with all users (public poll)"})]}),!_&&(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Share with friends"}),(0,c.jsx)("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:n.map(e=>(0,c.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,c.jsx)(sE,{id:e.friend_id,checked:j.includes(e.friend_id),onCheckedChange:t=>{t?k([...j,e.friend_id]):k(j.filter(t=>t!==e.friend_id))}}),(0,c.jsx)("label",{htmlFor:e.friend_id,className:"text-sm cursor-pointer",style:e.friend_has_gold?{}:L(e.friend_name_color),children:(0,c.jsxs)("span",{className:L(e.friend_name_color,e.friend_has_gold),children:["@",e.friend_username]})})]},e.friend_id))})]}),(0,c.jsxs)("div",{className:"flex gap-2",children:[(0,c.jsx)(f.$,{onClick:E,disabled:!m.trim()||v.filter(e=>e.trim()).length<2,className:"flex-1 hover-glow",children:"Create Poll"}),(0,c.jsx)(f.$,{variant:"outline",onClick:()=>o(!1),children:"Cancel"})]})]})]})})]})}function sL({currentUserId:e,userSignupCode:t,onSelectChannel:r}){let[s,n]=(0,d.useState)([]),[i,a]=(0,d.useState)(!0),[o,l]=(0,d.useState)(!1),[u,h]=(0,d.useState)(""),p="qwea"===t,m=(0,d.useCallback)(async()=>{try{let e=await fetch("/api/channels");if(e.ok){let t=await e.json();n(t.channels)}}finally{a(!1)}},[]),g=(0,d.useMemo)(()=>s.filter(e=>e.is_system),[s]),x=(0,d.useMemo)(()=>s.filter(e=>!e.is_system),[s]),y=async e=>{if(!confirm("Delete this channel?"))return;let t=await fetch(`/api/channels/${e}`,{method:"DELETE"});if(t.ok)m();else{let e=await t.json().catch(()=>({}));alert(`Failed to delete: ${e.error||t.statusText}`)}},v=async()=>{if(p&&u.trim()){l(!0);try{let e=await fetch("/api/channels",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:u.trim()})});if(e.ok)h(""),m();else{let t=await e.json().catch(()=>({}));alert(`Failed to create channel: ${t.error||e.statusText}`)}}finally{l(!1)}}};return i?(0,c.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,c.jsx)("div",{className:"text-muted-foreground animate-pulse",children:"Loading channels..."})}):(0,c.jsxs)("div",{className:"space-y-6",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsx)("h2",{className:"text-2xl font-bold",children:"Channels"}),p&&(0,c.jsxs)("div",{className:"flex items-center gap-2",children:[(0,c.jsx)(r7.p,{value:u,onChange:e=>h(e.target.value),placeholder:"Create a new channel",className:"w-48"}),(0,c.jsxs)(f.$,{onClick:v,disabled:!u.trim()||o,className:"hover-glow",children:[(0,c.jsx)(sT,{className:"h-4 w-4 mr-1"})," Create"]})]})]}),(0,c.jsxs)(sc.Zp,{className:"glass-effect",children:[(0,c.jsx)(sc.aR,{children:(0,c.jsx)(sc.ZB,{children:"Default"})}),(0,c.jsx)(sc.Wu,{className:"space-y-2",children:0===g.length?(0,c.jsx)("p",{className:"text-muted-foreground text-sm",children:"No channels."}):g.map(e=>(0,c.jsxs)(f.$,{variant:"ghost",className:"w-full justify-start",onClick:()=>r(e.id,e.name),children:[(0,c.jsx)(rU,{className:"h-4 w-4 mr-2"})," ",e.name]},e.id))})]}),x.length>0&&(0,c.jsxs)(sc.Zp,{className:"glass-effect",children:[(0,c.jsx)(sc.aR,{children:(0,c.jsx)(sc.ZB,{children:"Created by Gold users"})}),(0,c.jsx)(sc.Wu,{className:"space-y-2",children:x.map(t=>(0,c.jsxs)("div",{className:"flex items-center gap-2",children:[(0,c.jsxs)(f.$,{variant:"ghost",className:"flex-1 justify-start",onClick:()=>r(t.id,t.name),children:[(0,c.jsx)(rU,{className:"h-4 w-4 mr-2"})," ",t.name]}),t.creator_id===e&&(0,c.jsx)(f.$,{variant:"ghost",size:"icon",onClick:()=>y(t.id),className:"text-red-500",children:(0,c.jsx)(r3.A,{className:"h-4 w-4"})})]},t.id))})]})]})}var sM=r(20126),sF=r(49125);function sD({currentUserId:e}){let[t,r]=(0,d.useState)([]),[s,n]=(0,d.useState)([]),[i,a]=(0,d.useState)(!1),[o,l]=(0,d.useState)(!0),[u,h]=(0,d.useState)(new Date),[p,m]=(0,d.useState)(""),[g,x]=(0,d.useState)(""),[y,v]=(0,d.useState)(""),[b,_]=(0,d.useState)(""),[w,j]=(0,d.useState)(!1),[k,N]=(0,d.useState)([]),C=(0,d.useCallback)(async()=>{try{let e=await fetch("/api/calendar");if(e.ok){let t=await e.json();r(t.events)}}catch(e){console.error("Failed to fetch events:",e)}finally{l(!1)}},[]);(0,d.useCallback)(async()=>{try{let e=await fetch("/api/friends/accepted");if(e.ok){let t=await e.json();n(t.friends)}}catch(e){console.error("Failed to fetch friends:",e)}},[]);let S=async()=>{if(p.trim()&&y&&b)try{(await fetch("/api/calendar",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:p.trim(),description:g.trim()||void 0,start_time:y,end_time:b,is_collaborative:w,participants:k})})).ok&&(a(!1),E(),C())}catch(e){console.error("Failed to create event:",e)}},E=()=>{m(""),x(""),v(""),_(""),j(!1),N([])},T=(e,t)=>t?"bg-gradient-to-r from-yellow-400 via-yellow-500 to-yellow-600 bg-clip-text text-transparent animate-pulse font-medium":e?{color:e}:{},O=e=>new Date(e).toLocaleDateString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),R=e=>{let r=e.toDateString();return t.filter(e=>new Date(e.start_time).toDateString()===r)},A=e=>{h(t=>{let r=new Date(t);return"prev"===e?r.setMonth(t.getMonth()-1):r.setMonth(t.getMonth()+1),r})},P=e=>{if(!e)return!1;let t=new Date;return e.toDateString()===t.toDateString()};if(o)return(0,c.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,c.jsx)("div",{className:"text-muted-foreground animate-pulse",children:"Loading calendar..."})});let L=(e=>{let t=e.getFullYear(),r=e.getMonth(),s=new Date(t,r,1),n=new Date(t,r+1,0).getDate(),i=s.getDay(),a=[];for(let e=0;e<i;e++)a.push(null);for(let e=1;e<=n;e++)a.push(new Date(t,r,e));return a})(u),M=u.toLocaleDateString([],{month:"long",year:"numeric"});return(0,c.jsxs)("div",{className:"space-y-6",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsx)("h2",{className:"text-2xl font-bold",children:"Calendar"}),(0,c.jsxs)(f.$,{onClick:()=>a(!0),children:[(0,c.jsx)(sT,{className:"h-4 w-4 mr-2"}),"Create Event"]})]}),(0,c.jsxs)(sc.Zp,{children:[(0,c.jsx)(sc.aR,{children:(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsxs)(sc.ZB,{className:"flex items-center gap-2",children:[(0,c.jsx)(rW,{className:"h-5 w-5"}),M]}),(0,c.jsxs)("div",{className:"flex gap-2",children:[(0,c.jsx)(f.$,{variant:"outline",size:"sm",onClick:()=>A("prev"),children:(0,c.jsx)(sM.A,{className:"h-4 w-4"})}),(0,c.jsx)(f.$,{variant:"outline",size:"sm",onClick:()=>A("next"),children:(0,c.jsx)(sF.A,{className:"h-4 w-4"})})]})]})}),(0,c.jsxs)(sc.Wu,{children:[(0,c.jsx)("div",{className:"grid grid-cols-7 gap-1 mb-4",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>(0,c.jsx)("div",{className:"p-2 text-center text-sm font-medium text-muted-foreground",children:e},e))}),(0,c.jsx)("div",{className:"grid grid-cols-7 gap-1",children:L.map((e,t)=>{let r=e?R(e):[];return(0,c.jsx)("div",{className:`min-h-[80px] p-1 border rounded-lg ${e?"hover:bg-accent/50 cursor-pointer":""} ${P(e)?"bg-primary/10 border-primary":""}`,children:e&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:`text-sm font-medium ${P(e)?"text-primary":""}`,children:e.getDate()}),(0,c.jsxs)("div",{className:"space-y-1",children:[r.slice(0,2).map(e=>(0,c.jsx)("div",{className:"text-xs p-1 bg-primary/20 rounded truncate",title:e.title,children:e.title},e.id)),r.length>2&&(0,c.jsxs)("div",{className:"text-xs text-muted-foreground",children:["+",r.length-2," more"]})]})]})},t)})})]})]}),(0,c.jsxs)(sc.Zp,{children:[(0,c.jsx)(sc.aR,{children:(0,c.jsx)(sc.ZB,{children:"Upcoming Events"})}),(0,c.jsx)(sc.Wu,{children:0===t.length?(0,c.jsxs)("div",{className:"text-center py-8",children:[(0,c.jsx)(sA,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,c.jsx)("p",{className:"text-muted-foreground",children:"No events scheduled"}),(0,c.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Create your first event to get started!"})]}):(0,c.jsx)("div",{className:"space-y-3",children:t.filter(e=>new Date(e.start_time)>=new Date).sort((e,t)=>new Date(e.start_time).getTime()-new Date(t.start_time).getTime()).slice(0,5).map(e=>(0,c.jsxs)("div",{className:"p-3 border rounded-lg",children:[(0,c.jsx)("div",{className:"flex items-start justify-between",children:(0,c.jsxs)("div",{className:"flex-1",children:[(0,c.jsx)("h4",{className:"font-medium",children:e.title}),e.description&&(0,c.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:e.description}),(0,c.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-xs text-muted-foreground",children:[(0,c.jsxs)("span",{children:[O(e.start_time)," - ",O(e.end_time)]}),e.is_collaborative&&(0,c.jsxs)("div",{className:"flex items-center gap-1",children:[(0,c.jsx)(sO.A,{className:"h-3 w-3"}),(0,c.jsx)("span",{children:"Collaborative"})]})]})]})}),(0,c.jsxs)("div",{className:"mt-2 text-xs text-muted-foreground",children:["Created by @",e.creator_username]})]},e.id))})})]}),i&&(0,c.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,c.jsxs)(sc.Zp,{className:"w-full max-w-md mx-4 max-h-[90vh] overflow-y-auto",children:[(0,c.jsxs)(sc.aR,{className:"flex flex-row items-center justify-between",children:[(0,c.jsx)(sc.ZB,{children:"Create Event"}),(0,c.jsx)(f.$,{variant:"ghost",size:"sm",onClick:()=>a(!1),children:(0,c.jsx)(se.A,{className:"h-4 w-4"})})]}),(0,c.jsxs)(sc.Wu,{className:"space-y-4",children:[(0,c.jsx)("div",{children:(0,c.jsx)(r7.p,{value:p,onChange:e=>m(e.target.value),placeholder:"Event title"})}),(0,c.jsx)("div",{children:(0,c.jsx)(sm,{value:g,onChange:e=>x(e.target.value),placeholder:"Description (optional)",rows:2})}),(0,c.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"text-sm font-medium",children:"Start Time"}),(0,c.jsx)(r7.p,{type:"datetime-local",value:y,onChange:e=>v(e.target.value)})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"text-sm font-medium",children:"End Time"}),(0,c.jsx)(r7.p,{type:"datetime-local",value:b,onChange:e=>_(e.target.value)})]})]}),(0,c.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,c.jsx)(sE,{id:"collaborative",checked:w,onCheckedChange:j}),(0,c.jsx)("label",{htmlFor:"collaborative",className:"text-sm",children:"Make this a collaborative event"})]}),w&&(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Invite participants"}),(0,c.jsx)("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:s.map(e=>(0,c.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,c.jsx)(sE,{id:e.friend_id,checked:k.includes(e.friend_id),onCheckedChange:t=>{t?N([...k,e.friend_id]):N(k.filter(t=>t!==e.friend_id))}}),(0,c.jsx)("label",{htmlFor:e.friend_id,className:"text-sm cursor-pointer",style:e.friend_has_gold?{}:T(e.friend_name_color),children:(0,c.jsxs)("span",{className:T(e.friend_name_color,e.friend_has_gold),children:["@",e.friend_username]})})]},e.friend_id))})]}),(0,c.jsxs)("div",{className:"flex gap-2",children:[(0,c.jsx)(f.$,{onClick:S,disabled:!p.trim()||!y||!b,className:"flex-1",children:"Create Event"}),(0,c.jsx)(f.$,{variant:"outline",onClick:()=>a(!1),children:"Cancel"})]})]})]})})]})}let sI=(0,rD.A)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);function sB({userId:e,onStartDM:t,onSendFriendRequest:r}){let{user:s,setUser:n}=(0,sa.J)(),[i,a]=(0,d.useState)(null),[o,l]=(0,d.useState)(!0),[u,h]=(0,d.useState)(!1),[p,m]=(0,d.useState)(!1),[g,x]=(0,d.useState)(!1),[y,v]=(0,d.useState)(""),[b,_]=(0,d.useState)(""),w=!e||e===s?.id,j=async e=>{let t=e.target.files?.[0];if(t){x(!0);try{let e=await fetch(`/api/upload-image?filename=${encodeURIComponent(t.name)}`,{method:"POST",body:t});if(e.ok){let t=await e.json();_(t.url)}else{let t=await e.json();alert(`Failed to upload image: ${t.error||e.statusText}`)}}catch(e){console.error("Image upload error:",e),alert("An unexpected error occurred during image upload.")}finally{x(!1)}}},k=async()=>{if(w){m(!0);try{let e=await fetch("/api/user/profile",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({profile_picture:b||null,bio:y.trim()||null})});if(e.ok){let t=await e.json();n(t.user),a(t.user),h(!1)}else{let t=await e.json();alert(`Failed to update profile: ${t.error||e.statusText}`)}}catch(e){console.error("Failed to update profile:",e),alert("An unexpected error occurred while updating profile.")}finally{m(!1)}}},N=e=>e.has_gold_animation?"bg-gradient-to-r from-yellow-400 via-yellow-500 to-yellow-600 bg-clip-text text-transparent animate-pulse font-medium":e.name_color?{color:e.name_color}:{};return o?(0,c.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,c.jsx)("div",{className:"text-muted-foreground animate-pulse",children:"Loading profile..."})}):i?(0,c.jsxs)("div",{className:"space-y-6",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsx)("h2",{className:"text-2xl font-bold",children:w?"Your Profile":`@${i.username}'s Profile`}),w&&(0,c.jsx)(f.$,{onClick:()=>h(!u),variant:u?"outline":"default",children:u?"Cancel":"Edit Profile"})]}),(0,c.jsxs)(sc.Zp,{className:"glass-effect hover-lift animate-fadeIn",children:[(0,c.jsx)(sc.aR,{children:(0,c.jsxs)(sc.ZB,{className:"flex items-center gap-2",children:[(0,c.jsx)(rH,{className:"h-5 w-5"}),"Profile Information"]})}),(0,c.jsxs)(sc.Wu,{className:"space-y-6",children:[(0,c.jsxs)("div",{className:"flex items-center gap-6",children:[(0,c.jsxs)("div",{className:"relative",children:[i.profile_picture?(0,c.jsx)(r9(),{src:i.profile_picture||"/placeholder.svg",alt:`${i.username}'s profile`,width:100,height:100,className:"w-24 h-24 rounded-full object-cover border-4 border-gray-200 dark:border-gray-700"}):(0,c.jsx)("div",{className:"w-24 h-24 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center border-4 border-gray-200 dark:border-gray-700",children:(0,c.jsx)(rH,{className:"h-12 w-12 text-gray-400"})}),u&&(0,c.jsxs)("label",{className:"absolute bottom-0 right-0 bg-primary text-primary-foreground rounded-full p-2 cursor-pointer hover:bg-primary/90 transition-colors",children:[(0,c.jsx)(sI,{className:"h-4 w-4"}),(0,c.jsx)("input",{type:"file",accept:"image/*",onChange:j,className:"hidden",disabled:g})]}),g&&(0,c.jsx)("div",{className:"absolute inset-0 bg-black/50 rounded-full flex items-center justify-center",children:(0,c.jsx)("div",{className:"w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"})})]}),(0,c.jsxs)("div",{className:"flex-1",children:[(0,c.jsxs)("h3",{className:`text-2xl font-bold ${i.has_gold_animation?N(i):""}`,style:i.has_gold_animation?{}:N(i),children:["@",i.username]}),i.custom_title&&(0,c.jsx)("p",{className:"text-sm italic text-muted-foreground mt-1",children:i.custom_title}),i.signup_code&&(0,c.jsx)("div",{className:"mt-2",children:(0,c.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-primary/10 text-primary",children:["asdf"===i.signup_code&&"âœ¨ Custom Colors","qwea"===i.signup_code&&"\uD83D\uDC51 Gold Member"]})})]})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Bio"}),u?(0,c.jsx)(sm,{value:y,onChange:e=>v(e.target.value),placeholder:"Tell us about yourself...",rows:4,maxLength:500,className:"resize-none"}):(0,c.jsx)("div",{className:"min-h-[100px] p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:i.bio?(0,c.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:i.bio}):(0,c.jsx)("p",{className:"text-sm text-muted-foreground italic",children:w?"Add a bio to tell others about yourself":"No bio available"})}),u&&(0,c.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[y.length,"/500 characters"]})]}),(0,c.jsx)("div",{className:"flex gap-3",children:u?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(f.$,{onClick:k,disabled:p,className:"flex-1",children:p?"Saving...":"Save Changes"}),(0,c.jsx)(f.$,{variant:"outline",onClick:()=>h(!1),disabled:p,children:"Cancel"})]}):w?null:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(f.$,{onClick:()=>t?.(i.id,i.username),className:"flex-1",children:[(0,c.jsx)(r4,{className:"h-4 w-4 mr-2"}),"Send Message"]}),(0,c.jsxs)(f.$,{variant:"outline",onClick:()=>r?.(i.id),children:[(0,c.jsx)(rB,{className:"h-4 w-4 mr-2"}),"Add Friend"]})]})})]})]})]}):(0,c.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,c.jsx)("div",{className:"text-muted-foreground",children:"Profile not found"})})}var s$=r(40931),sU=r.t(s$,2);let sq=Object.create(null);sq.open="0",sq.close="1",sq.ping="2",sq.pong="3",sq.message="4",sq.upgrade="5",sq.noop="6";let sz=Object.create(null);Object.keys(sq).forEach(e=>{sz[sq[e]]=e});let sW={type:"error",data:"parser error"},sH=({type:e,data:t},r,s)=>s(t instanceof ArrayBuffer||ArrayBuffer.isView(t)?r?t:"b"+sV(t,!0).toString("base64"):sq[e]+(t||"")),sV=(e,t)=>Buffer.isBuffer(e)||e instanceof Uint8Array&&!t?e:e instanceof ArrayBuffer?Buffer.from(e):Buffer.from(e.buffer,e.byteOffset,e.byteLength),sG=(e,t)=>{if("string"!=typeof e)return{type:"message",data:sZ(e,t)};let r=e.charAt(0);return"b"===r?{type:"message",data:sZ(Buffer.from(e.substring(1),"base64"),t)}:sz[r]?e.length>1?{type:sz[r],data:e.substring(1)}:{type:sz[r]}:sW},sZ=(e,t)=>"arraybuffer"===t?e instanceof ArrayBuffer?e:Buffer.isBuffer(e)?e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength):e.buffer:Buffer.isBuffer(e)?e:Buffer.from(e),sX=(e,t)=>{let r=e.length,s=Array(r),n=0;e.forEach((e,i)=>{sH(e,!1,e=>{s[i]=e,++n===r&&t(s.join("\x1e"))})})},sJ=(e,t)=>{let r=e.split("\x1e"),s=[];for(let e=0;e<r.length;e++){let n=sG(r[e],t);if(s.push(n),"error"===n.type)break}return s};function sY(e){return e.reduce((e,t)=>e+t.length,0)}function sK(e,t){if(e[0].length===t)return e.shift();let r=new Uint8Array(t),s=0;for(let n=0;n<t;n++)r[n]=e[0][s++],s===e[0].length&&(e.shift(),s=0);return e.length&&s<e[0].length&&(e[0]=e[0].slice(s)),r}function sQ(e){if(e)return function(e){for(var t in sQ.prototype)e[t]=sQ.prototype[t];return e}(e)}sQ.prototype.on=sQ.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},sQ.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this},sQ.prototype.off=sQ.prototype.removeListener=sQ.prototype.removeAllListeners=sQ.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,s=this._callbacks["$"+e];if(!s)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var n=0;n<s.length;n++)if((r=s[n])===t||r.fn===t){s.splice(n,1);break}return 0===s.length&&delete this._callbacks["$"+e],this},sQ.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=Array(arguments.length-1),r=this._callbacks["$"+e],s=1;s<arguments.length;s++)t[s-1]=arguments[s];if(r){r=r.slice(0);for(var s=0,n=r.length;s<n;++s)r[s].apply(this,t)}return this},sQ.prototype.emitReserved=sQ.prototype.emit,sQ.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},sQ.prototype.hasListeners=function(e){return!!this.listeners(e).length};let s0=process.nextTick,s1=global;class s2{constructor(){this._cookies=new Map}parseCookies(e){e&&e.forEach(e=>{let t=function(e){let t=e.split("; "),r=t[0].indexOf("=");if(-1===r)return;let s=t[0].substring(0,r).trim();if(!s.length)return;let n=t[0].substring(r+1).trim();34===n.charCodeAt(0)&&(n=n.slice(1,-1));let i={name:s,value:n};for(let e=1;e<t.length;e++){let r=t[e].split("=");if(2!==r.length)continue;let s=r[0].trim(),n=r[1].trim();switch(s){case"Expires":i.expires=new Date(n);break;case"Max-Age":let a=new Date;a.setUTCSeconds(a.getUTCSeconds()+parseInt(n,10)),i.expires=a}}return i}(e);t&&this._cookies.set(t.name,t)})}get cookies(){let e=Date.now();return this._cookies.forEach((t,r)=>{var s;(null===(s=t.expires)||void 0===s?void 0:s.getTime())<e&&this._cookies.delete(r)}),this._cookies.entries()}addCookies(e){let t=[];for(let[e,r]of this.cookies)t.push(`${e}=${r.value}`);t.length&&(e.setDisableHeaderCheck(!0),e.setRequestHeader("cookie",t.join("; ")))}appendCookies(e){for(let[t,r]of this.cookies)e.append("cookie",`${t}=${r.value}`)}}function s4(e,...t){return t.reduce((t,r)=>(e.hasOwnProperty(r)&&(t[r]=e[r]),t),{})}let s3=s1.setTimeout,s5=s1.clearTimeout;function s6(e,t){t.useNativeTimers?(e.setTimeoutFn=s3.bind(s1),e.clearTimeoutFn=s5.bind(s1)):(e.setTimeoutFn=s1.setTimeout.bind(s1),e.clearTimeoutFn=s1.clearTimeout.bind(s1))}function s9(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}var s8=r(35941);let s7=s8("engine.io-client:transport");class ne extends Error{constructor(e,t,r){super(e),this.description=t,this.context=r,this.type="TransportError"}}class nt extends sQ{constructor(e){super(),this.writable=!1,s6(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,r){return super.emitReserved("error",new ne(e,t,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return("opening"===this.readyState||"open"===this.readyState)&&(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState?this.write(e):s7("transport is not open, discarding packets")}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){let t=sG(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){let e=this.opts.hostname;return -1===e.indexOf(":")?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){let t=function(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}(e);return t.length?"?"+t:""}}let nr=s8("engine.io-client:polling");class ns extends nt{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";let t=()=>{nr("paused"),this.readyState="paused",e()};if(this._polling||!this.writable){let e=0;this._polling&&(nr("we are currently polling - waiting to pause"),e++,this.once("pollComplete",function(){nr("pre-pause polling complete"),--e||t()})),this.writable||(nr("we are currently writing - waiting to pause"),e++,this.once("drain",function(){nr("pre-pause writing complete"),--e||t()}))}else t()}_poll(){nr("polling"),this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){nr("polling got data %s",e),sJ(e,this.socket.binaryType).forEach(e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)}),"closed"!==this.readyState&&(this._polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState?this._poll():nr('ignoring poll - transport state "%s"',this.readyState))}doClose(){let e=()=>{nr("writing close packet"),this.write([{type:"close"}])};"open"===this.readyState?(nr("transport open - closing"),e()):(nr("transport not open - deferring close"),this.once("open",e))}write(e){this.writable=!1,sX(e,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=s9()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}}let nn=!1;try{nn="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){}let ni=nn,na=s8("engine.io-client:polling");function no(){}class nl extends ns{constructor(e){if(super(e),"undefined"!=typeof location){let t="https:"===location.protocol,r=location.port;r||(r=t?"443":"80"),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,t){let r=this.request({method:"POST",data:e});r.on("success",t),r.on("error",(e,t)=>{this.onError("xhr post error",e,t)})}doPoll(){na("xhr poll");let e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(e,t)=>{this.onError("xhr poll error",e,t)}),this.pollXhr=e}}class nc extends sQ{constructor(e,t,r){super(),this.createRequest=e,s6(this,r),this._opts=r,this._method=r.method||"GET",this._uri=t,this._data=void 0!==r.data?r.data:null,this._create()}_create(){var e;let t=s4(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;let r=this._xhr=this.createRequest(t);try{na("xhr open %s: %s",this._method,this._uri),r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders)for(let e in r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0),this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(e)&&r.setRequestHeader(e,this._opts.extraHeaders[e])}catch(e){}if("POST"===this._method)try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{r.setRequestHeader("Accept","*/*")}catch(e){}null===(e=this._opts.cookieJar)||void 0===e||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var e;3===r.readyState&&(null===(e=this._opts.cookieJar)||void 0===e||e.parseCookies(r.getResponseHeader("set-cookie"))),4===r.readyState&&(200===r.status||1223===r.status?this._onLoad():this.setTimeoutFn(()=>{this._onError("number"==typeof r.status?r.status:0)},0))},na("xhr data %s",this._data),r.send(this._data)}catch(e){this.setTimeoutFn(()=>{this._onError(e)},0);return}"undefined"!=typeof document&&(this._index=nc.requestsCount++,nc.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(void 0!==this._xhr&&null!==this._xhr){if(this._xhr.onreadystatechange=no,e)try{this._xhr.abort()}catch(e){}"undefined"!=typeof document&&delete nc.requests[this._index],this._xhr=null}}_onLoad(){let e=this._xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}function nd(){for(let e in nc.requests)nc.requests.hasOwnProperty(e)&&nc.requests[e].abort()}nc.requestsCount=0,nc.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",nd):"function"==typeof addEventListener&&addEventListener("onpagehide"in s1?"pagehide":"unload",nd,!1)),function(){let e=function(e){let t=e.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!t||ni))return new XMLHttpRequest}catch(e){}if(!t)try{return new s1[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch(e){}}({xdomain:!1});e&&e.responseType}();let nu=s$||sU;class nh extends nl{request(e={}){var t;return Object.assign(e,{xd:this.xd,cookieJar:null===(t=this.socket)||void 0===t?void 0:t._cookieJar},this.opts),new nc(e=>new nu(e),this.uri(),e)}}r(93205),r(58948),r(97260);var nf=r(91930);r(98224);let np=s8("engine.io-client:websocket"),nm="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class ng extends nt{get name(){return"websocket"}doOpen(){let e=this.uri(),t=this.opts.protocols,r=nm?{}:s4(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,r)}catch(e){return this.emitReserved("error",e)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){let r=e[t],s=t===e.length-1;sH(r,this.supportsBinary,e=>{try{this.doWrite(r,e)}catch(e){np("websocket closed before onclose event")}s&&s0(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){void 0!==this.ws&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){let e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=s9()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}s1.WebSocket||s1.MozWebSocket;class nx extends ng{createSocket(e,t,r){var s;if(null===(s=this.socket)||void 0===s?void 0:s._cookieJar)for(let[e,t]of(r.headers=r.headers||{},r.headers.cookie="string"==typeof r.headers.cookie?[r.headers.cookie]:r.headers.cookie||[],this.socket._cookieJar.cookies))r.headers.cookie.push(`${e}=${t.value}`);return new nf(e,t,r)}doWrite(e,t){let r={};e.options&&(r.compress=e.options.compress),this.opts.perMessageDeflate&&("string"==typeof t?Buffer.byteLength(t):t.length)<this.opts.perMessageDeflate.threshold&&(r.compress=!1),this.ws.send(t,r)}}let ny=s8("engine.io-client:webtransport");class nv extends nt{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{ny("transport closed gracefully"),this.onClose()}).catch(e=>{ny("transport closed due to %s",e),this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{let t=function(e,t){n||(n=new TextDecoder);let r=[],s=0,i=-1,a=!1;return new TransformStream({transform(o,l){for(r.push(o);;){if(0===s){if(1>sY(r))break;let e=sK(r,1);a=(128&e[0])==128,s=(i=127&e[0])<126?3:126===i?1:2}else if(1===s){if(2>sY(r))break;let e=sK(r,2);i=new DataView(e.buffer,e.byteOffset,e.length).getUint16(0),s=3}else if(2===s){if(8>sY(r))break;let e=sK(r,8),t=new DataView(e.buffer,e.byteOffset,e.length),n=t.getUint32(0);if(n>2097151){l.enqueue(sW);break}i=0x100000000*n+t.getUint32(4),s=3}else{if(sY(r)<i)break;let e=sK(r,i);l.enqueue(sG(a?e:n.decode(e),t)),s=0}if(0===i||i>e){l.enqueue(sW);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(t).getReader(),i=new TransformStream({transform(e,t){!function(e,t){if(e.data instanceof ArrayBuffer||ArrayBuffer.isView(e.data))return t(sV(e.data,!1));sH(e,!0,e=>{s||(s=new TextEncoder),t(s.encode(e))})}(e,r=>{let s;let n=r.length;if(n<126)new DataView((s=new Uint8Array(1)).buffer).setUint8(0,n);else if(n<65536){let e=new DataView((s=new Uint8Array(3)).buffer);e.setUint8(0,126),e.setUint16(1,n)}else{let e=new DataView((s=new Uint8Array(9)).buffer);e.setUint8(0,127),e.setBigUint64(1,BigInt(n))}e.data&&"string"!=typeof e.data&&(s[0]|=128),t.enqueue(s),t.enqueue(r)})}});i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();let a=()=>{r.read().then(({done:e,value:t})=>{if(e){ny("session is closed");return}ny("received chunk: %o",t),this.onPacket(t),a()}).catch(e=>{ny("an error occurred while reading: %s",e)})};a();let o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){let r=e[t],s=t===e.length-1;this._writer.write(r).then(()=>{s&&s0(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;null===(e=this._transport)||void 0===e||e.close()}}let nb={websocket:nx,webtransport:nv,polling:nh},n_=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,nw=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function nj(e){if(e.length>8e3)throw"URI too long";let t=e,r=e.indexOf("["),s=e.indexOf("]");-1!=r&&-1!=s&&(e=e.substring(0,r)+e.substring(r,s).replace(/:/g,";")+e.substring(s,e.length));let n=n_.exec(e||""),i={},a=14;for(;a--;)i[nw[a]]=n[a]||"";return -1!=r&&-1!=s&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=function(e,t){let r=t.replace(/\/{2,9}/g,"/").split("/");return("/"==t.slice(0,1)||0===t.length)&&r.splice(0,1),"/"==t.slice(-1)&&r.splice(r.length-1,1),r}(0,i.path),i.queryKey=function(e,t){let r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(e,t,s){t&&(r[t]=s)}),r}(0,i.query),i}let nk=s8("engine.io-client:socket"),nN="function"==typeof addEventListener&&"function"==typeof removeEventListener,nC=[];nN&&addEventListener("offline",()=>{nk("closing %d connection(s) because the network was lost",nC.length),nC.forEach(e=>e())},!1);class nS extends sQ{constructor(e,t){if(super(),this.binaryType="nodebuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&"object"==typeof e&&(t=e,e=null),e){let r=nj(e);t.hostname=r.host,t.secure="https"===r.protocol||"wss"===r.protocol,t.port=r.port,r.query&&(t.query=r.query)}else t.host&&(t.hostname=nj(t.host).host);s6(this,t),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(e=>{let t=e.prototype.name;this.transports.push(t),this._transportsByName[t]=e}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"==typeof this.opts.query&&(this.opts.query=function(e){let t={},r=e.split("&");for(let e=0,s=r.length;e<s;e++){let s=r[e].split("=");t[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return t}(this.opts.query)),nN&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(nk("adding listener for the 'offline' event"),this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},nC.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=new s2),this._open()}createTransport(e){nk('creating transport "%s"',e);let t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);let r=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return nk("options: %j",r),new this._transportsByName[e](r)}_open(){if(0===this.transports.length){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}let e=this.opts.rememberUpgrade&&nS.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";let t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){nk("setting transport %s",e.name),this.transport&&(nk("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",e=>this._onClose("transport close",e))}onOpen(){nk("socket open"),this.readyState="open",nS.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush()}_onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(nk('socket receive: type "%s", data "%s"',e.type,e.data),this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":let t=Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}else nk('packet received with socket readyState "%s"',this.readyState)}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);let e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){let e=this._getWritablePackets();nk("flushing %d packets in socket",e.length),this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let t=0;t<this.writeBuffer.length;t++){let r=this.writeBuffer[t].data;if(r)e+="string"==typeof r?function(e){let t=0,r=0;for(let s=0,n=e.length;s<n;s++)(t=e.charCodeAt(s))<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(s++,r+=4);return r}(r):Math.ceil(1.33*(r.byteLength||r.size));if(t>0&&e>this._maxPayload)return nk("only send %d out of %d packets",t,this.writeBuffer.length),this.writeBuffer.slice(0,t);e+=2}return nk("payload size is %d (max: %d)",e,this._maxPayload),this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;let e=Date.now()>this._pingTimeoutTime;return e&&(nk("throttled timer detected, scheduling connection close"),this._pingTimeoutTime=0,s0(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,r){return this._sendPacket("message",e,t,r),this}send(e,t,r){return this._sendPacket("message",e,t,r),this}_sendPacket(e,t,r,s){if("function"==typeof t&&(s=t,t=void 0),"function"==typeof r&&(s=r,r=null),"closing"===this.readyState||"closed"===this.readyState)return;(r=r||{}).compress=!1!==r.compress;let n={type:e,data:t,options:r};this.emitReserved("packetCreate",n),this.writeBuffer.push(n),s&&this.once("flush",s),this.flush()}close(){let e=()=>{this._onClose("forced close"),nk("socket closing - telling transport to close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},r=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return("opening"===this.readyState||"open"===this.readyState)&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(nk("socket error %j",e),nS.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&"opening"===this.readyState)return nk("trying next transport"),this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){if(nk('socket close with reason: "%s"',e),this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),nN&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){let e=nC.indexOf(this._offlineEventListener);-1!==e&&(nk("removing listener for the 'offline' event"),nC.splice(e,1))}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}nS.protocol=4;class nE extends nS{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),"open"===this.readyState&&this.opts.upgrade){nk("starting upgrade probes");for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}}_probe(e){nk('probing transport "%s"',e);let t=this.createTransport(e),r=!1;nS.priorWebsocketSuccess=!1;let s=()=>{r||(nk('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",s=>{if(!r){if("pong"===s.type&&"probe"===s.data)nk('probe transport "%s" pong',e),this.upgrading=!0,this.emitReserved("upgrading",t),t&&(nS.priorWebsocketSuccess="websocket"===t.name,nk('pausing current transport "%s"',this.transport.name),this.transport.pause(()=>{!r&&"closed"!==this.readyState&&(nk("changing transport and sending upgrade packet"),c(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())}));else{nk('probe transport "%s" failed',e);let r=Error("probe error");r.transport=t.name,this.emitReserved("upgradeError",r)}}}))};function n(){r||(r=!0,c(),t.close(),t=null)}let i=r=>{let s=Error("probe error: "+r);s.transport=t.name,n(),nk('probe transport "%s" failed because of error: %s',e,r),this.emitReserved("upgradeError",s)};function a(){i("transport closed")}function o(){i("socket closed")}function l(e){t&&e.name!==t.name&&(nk('"%s" works - aborting "%s"',e.name,t.name),n())}let c=()=>{t.removeListener("open",s),t.removeListener("error",i),t.removeListener("close",a),this.off("close",o),this.off("upgrading",l)};t.once("open",s),t.once("error",i),t.once("close",a),this.once("close",o),this.once("upgrading",l),-1!==this._upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn(()=>{r||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){let t=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&t.push(e[r]);return t}}class nT extends nE{constructor(e,t={}){let r="object"==typeof e?e:t;(!r.transports||r.transports&&"string"==typeof r.transports[0])&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(e=>nb[e]).filter(e=>!!e)),super(e,r)}}nT.protocol;let nO=s8("socket.io-client:url"),nR="function"==typeof ArrayBuffer,nA=e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,nP=Object.prototype.toString,nL="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===nP.call(Blob),nM="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===nP.call(File);function nF(e){return nR&&(e instanceof ArrayBuffer||nA(e))||nL&&e instanceof Blob||nM&&e instanceof File}let nD=s8("socket.io-parser"),nI=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],nB=5;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(o||(o={}));class n${constructor(e){this.replacer=e}encode(e){return(nD("encoding packet %j",e),(e.type===o.EVENT||e.type===o.ACK)&&function e(t,r){if(!t||"object"!=typeof t)return!1;if(Array.isArray(t)){for(let r=0,s=t.length;r<s;r++)if(e(t[r]))return!0;return!1}if(nF(t))return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1==arguments.length)return e(t.toJSON(),!0);for(let r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return!0;return!1}(e))?this.encodeAsBinary({type:e.type===o.EVENT?o.BINARY_EVENT:o.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===o.BINARY_EVENT||e.type===o.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),nD("encoded %j as %s",e,t),t}encodeAsBinary(e){let t=function(e){let t=[],r=e.data;return e.data=function e(t,r){if(!t)return t;if(nF(t)){let e={_placeholder:!0,num:r.length};return r.push(t),e}if(Array.isArray(t)){let s=Array(t.length);for(let n=0;n<t.length;n++)s[n]=e(t[n],r);return s}if("object"==typeof t&&!(t instanceof Date)){let s={};for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=e(t[n],r));return s}return t}(r,t),e.attachments=t.length,{packet:e,buffers:t}}(e),r=this.encodeAsString(t.packet),s=t.buffers;return s.unshift(r),s}}function nU(e){return"[object Object]"===Object.prototype.toString.call(e)}class nq extends sQ{constructor(e){super(),this.reviver=e}add(e){let t;if("string"==typeof e){if(this.reconstructor)throw Error("got plaintext data when reconstructing a packet");let r=(t=this.decodeString(e)).type===o.BINARY_EVENT;r||t.type===o.BINARY_ACK?(t.type=r?o.EVENT:o.ACK,this.reconstructor=new nz(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(nF(e)||e.base64){if(this.reconstructor)(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw Error("got binary data when not reconstructing a packet")}else throw Error("Unknown type: "+e)}decodeString(e){let t=0,r={type:Number(e.charAt(0))};if(void 0===o[r.type])throw Error("unknown packet type "+r.type);if(r.type===o.BINARY_EVENT||r.type===o.BINARY_ACK){let s=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);let n=e.substring(s,t);if(n!=Number(n)||"-"!==e.charAt(t))throw Error("Illegal attachments");r.attachments=Number(n)}if("/"===e.charAt(t+1)){let s=t+1;for(;++t&&","!==e.charAt(t)&&t!==e.length;);r.nsp=e.substring(s,t)}else r.nsp="/";let s=e.charAt(t+1);if(""!==s&&Number(s)==s){let s=t+1;for(;++t;){let r=e.charAt(t);if(null==r||Number(r)!=r){--t;break}if(t===e.length)break}r.id=Number(e.substring(s,t+1))}if(e.charAt(++t)){let s=this.tryParse(e.substr(t));if(nq.isPayloadValid(r.type,s))r.data=s;else throw Error("invalid payload")}return nD("decoded %s as %j",e,r),r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(e){return!1}}static isPayloadValid(e,t){switch(e){case o.CONNECT:return nU(t);case o.DISCONNECT:return void 0===t;case o.CONNECT_ERROR:return"string"==typeof t||nU(t);case o.EVENT:case o.BINARY_EVENT:return Array.isArray(t)&&("number"==typeof t[0]||"string"==typeof t[0]&&-1===nI.indexOf(t[0]));case o.ACK:case o.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class nz{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t,r;let e=(t=this.reconPack,r=this.buffers,t.data=function e(t,r){if(!t)return t;if(t&&!0===t._placeholder){if("number"==typeof t.num&&t.num>=0&&t.num<r.length)return r[t.num];throw Error("illegal attachments")}if(Array.isArray(t))for(let s=0;s<t.length;s++)t[s]=e(t[s],r);else if("object"==typeof t)for(let s in t)Object.prototype.hasOwnProperty.call(t,s)&&(t[s]=e(t[s],r));return t}(t.data,r),delete t.attachments,t);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function nW(e,t,r){return e.on(t,r),function(){e.off(t,r)}}let nH=s8("socket.io-client:socket"),nV=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class nG extends sQ{constructor(e,t,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;let e=this.io;this.subs=[nW(e,"open",this.onopen.bind(this)),nW(e,"packet",this.onpacket.bind(this)),nW(e,"error",this.onerror.bind(this)),nW(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var r,s,n;if(nV.hasOwnProperty(e))throw Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;let i={type:o.EVENT,data:t};if(i.options={},i.options.compress=!1!==this.flags.compress,"function"==typeof t[t.length-1]){let e=this.ids++;nH("emitting packet with ack id %d",e);let r=t.pop();this._registerAckCallback(e,r),i.id=e}let a=null===(s=null===(r=this.io.engine)||void 0===r?void 0:r.transport)||void 0===s?void 0:s.writable,l=this.connected&&!(null===(n=this.io.engine)||void 0===n?void 0:n._hasPingExpired());return this.flags.volatile&&!a?nH("discard packet as the transport is not currently writable"):l?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i),this.flags={},this}_registerAckCallback(e,t){var r;let s=null!==(r=this.flags.timeout)&&void 0!==r?r:this._opts.ackTimeout;if(void 0===s){this.acks[e]=t;return}let n=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&(nH("removing packet with ack id %d from the buffer",e),this.sendBuffer.splice(t,1));nH("event with ack id %d has timed out after %d ms",e,s),t.call(this,Error("operation has timed out"))},s),i=(...e)=>{this.io.clearTimeoutFn(n),t.apply(this,e)};i.withError=!0,this.acks[e]=i}emitWithAck(e,...t){return new Promise((r,s)=>{let n=(e,t)=>e?s(e):r(t);n.withError=!0,t.push(n),this.emit(e,...t)})}_addToQueue(e){let t;"function"==typeof e[e.length-1]&&(t=e.pop());let r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((e,...s)=>{if(r===this._queue[0])return null!==e?r.tryCount>this._opts.retries&&(nH("packet [%d] is discarded after %d tries",r.id,r.tryCount),this._queue.shift(),t&&t(e)):(nH("packet [%d] was successfully sent",r.id),this._queue.shift(),t&&t(null,...s)),r.pending=!1,this._drainQueue()}),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(nH("draining queue"),!this.connected||0===this._queue.length)return;let t=this._queue[0];if(t.pending&&!e){nH("packet [%d] has already been sent and is waiting for an ack",t.id);return}t.pending=!0,t.tryCount++,nH("sending packet [%d] (try n\xb0%d)",t.id,t.tryCount),this.flags=t.flags,this.emit.apply(this,t.args)}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){nH("transport is open - connecting"),"function"==typeof this.auth?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:o.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){nH("close (%s)",e),this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(t=>String(t.id)===e)){let t=this.acks[e];delete this.acks[e],t.withError&&t.call(this,Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case o.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case o.EVENT:case o.BINARY_EVENT:this.onevent(e);break;case o.ACK:case o.BINARY_ACK:this.onack(e);break;case o.DISCONNECT:this.ondisconnect();break;case o.CONNECT_ERROR:this.destroy();let t=Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){let t=e.data||[];nH("emitting event %j",t),null!=e.id&&(nH("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length)for(let t of this._anyListeners.slice())t.apply(this,e);super.emit.apply(this,e),this._pid&&e.length&&"string"==typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){let t=this,r=!1;return function(...s){r||(r=!0,nH("sending ack %j",s),t.packet({type:o.ACK,id:e,data:s}))}}onack(e){let t=this.acks[e.id];if("function"!=typeof t){nH("bad ack %s",e.id);return}delete this.acks[e.id],nH("calling ack %s with %j",e.id,e.data),t.withError&&e.data.unshift(null),t.apply(this,e.data)}onconnect(e,t){nH("socket connected with id %s",e),this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){nH("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&(nH("performing disconnect (%s)",this.nsp),this.packet({type:o.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){let t=this._anyListeners;for(let r=0;r<t.length;r++)if(e===t[r]){t.splice(r,1);break}}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){let t=this._anyOutgoingListeners;for(let r=0;r<t.length;r++)if(e===t[r]){t.splice(r,1);break}}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length)for(let t of this._anyOutgoingListeners.slice())t.apply(this,e.data)}}function nZ(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}nZ.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=(1&Math.floor(10*t))==0?e-r:e+r}return 0|Math.min(e,this.max)},nZ.prototype.reset=function(){this.attempts=0},nZ.prototype.setMin=function(e){this.ms=e},nZ.prototype.setMax=function(e){this.max=e},nZ.prototype.setJitter=function(e){this.jitter=e};let nX=s8("socket.io-client:manager");class nJ extends sQ{constructor(e,t){var r;super(),this.nsps={},this.subs=[],e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.opts=t,s6(this,t),this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(r=t.randomizationFactor)&&void 0!==r?r:.5),this.backoff=new nZ({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState="closed",this.uri=e;let s=t.parser||l;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(nX("readyState %s",this._readyState),~this._readyState.indexOf("open"))return this;nX("opening %s",this.uri),this.engine=new nT(this.uri,this.opts);let t=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;let s=nW(t,"open",function(){r.onopen(),e&&e()}),n=t=>{nX("error"),this.cleanup(),this._readyState="closed",this.emitReserved("error",t),e?e(t):this.maybeReconnectOnOpen()},i=nW(t,"error",n);if(!1!==this._timeout){let e=this._timeout;nX("connect attempt will timeout after %d",e);let r=this.setTimeoutFn(()=>{nX("connect attempt timed out after %d",e),s(),n(Error("timeout")),t.close()},e);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}return this.subs.push(s),this.subs.push(i),this}connect(e){return this.open(e)}onopen(){nX("open"),this.cleanup(),this._readyState="open",this.emitReserved("open");let e=this.engine;this.subs.push(nW(e,"ping",this.onping.bind(this)),nW(e,"data",this.ondata.bind(this)),nW(e,"error",this.onerror.bind(this)),nW(e,"close",this.onclose.bind(this)),nW(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(e){this.onclose("parse error",e)}}ondecoded(e){s0(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){nX("error",e),this.emitReserved("error",e)}socket(e,t){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new nG(this,e,t),this.nsps[e]=r),r}_destroy(e){for(let e of Object.keys(this.nsps))if(this.nsps[e].active){nX("socket %s is still active, skipping close",e);return}this._close()}_packet(e){nX("writing packet %j",e);let t=this.encoder.encode(e);for(let r=0;r<t.length;r++)this.engine.write(t[r],e.options)}cleanup(){nX("cleanup"),this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){nX("disconnect"),this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var r;nX("closed due to %s",e),this.cleanup(),null===(r=this.engine)||void 0===r||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;let e=this;if(this.backoff.attempts>=this._reconnectionAttempts)nX("reconnect failed"),this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{let t=this.backoff.duration();nX("will wait %dms before reconnect attempt",t),this._reconnecting=!0;let r=this.setTimeoutFn(()=>{!e.skipReconnect&&(nX("attempting reconnect"),this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open(t=>{t?(nX("reconnect attempt error"),e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):(nX("reconnect success"),e.onreconnect())}))},t);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){let e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}let nY=s8("socket.io-client"),nK={};function nQ(e,t){let r;"object"==typeof e&&(t=e,e=void 0);let s=function(e,t="",r){let s=e;r=r||"undefined"!=typeof location&&location,null==e&&(e=r.protocol+"//"+r.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?r.protocol+e:r.host+e),/^(https?|wss?):\/\//.test(e)||(nO("protocol-less url %s",e),e=void 0!==r?r.protocol+"//"+e:"https://"+e),nO("parse %s",e),s=nj(e)),!s.port&&(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";let n=-1!==s.host.indexOf(":")?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+n+":"+s.port+t,s.href=s.protocol+"://"+n+(r&&r.port===s.port?"":":"+s.port),s}(e,(t=t||{}).path||"/socket.io"),n=s.source,i=s.id,a=s.path,o=nK[i]&&a in nK[i].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||o?(nY("ignoring socket cache for %s",n),r=new nJ(n,t)):(nK[i]||(nY("new io instance for %s",n),nK[i]=new nJ(n,t)),r=nK[i]),s.query&&!t.query&&(t.query=s.queryKey),r.socket(s.path,t)}Object.assign(nQ,{Manager:nJ,Socket:nG,io:nQ,connect:nQ});let n0=(0,rD.A)("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),n1=(0,rD.A)("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),n2=(0,rD.A)("PhoneOff",[["path",{d:"M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91",key:"z86iuo"}],["line",{x1:"22",x2:"2",y1:"2",y2:"22",key:"11kh81"}]]);function n4({roomId:e,userId:t,signalingUrl:r=process.env.NEXT_PUBLIC_VOICE_URL||"https://your-voice-server.onrender.com"}){let[s,n]=(0,d.useState)(!1),[i,a]=(0,d.useState)(!1),[o,l]=(0,d.useState)([]),u=(0,d.useRef)(null);return(0,d.useRef)(new Map),(0,d.useRef)(new Map),(0,d.useRef)(null),(0,c.jsxs)(sc.Zp,{className:"glass-effect",children:[(0,c.jsx)(sc.aR,{children:(0,c.jsxs)(sc.ZB,{className:"flex items-center gap-2",children:[(0,c.jsx)(rz,{className:"h-5 w-5"})," Voice Room"]})}),(0,c.jsxs)(sc.Wu,{className:"space-y-4",children:[(0,c.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Status: ",s?"Connected":"Connecting..."," â€¢ Peers: ",o.length]}),(0,c.jsxs)("div",{className:"flex gap-2",children:[(0,c.jsxs)(f.$,{onClick:()=>{a(e=>{let t=!e;return u.current?.getAudioTracks().forEach(e=>e.enabled=!t),t})},variant:i?"destructive":"default",children:[i?(0,c.jsx)(n0,{className:"h-4 w-4 mr-1"}):(0,c.jsx)(n1,{className:"h-4 w-4 mr-1"}),i?"Unmute":"Mute"]}),(0,c.jsxs)(f.$,{onClick:()=>location.reload(),variant:"outline",children:[(0,c.jsx)(n2,{className:"h-4 w-4 mr-1"})," Leave"]})]})]})]})}function n3(){let{user:e}=(0,sa.J)();return e?(0,c.jsx)(n4,{roomId:"global-voice",userId:e.id}):null}var n5=r(1747),n6=r(61582);function n9(e){return null}function n8({onClose:e,onCreate:t}){let[r,s]=(0,d.useState)(""),[n,i]=(0,d.useState)([]),[a,o]=(0,d.useState)([]),[l,u]=(0,d.useState)(!0),h=e=>{o(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},p=(e,t)=>t?"bg-gradient-to-r from-yellow-400 via-yellow-500 to-yellow-600 bg-clip-text text-transparent animate-pulse font-medium":e?{color:e}:{};return(0,c.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,c.jsxs)(sc.Zp,{className:"w-full max-w-md mx-4",children:[(0,c.jsxs)(sc.aR,{className:"flex flex-row items-center justify-between",children:[(0,c.jsx)(sc.ZB,{children:"Create Group Chat"}),(0,c.jsx)(f.$,{variant:"ghost",size:"sm",onClick:e,children:(0,c.jsx)(se.A,{className:"h-4 w-4"})})]}),(0,c.jsxs)(sc.Wu,{className:"space-y-4",children:[(0,c.jsx)("div",{children:(0,c.jsx)(r7.p,{value:r,onChange:e=>s(e.target.value),placeholder:"Group chat name"})}),(0,c.jsxs)("div",{children:[(0,c.jsx)("h4",{className:"text-sm font-medium mb-2",children:"Add Friends"}),l?(0,c.jsx)("div",{className:"text-center py-4 text-gray-500",children:"Loading friends..."}):0===n.length?(0,c.jsx)("div",{className:"text-center py-4 text-gray-500",children:"No friends to add"}):(0,c.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:n.map(e=>(0,c.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,c.jsx)(sE,{id:e.friend_id,checked:a.includes(e.friend_id),onCheckedChange:()=>h(e.friend_id)}),(0,c.jsx)("label",{htmlFor:e.friend_id,className:"text-sm cursor-pointer",style:e.friend_has_gold?{}:p(e.friend_name_color),children:(0,c.jsxs)("span",{className:p(e.friend_name_color,e.friend_has_gold),children:["@",e.friend_username]})})]},e.friend_id))})]}),(0,c.jsxs)("div",{className:"flex gap-2",children:[(0,c.jsx)(f.$,{onClick:()=>{r.trim()&&t(r.trim(),a)},disabled:!r.trim(),className:"flex-1",children:"Create Group"}),(0,c.jsx)(f.$,{variant:"outline",onClick:e,children:"Cancel"})]})]})]})})}let n7=(0,rD.A)("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);function ie({currentUserId:e}){let[t,r]=(0,d.useState)([]),[s,n]=(0,d.useState)(!0);(0,d.useCallback)(async()=>{try{let e=await fetch("/api/users/online");if(e.ok){let t=await e.json();r(t.onlineUsers)}}catch(e){console.error("Failed to fetch online users:",e)}finally{n(!1)}},[]),(0,d.useCallback)(async()=>{try{await fetch("/api/user/activity",{method:"POST"})}catch(e){console.error("Failed to update activity:",e)}},[]);let i=(e,t)=>t?"bg-gradient-to-r from-yellow-400 via-yellow-500 to-yellow-600 bg-clip-text text-transparent animate-pulse font-medium":e?{color:e}:{};return s?(0,c.jsxs)(sc.Zp,{className:"animate-fadeIn",children:[(0,c.jsx)(sc.aR,{children:(0,c.jsxs)(sc.ZB,{className:"flex items-center gap-2",children:[(0,c.jsx)(sO.A,{className:"h-5 w-5"}),"Online Friends"]})}),(0,c.jsx)(sc.Wu,{children:(0,c.jsx)("div",{className:"text-center py-4 text-muted-foreground animate-pulse",children:"Loading..."})})]}):(0,c.jsxs)(sc.Zp,{className:"animate-fadeIn",children:[(0,c.jsx)(sc.aR,{children:(0,c.jsxs)(sc.ZB,{className:"flex items-center gap-2",children:[(0,c.jsx)(n7,{className:"h-5 w-5 text-green-500"}),"Online Friends (",t.length,")"]})}),(0,c.jsx)(sc.Wu,{children:0===t.length?(0,c.jsxs)("div",{className:"text-center py-4 text-muted-foreground",children:[(0,c.jsx)(sO.A,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),(0,c.jsx)("p",{children:"No online friends"}),(0,c.jsx)("p",{className:"text-sm mt-1",children:"Add some friends to see them here!"})]}):(0,c.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:t.map(e=>(0,c.jsxs)("div",{className:"flex items-center gap-3 p-2 rounded-lg hover:bg-accent/50 transition-colors",children:[(0,c.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),(0,c.jsxs)("span",{className:e.has_gold_animation?i(void 0,!0):"text-sm",style:e.has_gold_animation?{}:i(e.name_color),children:["@",e.username]})]},e.id))})})]})}function it({currentUserId:e,onViewAllPolls:t}){var r;let[s,n]=(0,d.useState)(null),[i,a]=(0,d.useState)(!0),[o,l]=(0,d.useState)(!1),u=(0,d.useCallback)(async()=>{try{let t=await fetch(`/api/polls/recent?userId=${e}`);if(t.ok){let e=await t.json();n(e.poll)}}catch(e){console.error("Failed to fetch recent poll:",e)}finally{a(!1)}},[e]),h=async e=>{if(s&&!o){l(!0);try{let t=await fetch(`/api/polls/${s.id}/vote`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({option_index:e})});if(t.ok)await u();else{let e=await t.json();console.error("Failed to vote:",e.error)}}catch(e){console.error("Failed to vote:",e)}finally{l(!1)}}},p=(e,t)=>0===t?0:Math.round(e/t*100);if(i)return(0,c.jsxs)(sc.Zp,{className:"glass-effect animate-fadeIn",children:[(0,c.jsx)(sc.aR,{children:(0,c.jsxs)(sc.ZB,{className:"flex items-center gap-2",children:[(0,c.jsx)(rq,{className:"h-5 w-5"}),"Latest Poll"]})}),(0,c.jsx)(sc.Wu,{children:(0,c.jsx)("div",{className:"text-center py-4 text-muted-foreground animate-pulse",children:"Loading..."})})]});if(!s)return(0,c.jsxs)(sc.Zp,{className:"glass-effect animate-fadeIn",children:[(0,c.jsx)(sc.aR,{children:(0,c.jsxs)(sc.ZB,{className:"flex items-center gap-2",children:[(0,c.jsx)(rq,{className:"h-5 w-5"}),"Latest Poll"]})}),(0,c.jsx)(sc.Wu,{children:(0,c.jsxs)("div",{className:"text-center py-4",children:[(0,c.jsx)(rq,{className:"h-8 w-8 mx-auto mb-2 opacity-50 text-muted-foreground"}),(0,c.jsx)("p",{className:"text-muted-foreground text-sm",children:"No polls available"}),(0,c.jsx)(f.$,{variant:"outline",size:"sm",className:"mt-2 bg-transparent hover-lift",onClick:t,children:"View All Polls"})]})})]});let m=void 0!==s.user_response,g=!!(r=s.expires_at)&&new Date(r)<new Date;return(0,c.jsxs)(sc.Zp,{className:`glass-effect animate-fadeIn hover-lift ${g?"opacity-75":""}`,children:[(0,c.jsx)(sc.aR,{children:(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsxs)(sc.ZB,{className:"flex items-center gap-2",children:[(0,c.jsx)(rq,{className:"h-5 w-5"}),"Latest Poll"]}),(0,c.jsx)(f.$,{variant:"ghost",size:"sm",onClick:t,className:"text-xs hover-lift",children:"View All"})]})}),(0,c.jsxs)(sc.Wu,{className:"space-y-3",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("h4",{className:"font-medium text-sm",children:s.title}),s.description&&(0,c.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:s.description})]}),(0,c.jsxs)("div",{className:"flex items-center gap-3 text-xs text-muted-foreground",children:[s.is_public?(0,c.jsx)(rZ,{className:"h-3 w-3 hue-accent"}):(0,c.jsx)(sO.A,{className:"h-3 w-3"}),(0,c.jsx)(sR,{className:"h-3 w-3"}),(0,c.jsxs)("span",{children:[s.total_responses," votes"]}),s.expires_at&&(0,c.jsxs)("div",{className:"flex items-center gap-1",children:[(0,c.jsx)(sA,{className:"h-3 w-3"}),(0,c.jsx)("span",{className:g?"text-red-500":"",children:g?"Expired":`Expires ${new Date(s.expires_at).toLocaleDateString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}`})]})]}),(0,c.jsxs)("div",{className:"space-y-2",children:[s.options.slice(0,2).map((e,t)=>{let r=s.results.find(e=>e.option_index===t),n=r?.count||0,i=p(n,s.total_responses),a=s.user_response===t;return(0,c.jsxs)("div",{className:"space-y-1",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsxs)(f.$,{variant:a?"default":"outline",size:"sm",className:`flex-1 justify-start text-xs h-7 hover-lift transition-all duration-200 ${a?"hue-shadow":""}`,onClick:()=>!m&&!g&&!o&&h(t),disabled:m||g||o,children:[(0,c.jsx)("span",{className:"flex-1 text-left",children:e}),o&&(0,c.jsx)("div",{className:"w-3 h-3 border border-current border-t-transparent rounded-full animate-spin ml-1"})]}),m&&(0,c.jsxs)("span",{className:"text-xs text-muted-foreground ml-2 min-w-[45px] text-right",children:[n," (",i,"%)"]})]}),m&&(0,c.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1",children:(0,c.jsx)("div",{className:`h-1 rounded-full transition-all duration-500 ${a?"hue-bg":"bg-gray-400 dark:bg-gray-600"}`,style:{width:`${i}%`,backgroundColor:a?"hsl(var(--hue) 50% 50%)":void 0}})})]},t)}),s.options.length>2&&(0,c.jsxs)("p",{className:"text-xs text-muted-foreground text-center",children:["+",s.options.length-2," more options"]})]}),!m&&!g&&(0,c.jsx)("p",{className:"text-xs text-muted-foreground text-center opacity-70",children:"Click an option to vote"})]})]})}function ir({onClose:e,onMessageClick:t}){let[r,s]=(0,d.useState)(""),[n,i]=(0,d.useState)([]),[a,o]=(0,d.useState)(!1),l=(e,t)=>t?"bg-gradient-to-r from-yellow-400 via-yellow-500 to-yellow-600 bg-clip-text text-transparent animate-pulse font-medium":e?{color:e}:{},u=e=>new Date(e).toLocaleDateString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),h=e=>"global"===e.chat_type?"Global Chat":"dm"===e.chat_type?"Direct Message":"Group Chat";return(0,c.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,c.jsxs)(sc.Zp,{className:"w-full max-w-2xl mx-4 max-h-[80vh] overflow-hidden",children:[(0,c.jsxs)(sc.aR,{className:"flex flex-row items-center justify-between",children:[(0,c.jsxs)(sc.ZB,{className:"flex items-center gap-2",children:[(0,c.jsx)(su.A,{className:"h-5 w-5"}),"Search Messages"]}),(0,c.jsx)(f.$,{variant:"ghost",size:"sm",onClick:e,children:(0,c.jsx)(se.A,{className:"h-4 w-4"})})]}),(0,c.jsxs)(sc.Wu,{className:"space-y-4",children:[(0,c.jsxs)("div",{className:"flex gap-2",children:[(0,c.jsx)(r7.p,{value:r,onChange:e=>s(e.target.value),placeholder:"Search messages...",className:"flex-1",autoFocus:!0}),a&&(0,c.jsx)("div",{className:"flex items-center px-3",children:(0,c.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary"})})]}),(0,c.jsx)("div",{className:"max-h-96 overflow-y-auto space-y-2",children:r.trim().length<2?(0,c.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,c.jsx)(su.A,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,c.jsx)("p",{children:"Type at least 2 characters to search"})]}):0!==n.length||a?n.map(r=>(0,c.jsxs)("div",{className:"p-3 border rounded-lg hover:bg-accent/50 cursor-pointer transition-colors",onClick:()=>{t?.(r.chat_type,r.chat_id),e()},children:[(0,c.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,c.jsxs)("span",{className:r.has_gold_animation?l(void 0,!0):"text-sm font-medium",style:r.has_gold_animation?{}:l(r.name_color),children:["@",r.username]}),(0,c.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[(0,c.jsx)("span",{children:h(r)}),(0,c.jsx)("span",{children:"â€¢"}),(0,c.jsx)("span",{children:u(r.created_at)})]})]}),(0,c.jsx)("p",{className:"text-sm text-muted-foreground truncate",children:"image"===r.message_type?"\uD83D\uDCF7 Shared an image":r.content})]},r.id)):(0,c.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,c.jsx)(r4,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,c.jsxs)("p",{children:['No messages found for "',r,'"']})]})})]})]})})}let is=[{id:"blue",name:"Blue"},{id:"purple",name:"Purple"},{id:"pink",name:"Pink"},{id:"red",name:"Red"},{id:"orange",name:"Orange"},{id:"yellow",name:"Yellow"},{id:"green",name:"Green"},{id:"teal",name:"Teal"}];function ii(){let{user:e,loading:t,setUser:r}=(0,sa.J)(),{theme:s,setTheme:n}=(0,h.D)(),[i,a]=(0,d.useState)("dashboard"),[o,l]=(0,d.useState)([]),[p,m]=(0,d.useState)({type:null,name:""}),[g,x]=(0,d.useState)(!1),[y,v]=(0,d.useState)(!1),[b,_]=(0,d.useState)(null),w=(0,u.useRouter)(),j=(0,d.useCallback)(async()=>{if(e)try{let e=await fetch("/api/group-chats");if(e.ok){let t=await e.json();l(t.groupChats)}else console.error("Failed to fetch group chats:",e.status,await e.text())}catch(e){console.error("Failed to fetch group chats:",e)}},[e]),k=async(e,t)=>{try{let r=await fetch("/api/group-chats",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,memberIds:t})});if(r.ok){let e=await r.json();l(t=>[e.groupChat,...t]),x(!1),m({type:"group",id:e.groupChat.id,name:e.groupChat.name}),a("dashboard")}else console.error("Failed to create group chat:",r.status,await r.text())}catch(e){console.error("Failed to create group chat:",e)}},N=async t=>{if(e&&confirm("Are you sure you want to delete this group chat? This action cannot be undone."))try{let e=await fetch(`/api/group-chats/${t}`,{method:"DELETE"});if(e.ok)console.log(`Group chat ${t} deleted successfully.`),j(),"group"===p.type&&p.id===t&&m({type:null,name:""});else{let t=await e.json();console.error("Failed to delete group chat:",t.error||e.statusText),alert(`Failed to delete group chat: ${t.error||e.statusText}`)}}catch(e){console.error("Failed to delete group chat:",e),alert("An unexpected error occurred while deleting the group chat.")}},C=async()=>{try{let e=await fetch("/api/auth/signout",{method:"POST",credentials:"include"});e.ok?r(null):console.error("Sign out failed:",e.status),window.location.href="/auth"}catch(e){console.error("Failed to sign out:",e),window.location.href="/auth"}},S=(e,t)=>{m({type:"dm",id:e,name:`@${t}`}),a("dashboard"),_(null)},E=async()=>{if(!e)return;let t="light"===s?"dark":"light";console.log("[dashboard] Cycling theme from",s,"to",t),n(t);try{let i=await fetch("/api/user/settings",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({theme:t})});if(i.ok)r({...e,theme:t});else{let e=await i.json();console.error("[dashboard] Failed to update theme:",e.error||i.statusText),n(s||"light"),alert(`Failed to change theme: ${e.error||i.statusText}`)}}catch(e){console.error("[dashboard] Failed to update theme:",e),n(s||"light"),alert(`An unexpected error occurred while changing theme: ${e.message}`)}},T=async()=>{if(!e)return;let t=(is.findIndex(t=>t.id===e.hue)+1)%is.length,s=is[t].id;console.log("[dashboard] Cycling hue from",e.hue,"to",s);try{let e=await fetch("/api/user/settings",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({hue:s})});if(e.ok){let t=await e.json();console.log("[dashboard] Hue update successful:",t.user.hue),r(t.user)}else{let t=await e.json();console.error("[dashboard] Failed to update hue:",t.error||e.statusText),alert(`Failed to change hue: ${t.error||e.statusText}`)}}catch(e){console.error("[dashboard] Failed to update hue:",e),alert(`An unexpected error occurred while changing hue: ${e.message}`)}},O=async e=>{try{let t=await fetch("/api/friends",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({addresseeId:e})});if(t.ok)alert("Friend request sent!");else{let e=await t.json();alert(`Failed to send friend request: ${e.error}`)}}catch(e){console.error("Failed to send friend request:",e),alert("An error occurred while sending friend request")}};return t?(0,c.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background",children:(0,c.jsx)("div",{className:"text-muted-foreground animate-pulse",children:"Loading..."})}):e?(0,c.jsxs)("div",{className:"min-h-screen bg-background transition-colors duration-300",children:[(0,c.jsx)(r1,{currentPage:i,onPageChange:e=>{"settings"===e?w.push("/settings"):"about"===e?w.push("/about"):"movies"===e?(w.push("/movies"),m({type:null,name:""}),_(null)):"games"===e?(w.push("/games"),m({type:null,name:""}),_(null)):(a(e),"dashboard"!==e&&(m({type:null,name:""}),_(null)))},onSignOut:C,onGlobalChatClick:()=>{m({type:"global",name:"Global Chat"}),a("dashboard"),_(null)},onAIChatClick:()=>{m({type:"dm",id:"00000000-0000-0000-0000-00000000000a",name:"real.AI"}),a("dashboard"),_(null)},username:e.username,onThemeCycle:E,onHueCycle:T}),(0,c.jsxs)("div",{className:"pt-20 px-4 pb-4",children:[(0,c.jsx)(n9,{currentUserId:e.id}),"dashboard"===i&&(0,c.jsxs)("div",{className:"flex flex-col md:flex-row gap-6 max-w-7xl mx-auto h-[calc(100vh-theme(spacing.20))]",children:[(0,c.jsxs)("div",{className:"w-full md:w-80 space-y-4 flex-shrink-0",children:[(0,c.jsxs)(sc.Zp,{className:"animate-fadeIn",children:[(0,c.jsx)(sc.aR,{children:(0,c.jsxs)(sc.ZB,{className:"flex items-center justify-between",children:[(0,c.jsx)("span",{children:"Group Chats"}),(0,c.jsxs)("div",{className:"flex gap-2",children:[(0,c.jsx)(f.$,{variant:"ghost",size:"sm",onClick:()=>v(!0),title:"Search Messages",children:(0,c.jsx)(su.A,{className:"h-4 w-4"})}),(0,c.jsx)(f.$,{variant:"ghost",size:"sm",onClick:()=>x(!0),children:(0,c.jsx)(sT,{className:"h-4 w-4"})})]})]})}),(0,c.jsx)(sc.Wu,{children:0===o.length?(0,c.jsx)("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No group chats yet"}):(0,c.jsx)("div",{className:"space-y-1",children:o.map(t=>(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsxs)(f.$,{variant:"group"===p.type&&p.id===t.id?"default":"ghost",className:"flex-1 justify-start text-left transition-all duration-200 hover:scale-102",onClick:()=>m({type:"group",id:t.id,name:t.name}),children:[(0,c.jsx)(sO.A,{className:"h-4 w-4 mr-2 shrink-0"}),(0,c.jsx)("span",{className:"truncate",children:t.name})]}),e.id===t.creator_id&&(0,c.jsx)(f.$,{variant:"ghost",size:"sm",onClick:()=>N(t.id),className:"ml-2 text-red-500 hover:bg-red-500/10",title:"Delete Group Chat",children:(0,c.jsx)(r3.A,{className:"h-4 w-4"})})]},t.id))})})]}),(0,c.jsx)(ie,{currentUserId:e.id}),(0,c.jsx)(it,{currentUserId:e.id,onViewAllPolls:()=>{a("polls"),_(null)}})]}),(0,c.jsx)("div",{className:"flex-1 h-full",children:p.type?(0,c.jsx)("div",{className:"animate-fadeIn",children:(0,c.jsx)(sl,{chatType:p.type,chatId:p.id,chatName:p.name,currentUserId:e.id,onUserClick:e=>{console.log("[dashboard] User clicked:",e),_(e),a("profile"),m({type:null,name:""})}})}):(0,c.jsx)(sc.Zp,{className:"flex items-center justify-center h-full animate-fadeIn",children:(0,c.jsxs)(sc.Wu,{className:"text-center py-12",children:[(0,c.jsx)(rZ,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4 animate-pulse"}),(0,c.jsx)("h3",{className:"text-xl font-semibold text-foreground",children:"Welcome to real."}),(0,c.jsxs)("p",{className:"text-muted-foreground mt-2 mb-4",children:['Click on "Global" or "AI Chat" in the dynamic island above to start chatting,',(0,c.jsx)("br",{}),"or select a group chat from the sidebar."]}),(0,c.jsxs)("div",{className:"flex items-center justify-center gap-2 text-sm text-muted-foreground",children:[(0,c.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),(0,c.jsx)("span",{children:"Ready to connect"})]})]})})})]}),(0,c.jsxs)("div",{className:"max-w-7xl mx-auto mb-3 flex justify-end gap-2",children:[(0,c.jsx)(f.$,{variant:"ghost",size:"sm",onClick:()=>a("movies"),children:"Movies"}),(0,c.jsx)(f.$,{variant:"ghost",size:"sm",onClick:()=>a("games"),children:"Games"})]}),"friends"===i&&(0,c.jsx)("div",{className:"max-w-4xl mx-auto animate-slideIn",children:(0,c.jsx)(sf,{currentUserId:e.id,onStartDM:S})}),"dms"===i&&(0,c.jsx)("div",{className:"max-w-4xl mx-auto animate-slideIn",children:(0,c.jsx)(sp,{currentUserId:e.id,onSelectDM:S})}),"polls"===i&&(0,c.jsx)("div",{className:"max-w-4xl mx-auto animate-slideIn",children:(0,c.jsx)(sP,{currentUserId:e.id,userSignupCode:e.signup_code})}),"channels"===i&&(0,c.jsx)("div",{className:"max-w-4xl mx-auto animate-slideIn",children:(0,c.jsx)(sL,{currentUserId:e.id,userSignupCode:e.signup_code,onSelectChannel:(e,t)=>{m({type:"channel",id:e,name:`# ${t}`}),a("dashboard"),_(null)}})}),"calendar"===i&&(0,c.jsx)("div",{className:"max-w-4xl mx-auto animate-slideIn",children:(0,c.jsx)(sD,{currentUserId:e.id})}),"voice"===i&&(0,c.jsx)("div",{className:"max-w-4xl mx-auto animate-slideIn",children:(0,c.jsx)(n3,{})}),"movies"===i&&(0,c.jsx)("div",{className:"max-w-7xl mx-auto animate-fadeIn",children:(0,c.jsx)(n5.default,{})}),"games"===i&&(0,c.jsx)("div",{className:"max-w-7xl mx-auto animate-fadeIn",children:(0,c.jsx)(n6.A,{})}),"profile"===i&&(0,c.jsx)("div",{className:"max-w-4xl mx-auto animate-slideIn",children:(0,c.jsx)(sB,{userId:b??void 0,onStartDM:S,onSendFriendRequest:O})})]}),g&&e&&(0,c.jsx)(n8,{onClose:()=>x(!1),onCreate:k}),y&&(0,c.jsx)(ir,{onClose:()=>v(!1),onMessageClick:(e,t)=>{if("global"===e)m({type:"global",name:"Global Chat"});else if("dm"===e)m({type:"dm",id:t,name:"Direct Message"});else if("group"===e){let e=o.find(e=>e.id===t);m({type:"group",id:t,name:e?.name||"Group Chat"})}a("dashboard"),_(null)}})]}):null}},97127:(e,t,r)=>{"use strict";let{kForOnEventAttribute:s,kListener:n}=r(19944),i=Symbol("kCode"),a=Symbol("kData"),o=Symbol("kError"),l=Symbol("kMessage"),c=Symbol("kReason"),d=Symbol("kTarget"),u=Symbol("kType"),h=Symbol("kWasClean");class f{constructor(e){this[d]=null,this[u]=e}get target(){return this[d]}get type(){return this[u]}}Object.defineProperty(f.prototype,"target",{enumerable:!0}),Object.defineProperty(f.prototype,"type",{enumerable:!0});class p extends f{constructor(e,t={}){super(e),this[i]=void 0===t.code?0:t.code,this[c]=void 0===t.reason?"":t.reason,this[h]=void 0!==t.wasClean&&t.wasClean}get code(){return this[i]}get reason(){return this[c]}get wasClean(){return this[h]}}Object.defineProperty(p.prototype,"code",{enumerable:!0}),Object.defineProperty(p.prototype,"reason",{enumerable:!0}),Object.defineProperty(p.prototype,"wasClean",{enumerable:!0});class m extends f{constructor(e,t={}){super(e),this[o]=void 0===t.error?null:t.error,this[l]=void 0===t.message?"":t.message}get error(){return this[o]}get message(){return this[l]}}Object.defineProperty(m.prototype,"error",{enumerable:!0}),Object.defineProperty(m.prototype,"message",{enumerable:!0});class g extends f{constructor(e,t={}){super(e),this[a]=void 0===t.data?null:t.data}get data(){return this[a]}}function x(e,t,r){"object"==typeof e&&e.handleEvent?e.handleEvent.call(e,r):e.call(t,r)}Object.defineProperty(g.prototype,"data",{enumerable:!0}),e.exports={CloseEvent:p,ErrorEvent:m,Event:f,EventTarget:{addEventListener(e,t,r={}){let i;for(let i of this.listeners(e))if(!r[s]&&i[n]===t&&!i[s])return;if("message"===e)i=function(e,r){let s=new g("message",{data:r?e:e.toString()});s[d]=this,x(t,this,s)};else if("close"===e)i=function(e,r){let s=new p("close",{code:e,reason:r.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});s[d]=this,x(t,this,s)};else if("error"===e)i=function(e){let r=new m("error",{error:e,message:e.message});r[d]=this,x(t,this,r)};else{if("open"!==e)return;i=function(){let e=new f("open");e[d]=this,x(t,this,e)}}i[s]=!!r[s],i[n]=t,r.once?this.once(e,i):this.on(e,i)},removeEventListener(e,t){for(let r of this.listeners(e))if(r[n]===t&&!r[s]){this.removeListener(e,r);break}}},MessageEvent:g}},97260:(e,t,r)=>{"use strict";let s;let{Duplex:n}=r(27910),{randomFillSync:i}=r(55511),a=r(69397),{EMPTY_BUFFER:o}=r(19944),{isValidStatusCode:l}=r(37526),{mask:c,toBuffer:d}=r(11940),u=Symbol("kByteLength"),h=Buffer.alloc(4),f=8192;class p{constructor(e,t,r){this._extensions=t||{},r&&(this._generateMask=r,this._maskBuffer=Buffer.alloc(4)),this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(e,t){let r,n;let a=!1,o=2,l=!1;t.mask&&(r=t.maskBuffer||h,t.generateMask?t.generateMask(r):(8192===f&&(void 0===s&&(s=Buffer.alloc(8192)),i(s,0,8192),f=0),r[0]=s[f++],r[1]=s[f++],r[2]=s[f++],r[3]=s[f++]),l=(r[0]|r[1]|r[2]|r[3])==0,o=6),"string"==typeof e?n=(!t.mask||l)&&void 0!==t[u]?t[u]:(e=Buffer.from(e)).length:(n=e.length,a=t.mask&&t.readOnly&&!l);let d=n;n>=65536?(o+=8,d=127):n>125&&(o+=2,d=126);let p=Buffer.allocUnsafe(a?n+o:o);return(p[0]=t.fin?128|t.opcode:t.opcode,t.rsv1&&(p[0]|=64),p[1]=d,126===d?p.writeUInt16BE(n,2):127===d&&(p[2]=p[3]=0,p.writeUIntBE(n,4,6)),t.mask)?(p[1]|=128,p[o-4]=r[0],p[o-3]=r[1],p[o-2]=r[2],p[o-1]=r[3],l)?[p,e]:a?(c(e,r,p,o,n),[p]):(c(e,r,e,0,n),[p,e]):[p,e]}close(e,t,r,s){let n;if(void 0===e)n=o;else if("number"==typeof e&&l(e)){if(void 0!==t&&t.length){let r=Buffer.byteLength(t);if(r>123)throw RangeError("The message must not be greater than 123 bytes");(n=Buffer.allocUnsafe(2+r)).writeUInt16BE(e,0),"string"==typeof t?n.write(t,2):n.set(t,2)}else(n=Buffer.allocUnsafe(2)).writeUInt16BE(e,0)}else throw TypeError("First argument must be a valid error code number");let i={[u]:n.length,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};this._deflating?this.enqueue([this.dispatch,n,!1,i,s]):this.sendFrame(p.frame(n,i),s)}ping(e,t,r){let s,n;if("string"==typeof e?(s=Buffer.byteLength(e),n=!1):(s=(e=d(e)).length,n=d.readOnly),s>125)throw RangeError("The data size must not be greater than 125 bytes");let i={[u]:s,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:9,readOnly:n,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,i,r]):this.sendFrame(p.frame(e,i),r)}pong(e,t,r){let s,n;if("string"==typeof e?(s=Buffer.byteLength(e),n=!1):(s=(e=d(e)).length,n=d.readOnly),s>125)throw RangeError("The data size must not be greater than 125 bytes");let i={[u]:s,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:10,readOnly:n,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,i,r]):this.sendFrame(p.frame(e,i),r)}send(e,t,r){let s,n;let i=this._extensions[a.extensionName],o=t.binary?2:1,l=t.compress;if("string"==typeof e?(s=Buffer.byteLength(e),n=!1):(s=(e=d(e)).length,n=d.readOnly),this._firstFragment?(this._firstFragment=!1,l&&i&&i.params[i._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(l=s>=i._threshold),this._compress=l):(l=!1,o=0),t.fin&&(this._firstFragment=!0),i){let i={[u]:s,fin:t.fin,generateMask:this._generateMask,mask:t.mask,maskBuffer:this._maskBuffer,opcode:o,readOnly:n,rsv1:l};this._deflating?this.enqueue([this.dispatch,e,this._compress,i,r]):this.dispatch(e,this._compress,i,r)}else this.sendFrame(p.frame(e,{[u]:s,fin:t.fin,generateMask:this._generateMask,mask:t.mask,maskBuffer:this._maskBuffer,opcode:o,readOnly:n,rsv1:!1}),r)}dispatch(e,t,r,s){if(!t){this.sendFrame(p.frame(e,r),s);return}let n=this._extensions[a.extensionName];this._bufferedBytes+=r[u],this._deflating=!0,n.compress(e,r.fin,(e,t)=>{if(this._socket.destroyed){let e=Error("The socket was closed while data was being compressed");"function"==typeof s&&s(e);for(let t=0;t<this._queue.length;t++){let r=this._queue[t],s=r[r.length-1];"function"==typeof s&&s(e)}return}this._bufferedBytes-=r[u],this._deflating=!1,r.readOnly=!1,this.sendFrame(p.frame(t,r),s),this.dequeue()})}dequeue(){for(;!this._deflating&&this._queue.length;){let e=this._queue.shift();this._bufferedBytes-=e[3][u],Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][u],this._queue.push(e)}sendFrame(e,t){2===e.length?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],t),this._socket.uncork()):this._socket.write(e[0],t)}}e.exports=p},98004:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(65519).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},98224:(e,t,r)=>{"use strict";let s=r(94735),n=r(81630),{Duplex:i}=r(27910),{createHash:a}=r(55511),o=r(33680),l=r(69397),c=r(13175),d=r(91930),{GUID:u,kWebSocket:h}=r(19944),f=/^[+/0-9A-Za-z]{22}==$/;class p extends s{constructor(e,t){if(super(),null==(e={allowSynchronousEvents:!0,autoPong:!0,maxPayload:0x6400000,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:d,...e}).port&&!e.server&&!e.noServer||null!=e.port&&(e.server||e.noServer)||e.server&&e.noServer)throw TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(null!=e.port?(this._server=n.createServer((e,t)=>{let r=n.STATUS_CODES[426];t.writeHead(426,{"Content-Length":r.length,"Content-Type":"text/plain"}),t.end(r)}),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server){let e=this.emit.bind(this,"connection");this._removeListeners=function(e,t){for(let r of Object.keys(t))e.on(r,t[r]);return function(){for(let r of Object.keys(t))e.removeListener(r,t[r])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(t,r,s)=>{this.handleUpgrade(t,r,s,e)}})}!0===e.perMessageDeflate&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=0}address(){if(this.options.noServer)throw Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(2===this._state){e&&this.once("close",()=>{e(Error("The server is not running"))}),process.nextTick(m,this);return}if(e&&this.once("close",e),1!==this._state){if(this._state=1,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients&&this.clients.size?this._shouldEmitClose=!0:process.nextTick(m,this);else{let e=this._server;this._removeListeners(),this._removeListeners=this._server=null,e.close(()=>{m(this)})}}}shouldHandle(e){if(this.options.path){let t=e.url.indexOf("?");if((-1!==t?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,r,s){t.on("error",g);let n=e.headers["sec-websocket-key"],i=e.headers.upgrade,a=+e.headers["sec-websocket-version"];if("GET"!==e.method){y(this,e,t,405,"Invalid HTTP method");return}if(void 0===i||"websocket"!==i.toLowerCase()){y(this,e,t,400,"Invalid Upgrade header");return}if(void 0===n||!f.test(n)){y(this,e,t,400,"Missing or invalid Sec-WebSocket-Key header");return}if(8!==a&&13!==a){y(this,e,t,400,"Missing or invalid Sec-WebSocket-Version header");return}if(!this.shouldHandle(e)){x(t,400);return}let d=e.headers["sec-websocket-protocol"],u=new Set;if(void 0!==d)try{u=c.parse(d)}catch(r){y(this,e,t,400,"Invalid Sec-WebSocket-Protocol header");return}let h=e.headers["sec-websocket-extensions"],p={};if(this.options.perMessageDeflate&&void 0!==h){let r=new l(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let e=o.parse(h);e[l.extensionName]&&(r.accept(e[l.extensionName]),p[l.extensionName]=r)}catch(r){y(this,e,t,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let i={origin:e.headers[`${8===a?"sec-websocket-origin":"origin"}`],secure:!!(e.socket.authorized||e.socket.encrypted),req:e};if(2===this.options.verifyClient.length){this.options.verifyClient(i,(i,a,o,l)=>{if(!i)return x(t,a||401,o,l);this.completeUpgrade(p,n,u,e,t,r,s)});return}if(!this.options.verifyClient(i))return x(t,401)}this.completeUpgrade(p,n,u,e,t,r,s)}completeUpgrade(e,t,r,s,n,i,c){if(!n.readable||!n.writable)return n.destroy();if(n[h])throw Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>0)return x(n,503);let d=a("sha1").update(t+u).digest("base64"),f=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${d}`],p=new this.options.WebSocket(null,void 0,this.options);if(r.size){let e=this.options.handleProtocols?this.options.handleProtocols(r,s):r.values().next().value;e&&(f.push(`Sec-WebSocket-Protocol: ${e}`),p._protocol=e)}if(e[l.extensionName]){let t=e[l.extensionName].params,r=o.format({[l.extensionName]:[t]});f.push(`Sec-WebSocket-Extensions: ${r}`),p._extensions=e}this.emit("headers",f,s),n.write(f.concat("\r\n").join("\r\n")),n.removeListener("error",g),p.setSocket(n,i,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(p),p.on("close",()=>{this.clients.delete(p),this._shouldEmitClose&&!this.clients.size&&process.nextTick(m,this)})),c(p,s)}}function m(e){e._state=2,e.emit("close")}function g(){this.destroy()}function x(e,t,r,s){r=r||n.STATUS_CODES[t],s={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(r),...s},e.once("finish",e.destroy),e.end(`HTTP/1.1 ${t} ${n.STATUS_CODES[t]}\r
`+Object.keys(s).map(e=>`${e}: ${s[e]}`).join("\r\n")+"\r\n\r\n"+r)}function y(e,t,r,s,n){if(e.listenerCount("wsClientError")){let s=Error(n);Error.captureStackTrace(s,y),e.emit("wsClientError",s,r,t)}else x(r,s,n)}e.exports=p}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[9369,7619,7979,62,1582],()=>r(24596));module.exports=s})();