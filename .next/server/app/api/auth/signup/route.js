/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/auth/signup/route";
exports.ids = ["app/api/auth/signup/route"];
exports.modules = {

/***/ "(rsc)/./app/api/auth/signup/route.ts":
/*!**************************************!*\
  !*** ./app/api/auth/signup/route.ts ***!
  \**************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/.pnpm/next@15.2.4_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./lib/auth.ts\");\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/.pnpm/next@15.2.4_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/next/dist/api/headers.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_auth__WEBPACK_IMPORTED_MODULE_1__]);\n_lib_auth__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\nasync function POST(request) {\n    console.log(\"[signup-api] POST request received\");\n    try {\n        const body = await request.json();\n        const { username, password, signupCode } = body;\n        console.log(\"[signup-api] Request data:\", {\n            username,\n            signupCode: signupCode ? \"provided\" : \"none\"\n        });\n        if (!username || !password) {\n            console.error(\"[signup-api] Missing required fields\");\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Username and password are required\"\n            }, {\n                status: 400\n            });\n        }\n        if (username.length < 3) {\n            console.error(\"[signup-api] Username too short\");\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Username must be at least 3 characters\"\n            }, {\n                status: 400\n            });\n        }\n        if (password.length < 6) {\n            console.error(\"[signup-api] Password too short\");\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Password must be at least 6 characters\"\n            }, {\n                status: 400\n            });\n        }\n        const { user, token } = await (0,_lib_auth__WEBPACK_IMPORTED_MODULE_1__.signUp)(username, password, signupCode);\n        const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_2__.cookies)();\n        cookieStore.set(\"auth-token\", token, {\n            httpOnly: true,\n            secure: \"development\" === \"production\",\n            sameSite: \"lax\",\n            maxAge: 60 * 60 * 24 * 7,\n            path: \"/\"\n        });\n        console.log(\"[signup-api] Signup successful, cookie set\");\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            user: {\n                id: user.id,\n                username: user.username,\n                email: user.email,\n                name_color: user.name_color,\n                custom_title: user.custom_title,\n                has_gold_animation: user.has_gold_animation,\n                notifications_enabled: user.notifications_enabled,\n                theme: user.theme,\n                signup_code: user.signup_code\n            }\n        });\n    } catch (error) {\n        console.error(\"[signup-api] Error:\", error.message);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: error.message\n        }, {\n            status: 400\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2F1dGgvc2lnbnVwL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBNEQ7QUFDekI7QUFDRztBQUUvQixlQUFlRyxLQUFLQyxPQUFvQjtJQUM3Q0MsUUFBUUMsR0FBRyxDQUFDO0lBRVosSUFBSTtRQUNGLE1BQU1DLE9BQU8sTUFBTUgsUUFBUUksSUFBSTtRQUMvQixNQUFNLEVBQUVDLFFBQVEsRUFBRUMsUUFBUSxFQUFFQyxVQUFVLEVBQUUsR0FBR0o7UUFDM0NGLFFBQVFDLEdBQUcsQ0FBQyw4QkFBOEI7WUFBRUc7WUFBVUUsWUFBWUEsYUFBYSxhQUFhO1FBQU87UUFFbkcsSUFBSSxDQUFDRixZQUFZLENBQUNDLFVBQVU7WUFDMUJMLFFBQVFPLEtBQUssQ0FBQztZQUNkLE9BQU9aLHFEQUFZQSxDQUFDUSxJQUFJLENBQUM7Z0JBQUVJLE9BQU87WUFBcUMsR0FBRztnQkFBRUMsUUFBUTtZQUFJO1FBQzFGO1FBRUEsSUFBSUosU0FBU0ssTUFBTSxHQUFHLEdBQUc7WUFDdkJULFFBQVFPLEtBQUssQ0FBQztZQUNkLE9BQU9aLHFEQUFZQSxDQUFDUSxJQUFJLENBQUM7Z0JBQUVJLE9BQU87WUFBeUMsR0FBRztnQkFBRUMsUUFBUTtZQUFJO1FBQzlGO1FBRUEsSUFBSUgsU0FBU0ksTUFBTSxHQUFHLEdBQUc7WUFDdkJULFFBQVFPLEtBQUssQ0FBQztZQUNkLE9BQU9aLHFEQUFZQSxDQUFDUSxJQUFJLENBQUM7Z0JBQUVJLE9BQU87WUFBeUMsR0FBRztnQkFBRUMsUUFBUTtZQUFJO1FBQzlGO1FBRUEsTUFBTSxFQUFFRSxJQUFJLEVBQUVDLEtBQUssRUFBRSxHQUFHLE1BQU1mLGlEQUFNQSxDQUFDUSxVQUFVQyxVQUFVQztRQUV6RCxNQUFNTSxjQUFjLE1BQU1mLHFEQUFPQTtRQUNqQ2UsWUFBWUMsR0FBRyxDQUFDLGNBQWNGLE9BQU87WUFDbkNHLFVBQVU7WUFDVkMsUUFBUUMsa0JBQXlCO1lBQ2pDQyxVQUFVO1lBQ1ZDLFFBQVEsS0FBSyxLQUFLLEtBQUs7WUFDdkJDLE1BQU07UUFDUjtRQUVBbkIsUUFBUUMsR0FBRyxDQUFDO1FBQ1osT0FBT04scURBQVlBLENBQUNRLElBQUksQ0FBQztZQUN2Qk8sTUFBTTtnQkFDSlUsSUFBSVYsS0FBS1UsRUFBRTtnQkFDWGhCLFVBQVVNLEtBQUtOLFFBQVE7Z0JBQ3ZCaUIsT0FBT1gsS0FBS1csS0FBSztnQkFDakJDLFlBQVlaLEtBQUtZLFVBQVU7Z0JBQzNCQyxjQUFjYixLQUFLYSxZQUFZO2dCQUMvQkMsb0JBQW9CZCxLQUFLYyxrQkFBa0I7Z0JBQzNDQyx1QkFBdUJmLEtBQUtlLHFCQUFxQjtnQkFDakRDLE9BQU9oQixLQUFLZ0IsS0FBSztnQkFDakJDLGFBQWFqQixLQUFLaUIsV0FBVztZQUMvQjtRQUNGO0lBQ0YsRUFBRSxPQUFPcEIsT0FBWTtRQUNuQlAsUUFBUU8sS0FBSyxDQUFDLHVCQUF1QkEsTUFBTXFCLE9BQU87UUFDbEQsT0FBT2pDLHFEQUFZQSxDQUFDUSxJQUFJLENBQUM7WUFBRUksT0FBT0EsTUFBTXFCLE9BQU87UUFBQyxHQUFHO1lBQUVwQixRQUFRO1FBQUk7SUFDbkU7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL3JvaGFuL2NvZGUvcmVhbHRhbGsvYXBwL2FwaS9hdXRoL3NpZ251cC9yb3V0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB0eXBlIE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIlxuaW1wb3J0IHsgc2lnblVwIH0gZnJvbSBcIkAvbGliL2F1dGhcIlxuaW1wb3J0IHsgY29va2llcyB9IGZyb20gXCJuZXh0L2hlYWRlcnNcIlxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICBjb25zb2xlLmxvZyhcIltzaWdudXAtYXBpXSBQT1NUIHJlcXVlc3QgcmVjZWl2ZWRcIilcblxuICB0cnkge1xuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKVxuICAgIGNvbnN0IHsgdXNlcm5hbWUsIHBhc3N3b3JkLCBzaWdudXBDb2RlIH0gPSBib2R5XG4gICAgY29uc29sZS5sb2coXCJbc2lnbnVwLWFwaV0gUmVxdWVzdCBkYXRhOlwiLCB7IHVzZXJuYW1lLCBzaWdudXBDb2RlOiBzaWdudXBDb2RlID8gXCJwcm92aWRlZFwiIDogXCJub25lXCIgfSlcblxuICAgIGlmICghdXNlcm5hbWUgfHwgIXBhc3N3b3JkKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiW3NpZ251cC1hcGldIE1pc3NpbmcgcmVxdWlyZWQgZmllbGRzXCIpXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJVc2VybmFtZSBhbmQgcGFzc3dvcmQgYXJlIHJlcXVpcmVkXCIgfSwgeyBzdGF0dXM6IDQwMCB9KVxuICAgIH1cblxuICAgIGlmICh1c2VybmFtZS5sZW5ndGggPCAzKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiW3NpZ251cC1hcGldIFVzZXJuYW1lIHRvbyBzaG9ydFwiKVxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6IFwiVXNlcm5hbWUgbXVzdCBiZSBhdCBsZWFzdCAzIGNoYXJhY3RlcnNcIiB9LCB7IHN0YXR1czogNDAwIH0pXG4gICAgfVxuXG4gICAgaWYgKHBhc3N3b3JkLmxlbmd0aCA8IDYpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJbc2lnbnVwLWFwaV0gUGFzc3dvcmQgdG9vIHNob3J0XCIpXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJQYXNzd29yZCBtdXN0IGJlIGF0IGxlYXN0IDYgY2hhcmFjdGVyc1wiIH0sIHsgc3RhdHVzOiA0MDAgfSlcbiAgICB9XG5cbiAgICBjb25zdCB7IHVzZXIsIHRva2VuIH0gPSBhd2FpdCBzaWduVXAodXNlcm5hbWUsIHBhc3N3b3JkLCBzaWdudXBDb2RlKVxuXG4gICAgY29uc3QgY29va2llU3RvcmUgPSBhd2FpdCBjb29raWVzKClcbiAgICBjb29raWVTdG9yZS5zZXQoXCJhdXRoLXRva2VuXCIsIHRva2VuLCB7XG4gICAgICBodHRwT25seTogdHJ1ZSxcbiAgICAgIHNlY3VyZTogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwicHJvZHVjdGlvblwiLFxuICAgICAgc2FtZVNpdGU6IFwibGF4XCIsXG4gICAgICBtYXhBZ2U6IDYwICogNjAgKiAyNCAqIDcsIC8vIDcgZGF5c1xuICAgICAgcGF0aDogXCIvXCIsXG4gICAgfSlcblxuICAgIGNvbnNvbGUubG9nKFwiW3NpZ251cC1hcGldIFNpZ251cCBzdWNjZXNzZnVsLCBjb29raWUgc2V0XCIpXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIHVzZXI6IHtcbiAgICAgICAgaWQ6IHVzZXIuaWQsXG4gICAgICAgIHVzZXJuYW1lOiB1c2VyLnVzZXJuYW1lLFxuICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcbiAgICAgICAgbmFtZV9jb2xvcjogdXNlci5uYW1lX2NvbG9yLFxuICAgICAgICBjdXN0b21fdGl0bGU6IHVzZXIuY3VzdG9tX3RpdGxlLFxuICAgICAgICBoYXNfZ29sZF9hbmltYXRpb246IHVzZXIuaGFzX2dvbGRfYW5pbWF0aW9uLFxuICAgICAgICBub3RpZmljYXRpb25zX2VuYWJsZWQ6IHVzZXIubm90aWZpY2F0aW9uc19lbmFibGVkLFxuICAgICAgICB0aGVtZTogdXNlci50aGVtZSxcbiAgICAgICAgc2lnbnVwX2NvZGU6IHVzZXIuc2lnbnVwX2NvZGUsXG4gICAgICB9LFxuICAgIH0pXG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiW3NpZ251cC1hcGldIEVycm9yOlwiLCBlcnJvci5tZXNzYWdlKVxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBlcnJvci5tZXNzYWdlIH0sIHsgc3RhdHVzOiA0MDAgfSlcbiAgfVxufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsInNpZ25VcCIsImNvb2tpZXMiLCJQT1NUIiwicmVxdWVzdCIsImNvbnNvbGUiLCJsb2ciLCJib2R5IiwianNvbiIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJzaWdudXBDb2RlIiwiZXJyb3IiLCJzdGF0dXMiLCJsZW5ndGgiLCJ1c2VyIiwidG9rZW4iLCJjb29raWVTdG9yZSIsInNldCIsImh0dHBPbmx5Iiwic2VjdXJlIiwicHJvY2VzcyIsInNhbWVTaXRlIiwibWF4QWdlIiwicGF0aCIsImlkIiwiZW1haWwiLCJuYW1lX2NvbG9yIiwiY3VzdG9tX3RpdGxlIiwiaGFzX2dvbGRfYW5pbWF0aW9uIiwibm90aWZpY2F0aW9uc19lbmFibGVkIiwidGhlbWUiLCJzaWdudXBfY29kZSIsIm1lc3NhZ2UiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/auth/signup/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/auth.ts":
/*!*********************!*\
  !*** ./lib/auth.ts ***!
  \*********************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   decrypt: () => (/* binding */ decrypt),\n/* harmony export */   encrypt: () => (/* binding */ encrypt),\n/* harmony export */   getCurrentUser: () => (/* binding */ getCurrentUser),\n/* harmony export */   hashPassword: () => (/* binding */ hashPassword),\n/* harmony export */   signIn: () => (/* binding */ signIn),\n/* harmony export */   signUp: () => (/* binding */ signUp),\n/* harmony export */   verifyToken: () => (/* binding */ verifyToken)\n/* harmony export */ });\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/.pnpm/jose@6.0.12/node_modules/jose/dist/webapi/jwt/sign.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/.pnpm/jose@6.0.12/node_modules/jose/dist/webapi/jwt/verify.js\");\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/.pnpm/next@15.2.4_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/next/dist/api/headers.js\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./lib/db.ts\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/.pnpm/bcryptjs@3.0.2/node_modules/bcryptjs/index.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_db__WEBPACK_IMPORTED_MODULE_1__]);\n_lib_db__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\nconst key = new TextEncoder().encode(process.env.JWT_SECRET || \"fallback-secret-key\");\nasync function encrypt(payload) {\n    return await new jose__WEBPACK_IMPORTED_MODULE_3__.SignJWT(payload).setProtectedHeader({\n        alg: \"HS256\"\n    }).setIssuedAt().setExpirationTime(\"24h\").sign(key);\n}\nasync function decrypt(input) {\n    const { payload } = await (0,jose__WEBPACK_IMPORTED_MODULE_4__.jwtVerify)(input, key, {\n        algorithms: [\n            \"HS256\"\n        ]\n    });\n    return payload;\n}\nasync function verifyToken(token) {\n    try {\n        return await decrypt(token);\n    } catch  {\n        return null;\n    }\n}\nasync function getCurrentUser() {\n    const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_0__.cookies)();\n    const token = cookieStore.get(\"auth-token\")?.value;\n    if (!token) return null;\n    try {\n        const payload = await decrypt(token);\n        const users = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_1__.query)`SELECT * FROM users WHERE id = ${payload.userId}`;\n        return users[0] || null;\n    } catch  {\n        return null;\n    }\n}\nasync function hashPassword(password) {\n    return await bcryptjs__WEBPACK_IMPORTED_MODULE_2__[\"default\"].hash(password, 12);\n}\nasync function signUp(username, password, signupCode) {\n    const hashedPassword = await hashPassword(password);\n    // Set default values based on signup code\n    let nameColor = null;\n    let hasGoldAnimation = false;\n    if (signupCode === \"asdf\") {\n        nameColor = \"#6366f1\" // Default indigo color\n        ;\n    } else if (signupCode === \"qwea\") {\n        hasGoldAnimation = true;\n    }\n    const users = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_1__.query)`\n    INSERT INTO users (username, password_hash, signup_code, name_color, has_gold_animation, theme, hue, notifications_enabled, last_active, ui_mode)\n    VALUES (${username}, ${hashedPassword}, ${signupCode || null}, ${nameColor}, ${hasGoldAnimation}, 'light', 'blue', false, NOW(), 'full')\n    RETURNING *\n  `;\n    const user = users[0];\n    const token = await encrypt({\n        userId: user.id\n    });\n    return {\n        user,\n        token\n    };\n}\nasync function signIn(username, password) {\n    const users = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_1__.query)`SELECT * FROM users WHERE username = ${username}`;\n    const user = users[0];\n    if (!user) {\n        throw new Error(\"Invalid username or password\");\n    }\n    const isValid = await bcryptjs__WEBPACK_IMPORTED_MODULE_2__[\"default\"].compare(password, user.password_hash);\n    if (!isValid) {\n        throw new Error(\"Invalid username or password\");\n    }\n    const token = await encrypt({\n        userId: user.id\n    });\n    return {\n        user,\n        token\n    };\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvYXV0aC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBeUM7QUFDSDtBQUNOO0FBQ0g7QUFFN0IsTUFBTUssTUFBTSxJQUFJQyxjQUFjQyxNQUFNLENBQUNDLFFBQVFDLEdBQUcsQ0FBQ0MsVUFBVSxJQUFJO0FBRXhELGVBQWVDLFFBQVFDLE9BQVk7SUFDeEMsT0FBTyxNQUFNLElBQUlaLHlDQUFPQSxDQUFDWSxTQUN0QkMsa0JBQWtCLENBQUM7UUFBRUMsS0FBSztJQUFRLEdBQ2xDQyxXQUFXLEdBQ1hDLGlCQUFpQixDQUFDLE9BQ2xCQyxJQUFJLENBQUNaO0FBQ1Y7QUFFTyxlQUFlYSxRQUFRQyxLQUFhO0lBQ3pDLE1BQU0sRUFBRVAsT0FBTyxFQUFFLEdBQUcsTUFBTVgsK0NBQVNBLENBQUNrQixPQUFPZCxLQUFLO1FBQzlDZSxZQUFZO1lBQUM7U0FBUTtJQUN2QjtJQUNBLE9BQU9SO0FBQ1Q7QUFFTyxlQUFlUyxZQUFZQyxLQUFhO0lBQzdDLElBQUk7UUFDRixPQUFPLE1BQU1KLFFBQVFJO0lBQ3ZCLEVBQUUsT0FBTTtRQUNOLE9BQU87SUFDVDtBQUNGO0FBRU8sZUFBZUM7SUFDcEIsTUFBTUMsY0FBYyxNQUFNdEIscURBQU9BO0lBQ2pDLE1BQU1vQixRQUFRRSxZQUFZQyxHQUFHLENBQUMsZUFBZUM7SUFFN0MsSUFBSSxDQUFDSixPQUFPLE9BQU87SUFFbkIsSUFBSTtRQUNGLE1BQU1WLFVBQVUsTUFBTU0sUUFBUUk7UUFDOUIsTUFBTUssUUFBUSxNQUFNeEIsOENBQUssQ0FBQywrQkFBK0IsRUFBRVMsUUFBUWdCLE1BQU0sQ0FBQyxDQUFDO1FBQzNFLE9BQU9ELEtBQUssQ0FBQyxFQUFFLElBQUk7SUFDckIsRUFBRSxPQUFNO1FBQ04sT0FBTztJQUNUO0FBQ0Y7QUFFTyxlQUFlRSxhQUFhQyxRQUFnQjtJQUNqRCxPQUFPLE1BQU0xQixxREFBVyxDQUFDMEIsVUFBVTtBQUNyQztBQUVPLGVBQWVFLE9BQU9DLFFBQWdCLEVBQUVILFFBQWdCLEVBQUVJLFVBQW1CO0lBQ2xGLE1BQU1DLGlCQUFpQixNQUFNTixhQUFhQztJQUUxQywwQ0FBMEM7SUFDMUMsSUFBSU0sWUFBWTtJQUNoQixJQUFJQyxtQkFBbUI7SUFFdkIsSUFBSUgsZUFBZSxRQUFRO1FBQ3pCRSxZQUFZLFVBQVUsdUJBQXVCOztJQUMvQyxPQUFPLElBQUlGLGVBQWUsUUFBUTtRQUNoQ0csbUJBQW1CO0lBQ3JCO0lBRUEsTUFBTVYsUUFBUSxNQUFNeEIsOENBQUssQ0FBQzs7WUFFaEIsRUFBRThCLFNBQVMsRUFBRSxFQUFFRSxlQUFlLEVBQUUsRUFBRUQsY0FBYyxLQUFLLEVBQUUsRUFBRUUsVUFBVSxFQUFFLEVBQUVDLGlCQUFpQjs7RUFFbEcsQ0FBQztJQUVELE1BQU1DLE9BQU9YLEtBQUssQ0FBQyxFQUFFO0lBQ3JCLE1BQU1MLFFBQVEsTUFBTVgsUUFBUTtRQUFFaUIsUUFBUVUsS0FBS0MsRUFBRTtJQUFDO0lBRTlDLE9BQU87UUFBRUQ7UUFBTWhCO0lBQU07QUFDdkI7QUFFTyxlQUFla0IsT0FBT1AsUUFBZ0IsRUFBRUgsUUFBZ0I7SUFDN0QsTUFBTUgsUUFBUSxNQUFNeEIsOENBQUssQ0FBQyxxQ0FBcUMsRUFBRThCLFNBQVMsQ0FBQztJQUMzRSxNQUFNSyxPQUFPWCxLQUFLLENBQUMsRUFBRTtJQUVyQixJQUFJLENBQUNXLE1BQU07UUFDVCxNQUFNLElBQUlHLE1BQU07SUFDbEI7SUFFQSxNQUFNQyxVQUFVLE1BQU10Qyx3REFBYyxDQUFDMEIsVUFBVVEsS0FBS00sYUFBYTtJQUNqRSxJQUFJLENBQUNGLFNBQVM7UUFDWixNQUFNLElBQUlELE1BQU07SUFDbEI7SUFFQSxNQUFNbkIsUUFBUSxNQUFNWCxRQUFRO1FBQUVpQixRQUFRVSxLQUFLQyxFQUFFO0lBQUM7SUFDOUMsT0FBTztRQUFFRDtRQUFNaEI7SUFBTTtBQUN2QiIsInNvdXJjZXMiOlsiL1VzZXJzL3JvaGFuL2NvZGUvcmVhbHRhbGsvbGliL2F1dGgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU2lnbkpXVCwgand0VmVyaWZ5IH0gZnJvbSBcImpvc2VcIlxuaW1wb3J0IHsgY29va2llcyB9IGZyb20gXCJuZXh0L2hlYWRlcnNcIlxuaW1wb3J0IHsgcXVlcnkgfSBmcm9tIFwiQC9saWIvZGJcIlxuaW1wb3J0IGJjcnlwdCBmcm9tIFwiYmNyeXB0anNcIlxuXG5jb25zdCBrZXkgPSBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUocHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCB8fCBcImZhbGxiYWNrLXNlY3JldC1rZXlcIilcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGVuY3J5cHQocGF5bG9hZDogYW55KSB7XG4gIHJldHVybiBhd2FpdCBuZXcgU2lnbkpXVChwYXlsb2FkKVxuICAgIC5zZXRQcm90ZWN0ZWRIZWFkZXIoeyBhbGc6IFwiSFMyNTZcIiB9KVxuICAgIC5zZXRJc3N1ZWRBdCgpXG4gICAgLnNldEV4cGlyYXRpb25UaW1lKFwiMjRoXCIpXG4gICAgLnNpZ24oa2V5KVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVjcnlwdChpbnB1dDogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcbiAgY29uc3QgeyBwYXlsb2FkIH0gPSBhd2FpdCBqd3RWZXJpZnkoaW5wdXQsIGtleSwge1xuICAgIGFsZ29yaXRobXM6IFtcIkhTMjU2XCJdLFxuICB9KVxuICByZXR1cm4gcGF5bG9hZFxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdmVyaWZ5VG9rZW4odG9rZW46IHN0cmluZykge1xuICB0cnkge1xuICAgIHJldHVybiBhd2FpdCBkZWNyeXB0KHRva2VuKVxuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDdXJyZW50VXNlcigpIHtcbiAgY29uc3QgY29va2llU3RvcmUgPSBhd2FpdCBjb29raWVzKClcbiAgY29uc3QgdG9rZW4gPSBjb29raWVTdG9yZS5nZXQoXCJhdXRoLXRva2VuXCIpPy52YWx1ZVxuXG4gIGlmICghdG9rZW4pIHJldHVybiBudWxsXG5cbiAgdHJ5IHtcbiAgICBjb25zdCBwYXlsb2FkID0gYXdhaXQgZGVjcnlwdCh0b2tlbilcbiAgICBjb25zdCB1c2VycyA9IGF3YWl0IHF1ZXJ5YFNFTEVDVCAqIEZST00gdXNlcnMgV0hFUkUgaWQgPSAke3BheWxvYWQudXNlcklkfWBcbiAgICByZXR1cm4gdXNlcnNbMF0gfHwgbnVsbFxuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYXNoUGFzc3dvcmQocGFzc3dvcmQ6IHN0cmluZykge1xuICByZXR1cm4gYXdhaXQgYmNyeXB0Lmhhc2gocGFzc3dvcmQsIDEyKVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2lnblVwKHVzZXJuYW1lOiBzdHJpbmcsIHBhc3N3b3JkOiBzdHJpbmcsIHNpZ251cENvZGU/OiBzdHJpbmcpIHtcbiAgY29uc3QgaGFzaGVkUGFzc3dvcmQgPSBhd2FpdCBoYXNoUGFzc3dvcmQocGFzc3dvcmQpXG5cbiAgLy8gU2V0IGRlZmF1bHQgdmFsdWVzIGJhc2VkIG9uIHNpZ251cCBjb2RlXG4gIGxldCBuYW1lQ29sb3IgPSBudWxsXG4gIGxldCBoYXNHb2xkQW5pbWF0aW9uID0gZmFsc2VcblxuICBpZiAoc2lnbnVwQ29kZSA9PT0gXCJhc2RmXCIpIHtcbiAgICBuYW1lQ29sb3IgPSBcIiM2MzY2ZjFcIiAvLyBEZWZhdWx0IGluZGlnbyBjb2xvclxuICB9IGVsc2UgaWYgKHNpZ251cENvZGUgPT09IFwicXdlYVwiKSB7XG4gICAgaGFzR29sZEFuaW1hdGlvbiA9IHRydWVcbiAgfVxuXG4gIGNvbnN0IHVzZXJzID0gYXdhaXQgcXVlcnlgXG4gICAgSU5TRVJUIElOVE8gdXNlcnMgKHVzZXJuYW1lLCBwYXNzd29yZF9oYXNoLCBzaWdudXBfY29kZSwgbmFtZV9jb2xvciwgaGFzX2dvbGRfYW5pbWF0aW9uLCB0aGVtZSwgaHVlLCBub3RpZmljYXRpb25zX2VuYWJsZWQsIGxhc3RfYWN0aXZlLCB1aV9tb2RlKVxuICAgIFZBTFVFUyAoJHt1c2VybmFtZX0sICR7aGFzaGVkUGFzc3dvcmR9LCAke3NpZ251cENvZGUgfHwgbnVsbH0sICR7bmFtZUNvbG9yfSwgJHtoYXNHb2xkQW5pbWF0aW9ufSwgJ2xpZ2h0JywgJ2JsdWUnLCBmYWxzZSwgTk9XKCksICdmdWxsJylcbiAgICBSRVRVUk5JTkcgKlxuICBgXG5cbiAgY29uc3QgdXNlciA9IHVzZXJzWzBdXG4gIGNvbnN0IHRva2VuID0gYXdhaXQgZW5jcnlwdCh7IHVzZXJJZDogdXNlci5pZCB9KVxuXG4gIHJldHVybiB7IHVzZXIsIHRva2VuIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNpZ25Jbih1c2VybmFtZTogc3RyaW5nLCBwYXNzd29yZDogc3RyaW5nKSB7XG4gIGNvbnN0IHVzZXJzID0gYXdhaXQgcXVlcnlgU0VMRUNUICogRlJPTSB1c2VycyBXSEVSRSB1c2VybmFtZSA9ICR7dXNlcm5hbWV9YFxuICBjb25zdCB1c2VyID0gdXNlcnNbMF1cblxuICBpZiAoIXVzZXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHVzZXJuYW1lIG9yIHBhc3N3b3JkXCIpXG4gIH1cblxuICBjb25zdCBpc1ZhbGlkID0gYXdhaXQgYmNyeXB0LmNvbXBhcmUocGFzc3dvcmQsIHVzZXIucGFzc3dvcmRfaGFzaClcbiAgaWYgKCFpc1ZhbGlkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCB1c2VybmFtZSBvciBwYXNzd29yZFwiKVxuICB9XG5cbiAgY29uc3QgdG9rZW4gPSBhd2FpdCBlbmNyeXB0KHsgdXNlcklkOiB1c2VyLmlkIH0pXG4gIHJldHVybiB7IHVzZXIsIHRva2VuIH1cbn1cbiJdLCJuYW1lcyI6WyJTaWduSldUIiwiand0VmVyaWZ5IiwiY29va2llcyIsInF1ZXJ5IiwiYmNyeXB0Iiwia2V5IiwiVGV4dEVuY29kZXIiLCJlbmNvZGUiLCJwcm9jZXNzIiwiZW52IiwiSldUX1NFQ1JFVCIsImVuY3J5cHQiLCJwYXlsb2FkIiwic2V0UHJvdGVjdGVkSGVhZGVyIiwiYWxnIiwic2V0SXNzdWVkQXQiLCJzZXRFeHBpcmF0aW9uVGltZSIsInNpZ24iLCJkZWNyeXB0IiwiaW5wdXQiLCJhbGdvcml0aG1zIiwidmVyaWZ5VG9rZW4iLCJ0b2tlbiIsImdldEN1cnJlbnRVc2VyIiwiY29va2llU3RvcmUiLCJnZXQiLCJ2YWx1ZSIsInVzZXJzIiwidXNlcklkIiwiaGFzaFBhc3N3b3JkIiwicGFzc3dvcmQiLCJoYXNoIiwic2lnblVwIiwidXNlcm5hbWUiLCJzaWdudXBDb2RlIiwiaGFzaGVkUGFzc3dvcmQiLCJuYW1lQ29sb3IiLCJoYXNHb2xkQW5pbWF0aW9uIiwidXNlciIsImlkIiwic2lnbkluIiwiRXJyb3IiLCJpc1ZhbGlkIiwiY29tcGFyZSIsInBhc3N3b3JkX2hhc2giXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./lib/constants.ts":
/*!**************************!*\
  !*** ./lib/constants.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AI_USERNAME: () => (/* binding */ AI_USERNAME),\n/* harmony export */   AI_USER_ID: () => (/* binding */ AI_USER_ID)\n/* harmony export */ });\n// lib/constants.ts\nconst AI_USER_ID = \"00000000-0000-0000-0000-00000000000a\" // Example UUID for AI user\n;\nconst AI_USERNAME = \"real.AI\";\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvY29uc3RhbnRzLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsbUJBQW1CO0FBQ1osTUFBTUEsYUFBYSx1Q0FBdUMsMkJBQTJCO0NBQTVCO0FBQ3pELE1BQU1DLGNBQWMsVUFBUyIsInNvdXJjZXMiOlsiL1VzZXJzL3JvaGFuL2NvZGUvcmVhbHRhbGsvbGliL2NvbnN0YW50cy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBsaWIvY29uc3RhbnRzLnRzXG5leHBvcnQgY29uc3QgQUlfVVNFUl9JRCA9IFwiMDAwMDAwMDAtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDBhXCIgLy8gRXhhbXBsZSBVVUlEIGZvciBBSSB1c2VyXG5leHBvcnQgY29uc3QgQUlfVVNFUk5BTUUgPSBcInJlYWwuQUlcIlxuIl0sIm5hbWVzIjpbIkFJX1VTRVJfSUQiLCJBSV9VU0VSTkFNRSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/constants.ts\n");

/***/ }),

/***/ "(rsc)/./lib/db.ts":
/*!*******************!*\
  !*** ./lib/db.ts ***!
  \*******************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addMessageReaction: () => (/* binding */ addMessageReaction),\n/* harmony export */   approveJoinRequest: () => (/* binding */ approveJoinRequest),\n/* harmony export */   clearUserFrozen: () => (/* binding */ clearUserFrozen),\n/* harmony export */   createFriendship: () => (/* binding */ createFriendship),\n/* harmony export */   createGroupChat: () => (/* binding */ createGroupChat),\n/* harmony export */   createJoinRequest: () => (/* binding */ createJoinRequest),\n/* harmony export */   createMessage: () => (/* binding */ createMessage),\n/* harmony export */   createNotification: () => (/* binding */ createNotification),\n/* harmony export */   createUser: () => (/* binding */ createUser),\n/* harmony export */   db: () => (/* binding */ db),\n/* harmony export */   deleteGroupChat: () => (/* binding */ deleteGroupChat),\n/* harmony export */   getAcceptedFriends: () => (/* binding */ getAcceptedFriends),\n/* harmony export */   getFriendships: () => (/* binding */ getFriendships),\n/* harmony export */   getGroupChatByShortCode: () => (/* binding */ getGroupChatByShortCode),\n/* harmony export */   getMessages: () => (/* binding */ getMessages),\n/* harmony export */   getOnlineUsers: () => (/* binding */ getOnlineUsers),\n/* harmony export */   getPendingJoinRequests: () => (/* binding */ getPendingJoinRequests),\n/* harmony export */   getUnreadNotifications: () => (/* binding */ getUnreadNotifications),\n/* harmony export */   getUserById: () => (/* binding */ getUserById),\n/* harmony export */   getUserByUsername: () => (/* binding */ getUserByUsername),\n/* harmony export */   getUserDMs: () => (/* binding */ getUserDMs),\n/* harmony export */   getUserFreezeStatus: () => (/* binding */ getUserFreezeStatus),\n/* harmony export */   getUserGroupChats: () => (/* binding */ getUserGroupChats),\n/* harmony export */   markNotificationAsRead: () => (/* binding */ markNotificationAsRead),\n/* harmony export */   query: () => (/* binding */ query),\n/* harmony export */   rejectJoinRequest: () => (/* binding */ rejectJoinRequest),\n/* harmony export */   removeMessageReaction: () => (/* binding */ removeMessageReaction),\n/* harmony export */   searchUsers: () => (/* binding */ searchUsers),\n/* harmony export */   setUserFrozen: () => (/* binding */ setUserFrozen),\n/* harmony export */   updateFriendshipStatus: () => (/* binding */ updateFriendshipStatus),\n/* harmony export */   updateUserActivity: () => (/* binding */ updateUserActivity),\n/* harmony export */   updateUserSettings: () => (/* binding */ updateUserSettings)\n/* harmony export */ });\n/* harmony import */ var server_only__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! server-only */ \"(rsc)/./node_modules/.pnpm/next@15.2.4_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/next/dist/compiled/server-only/empty.js\");\n/* harmony import */ var server_only__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(server_only__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _neondatabase_serverless__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @neondatabase/serverless */ \"@neondatabase/serverless\");\n/* harmony import */ var _lib_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/constants */ \"(rsc)/./lib/constants.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_neondatabase_serverless__WEBPACK_IMPORTED_MODULE_1__]);\n_neondatabase_serverless__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\nconst sql = (0,_neondatabase_serverless__WEBPACK_IMPORTED_MODULE_1__.neon)(process.env.DATABASE_URL);\nconst query = sql;\nconst db = sql;\n// Database helper functions\nasync function createUser(username, passwordHash, signupCode) {\n    try {\n        let nameColor = null;\n        const customTitle = null;\n        let hasGoldAnimation = false;\n        if (signupCode === \"asdf\") {\n            nameColor = \"#6366f1\";\n        } else if (signupCode === \"qwea\") {\n            hasGoldAnimation = true;\n        }\n        const result = await sql`\n      INSERT INTO users (username, password_hash, signup_code, name_color, has_gold_animation, email, last_active, theme, hue, ui_mode)\n      VALUES (${username}, ${passwordHash}, ${signupCode}, ${nameColor}, ${hasGoldAnimation}, NULL, NOW(), 'light', 'blue', 'full')\n      RETURNING id, username, email, signup_code, name_color, custom_title, has_gold_animation, notifications_enabled, theme, hue, profile_picture, bio, ui_mode\n    `;\n        return result[0];\n    } catch (err) {\n        console.error(\"[db] createUser error:\", err);\n        throw new Error(\"Database error: \" + err.message);\n    }\n}\nasync function getUserByUsername(username) {\n    try {\n        const rows = await sql`\n      SELECT *\n      FROM users\n      WHERE username = ${username}\n      LIMIT 1\n    `;\n        return rows[0];\n    } catch (err) {\n        console.error(\"[db] getUserByUsername error:\", err);\n        throw new Error(\"Database error: \" + err.message);\n    }\n}\nasync function getUserById(id) {\n    try {\n        const result = await sql`\n      SELECT id, username, email, signup_code, name_color, custom_title, has_gold_animation, \n             notifications_enabled, theme, hue, profile_picture, bio, ui_mode\n      FROM users WHERE id = ${id}\n    `;\n        return result[0];\n    } catch (err) {\n        console.error(\"[db] getUserById error:\", err);\n        throw new Error(\"Database error: \" + err.message);\n    }\n}\nasync function updateUserActivity(userId) {\n    try {\n        await sql`\n      UPDATE users \n      SET last_active = NOW()\n      WHERE id = ${userId}\n    `;\n        return true;\n    } catch (err) {\n        console.error(\"[db] updateUserActivity error:\", err);\n        throw new Error(\"Database error: \" + err.message);\n    }\n}\nasync function getOnlineUsers(currentUserId) {\n    try {\n        const result = await sql`\n      SELECT DISTINCT u.id, u.username, u.name_color, u.has_gold_animation, u.last_active\n      FROM users u\n      JOIN friendships f ON (\n        (f.requester_id = ${currentUserId} AND f.addressee_id = u.id) OR\n        (f.addressee_id = ${currentUserId} AND f.requester_id = u.id)\n      )\n      WHERE u.last_active > NOW() - INTERVAL '10 minutes'\n      AND f.status = 'accepted'\n      AND u.id != ${currentUserId}\n      AND u.id != ${_lib_constants__WEBPACK_IMPORTED_MODULE_2__.AI_USER_ID}\n      ORDER BY u.username\n    `;\n        return result;\n    } catch (err) {\n        console.error(\"[db] getOnlineUsers error:\", err);\n        throw new Error(\"Database error: \" + err.message);\n    }\n}\nasync function searchUsers(searchQuery, currentUserId) {\n    try {\n        const result = await sql`\n      SELECT id, username, name_color, custom_title, has_gold_animation\n      FROM users \n      WHERE username ILIKE ${`%${searchQuery}%`} \n      AND id != ${currentUserId}\n      AND id != ${_lib_constants__WEBPACK_IMPORTED_MODULE_2__.AI_USER_ID}\n      LIMIT 10\n    `;\n        return result;\n    } catch (err) {\n        console.error(\"[db] searchUsers error:\", err);\n        throw new Error(\"Database error: \" + err.message);\n    }\n}\nasync function getMessages(chatType, chatId, userId, limit = 50) {\n    try {\n        if (chatType === \"global\") {\n            const result = await sql`\n        SELECT m.*, u.username, u.name_color, u.custom_title, u.has_gold_animation,\n               COALESCE(\n                 json_agg(\n                   json_build_object(\n                     'emoji', mr.emoji,\n                     'count', mr.reaction_count,\n                     'reacted_by_me', CASE WHEN mr.user_reacted THEN true ELSE false END\n                   )\n                 ) FILTER (WHERE mr.emoji IS NOT NULL), \n                 '[]'::json\n               ) as reactions,\n               pm.content AS parent_message_content,\n               pu.username AS parent_message_username\n        FROM messages m\n        JOIN users u ON m.sender_id = u.id\n        LEFT JOIN (\n          SELECT \n            message_id,\n            emoji,\n            COUNT(*) as reaction_count,\n            BOOL_OR(user_id = ${userId || null}) as user_reacted\n          FROM message_reactions\n          GROUP BY message_id, emoji\n        ) mr ON m.id = mr.message_id\n        LEFT JOIN messages pm ON m.parent_message_id = pm.id\n        LEFT JOIN users pu ON pm.sender_id = pu.id\n        WHERE m.chat_type = 'global'\n        GROUP BY m.id, u.username, u.name_color, u.custom_title, u.has_gold_animation, pm.content, pu.username\n        ORDER BY m.created_at DESC\n        LIMIT ${limit}\n      `;\n            return result.reverse();\n        } else if (chatType === \"dm\") {\n            const result = await sql`\n        SELECT m.*, u.username, u.name_color, u.custom_title, u.has_gold_animation,\n               COALESCE(\n                 json_agg(\n                   json_build_object(\n                     'emoji', mr.emoji,\n                     'count', mr.reaction_count,\n                     'reacted_by_me', CASE WHEN mr.user_reacted THEN true ELSE false END\n                   )\n                 ) FILTER (WHERE mr.emoji IS NOT NULL), \n                 '[]'::json\n               ) as reactions,\n               pm.content AS parent_message_content,\n               pu.username AS parent_message_username\n        FROM messages m\n        JOIN users u ON m.sender_id = u.id\n        LEFT JOIN (\n          SELECT \n            message_id,\n            emoji,\n            COUNT(*) as reaction_count,\n            BOOL_OR(user_id = ${userId || null}) as user_reacted\n          FROM message_reactions\n          GROUP BY message_id, emoji\n        ) mr ON m.id = mr.message_id\n        LEFT JOIN messages pm ON m.parent_message_id = pm.id\n        LEFT JOIN users pu ON pm.sender_id = pu.id\n        WHERE m.chat_type = 'dm' \n          AND ((m.sender_id = ${userId} AND m.chat_id = ${chatId}) \n               OR (m.sender_id = ${chatId} AND m.chat_id = ${userId}))\n        GROUP BY m.id, u.username, u.name_color, u.custom_title, u.has_gold_animation, pm.content, pu.username\n        ORDER BY m.created_at DESC\n        LIMIT ${limit}\n      `;\n            return result.reverse();\n        } else if (chatType === \"channel\") {\n            const result = await sql`\n        SELECT m.*, u.username, u.name_color, u.custom_title, u.has_gold_animation,\n               COALESCE(\n                 json_agg(\n                   json_build_object(\n                     'emoji', mr.emoji,\n                     'count', mr.reaction_count,\n                     'reacted_by_me', CASE WHEN mr.user_reacted THEN true ELSE false END\n                   )\n                 ) FILTER (WHERE mr.emoji IS NOT NULL), \n                 '[]'::json\n               ) as reactions,\n               pm.content AS parent_message_content,\n               pu.username AS parent_message_username\n        FROM messages m\n        JOIN users u ON m.sender_id = u.id\n        LEFT JOIN (\n          SELECT \n            message_id,\n            emoji,\n            COUNT(*) as reaction_count,\n            BOOL_OR(user_id = ${userId || null}) as user_reacted\n          FROM message_reactions\n          GROUP BY message_id, emoji\n        ) mr ON m.id = mr.message_id\n        LEFT JOIN messages pm ON m.parent_message_id = pm.id\n        LEFT JOIN users pu ON pm.sender_id = pu.id\n        WHERE m.chat_type = 'channel' AND m.chat_id = ${chatId}\n        GROUP BY m.id, u.username, u.name_color, u.custom_title, u.has_gold_animation, pm.content, pu.username\n        ORDER BY m.created_at DESC\n        LIMIT ${limit}\n      `;\n            return result.reverse();\n        } else {\n            const result = await sql`\n        SELECT m.*, u.username, u.name_color, u.custom_title, u.has_gold_animation,\n               COALESCE(\n                 json_agg(\n                   json_build_object(\n                     'emoji', mr.emoji,\n                     'count', mr.reaction_count,\n                     'reacted_by_me', CASE WHEN mr.user_reacted THEN true ELSE false END\n                   )\n                 ) FILTER (WHERE mr.emoji IS NOT NULL), \n                 '[]'::json\n               ) as reactions,\n               pm.content AS parent_message_content,\n               pu.username AS parent_message_username\n        FROM messages m\n        JOIN users u ON m.sender_id = u.id\n        LEFT JOIN (\n          SELECT \n            message_id,\n            emoji,\n            COUNT(*) as reaction_count,\n            BOOL_OR(user_id = ${userId || null}) as user_reacted\n          FROM message_reactions\n          GROUP BY message_id, emoji\n        ) mr ON m.id = mr.message_id\n        LEFT JOIN messages pm ON m.parent_message_id = pm.id\n        LEFT JOIN users pu ON pm.sender_id = pu.id\n        WHERE m.chat_type = ${chatType} AND m.chat_id = ${chatId}\n        GROUP BY m.id, u.username, u.name_color, u.custom_title, u.has_gold_animation, pm.content, pu.username\n        ORDER BY m.created_at DESC\n        LIMIT ${limit}\n      `;\n            return result.reverse();\n        }\n    } catch (err) {\n        console.error(\"[db] getMessages error:\", err);\n        throw new Error(\"Database error: \" + err.message);\n    }\n}\nasync function createMessage(senderId, content, chatType, chatId, mentions = [], isAiResponse = false, parentMessageId, messageType = \"text\") {\n    try {\n        const result = await sql`\n      INSERT INTO messages (sender_id, content, chat_type, chat_id, mentions, is_ai_response, parent_message_id, message_type)\n      VALUES (${senderId}, ${content}, ${chatType}, ${chatId}, ${mentions}, ${isAiResponse}, ${parentMessageId}, ${messageType})\n      RETURNING *\n    `;\n        return result[0];\n    } catch (err) {\n        console.error(\"[db] createMessage error:\", err);\n        throw new Error(\"Database error: \" + err.message);\n    }\n}\n// Generate a random short code\nfunction generateShortCode() {\n    const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';\n    let result = '';\n    for(let i = 0; i < 6; i++){\n        result += chars.charAt(Math.floor(Math.random() * chars.length));\n    }\n    return result;\n}\nasync function createGroupChat(name, creatorId, memberIds = []) {\n    try {\n        // Generate a unique short code\n        let shortCode;\n        let attempts = 0;\n        let existing;\n        do {\n            shortCode = generateShortCode();\n            existing = await sql`SELECT id FROM group_chats WHERE short_code = ${shortCode}`;\n            attempts++;\n            if (attempts > 10) {\n                throw new Error(\"Failed to generate unique short code\");\n            }\n        }while (existing.length > 0);\n        const result = await sql`\n      INSERT INTO group_chats (name, creator_id, short_code)\n      VALUES (${name}, ${creatorId}, ${shortCode})\n      RETURNING *\n    `;\n        await sql`\n      INSERT INTO group_chat_members (group_chat_id, user_id)\n      VALUES (${result[0].id}, ${creatorId})\n    `;\n        for (const memberId of memberIds){\n            if (memberId !== creatorId) {\n                await sql`\n          INSERT INTO group_chat_members (group_chat_id, user_id)\n          VALUES (${result[0].id}, ${memberId})\n          ON CONFLICT (group_chat_id, user_id) DO NOTHING\n        `;\n            }\n        }\n        return result[0];\n    } catch (err) {\n        console.error(\"[db] createGroupChat error:\", err);\n        throw new Error(\"Database error: \" + err.message);\n    }\n}\nasync function getUserGroupChats(userId) {\n    try {\n        const result = await sql`\n      SELECT gc.*, u.username as creator_username\n      FROM group_chats gc\n      JOIN group_chat_members gcm ON gc.id = gcm.group_chat_id\n      JOIN users u ON gc.creator_id = u.id\n      WHERE gcm.user_id = ${userId}\n      ORDER BY gc.updated_at DESC\n    `;\n        return result;\n    } catch (err) {\n        console.error(\"[db] getUserGroupChats error:\", err);\n        throw new Error(\"Database error: \" + err.message);\n    }\n}\nasync function getGroupChatByShortCode(shortCode) {\n    try {\n        const result = await sql`\n      SELECT gc.*, u.username as creator_username\n      FROM group_chats gc\n      JOIN users u ON gc.creator_id = u.id\n      WHERE gc.short_code = ${shortCode}\n      LIMIT 1\n    `;\n        return result[0] || null;\n    } catch (err) {\n        console.error(\"[db] getGroupChatByShortCode error:\", err);\n        throw new Error(\"Database error: \" + err.message);\n    }\n}\nasync function createJoinRequest(groupChatId, requesterId) {\n    try {\n        // Check if user is already a member\n        const existingMember = await sql`\n      SELECT id FROM group_chat_members \n      WHERE group_chat_id = ${groupChatId} AND user_id = ${requesterId}\n    `;\n        if (existingMember.length > 0) {\n            throw new Error(\"Already a member of this group chat\");\n        }\n        // Check if there's already a pending request\n        const existingRequest = await sql`\n      SELECT id FROM group_join_requests \n      WHERE group_chat_id = ${groupChatId} AND requester_id = ${requesterId}\n    `;\n        if (existingRequest.length > 0) {\n            throw new Error(\"Join request already pending\");\n        }\n        const result = await sql`\n      INSERT INTO group_join_requests (group_chat_id, requester_id, status)\n      VALUES (${groupChatId}, ${requesterId}, 'pending')\n      RETURNING *\n    `;\n        return result[0];\n    } catch (err) {\n        console.error(\"[db] createJoinRequest error:\", err);\n        throw new Error(\"Database error: \" + err.message);\n    }\n}\nasync function getPendingJoinRequests(groupChatId) {\n    try {\n        const result = await sql`\n      SELECT gjr.*, u.username, u.name_color, u.custom_title, u.has_gold_animation\n      FROM group_join_requests gjr\n      JOIN users u ON gjr.requester_id = u.id\n      WHERE gjr.group_chat_id = ${groupChatId} AND gjr.status = 'pending'\n      ORDER BY gjr.created_at ASC\n    `;\n        return result;\n    } catch (err) {\n        console.error(\"[db] getPendingJoinRequests error:\", err);\n        throw new Error(\"Database error: \" + err.message);\n    }\n}\nasync function approveJoinRequest(requestId, groupChatId, requesterId) {\n    try {\n        await sql`BEGIN`;\n        // Update the request status\n        await sql`\n      UPDATE group_join_requests \n      SET status = 'approved', updated_at = NOW()\n      WHERE id = ${requestId}\n    `;\n        // Add user to group chat members\n        await sql`\n      INSERT INTO group_chat_members (group_chat_id, user_id)\n      VALUES (${groupChatId}, ${requesterId})\n      ON CONFLICT (group_chat_id, user_id) DO NOTHING\n    `;\n        await sql`COMMIT`;\n        return true;\n    } catch (err) {\n        await sql`ROLLBACK`;\n        console.error(\"[db] approveJoinRequest error:\", err);\n        throw new Error(\"Database error: \" + err.message);\n    }\n}\nasync function rejectJoinRequest(requestId) {\n    try {\n        const result = await sql`\n      UPDATE group_join_requests \n      SET status = 'rejected', updated_at = NOW()\n      WHERE id = ${requestId}\n      RETURNING *\n    `;\n        return result[0];\n    } catch (err) {\n        console.error(\"[db] rejectJoinRequest error:\", err);\n        throw new Error(\"Database error: \" + err.message);\n    }\n}\nasync function deleteGroupChat(groupId, creatorId) {\n    try {\n        const chat = await sql`SELECT creator_id FROM group_chats WHERE id = ${groupId}`;\n        if (!chat[0] || chat[0].creator_id !== creatorId) {\n            throw new Error(\"Unauthorized to delete this group chat.\");\n        }\n        await sql`BEGIN`;\n        await sql`DELETE FROM messages WHERE chat_type = 'group' AND chat_id = ${groupId}`;\n        await sql`DELETE FROM group_chat_members WHERE group_chat_id = ${groupId}`;\n        await sql`DELETE FROM group_chats WHERE id = ${groupId}`;\n        await sql`COMMIT`;\n        return true;\n    } catch (err) {\n        await sql`ROLLBACK`;\n        console.error(\"[db] deleteGroupChat error:\", err);\n        throw new Error(\"Database error: \" + err.message);\n    }\n}\nasync function createFriendship(requesterId, addresseeId) {\n    try {\n        if (requesterId === addresseeId) {\n            throw new Error(\"Cannot send friend request to yourself.\");\n        }\n        const existing = await sql`\n      SELECT * FROM friendships\n      WHERE (requester_id = ${requesterId} AND addressee_id = ${addresseeId})\n         OR (requester_id = ${addresseeId} AND addressee_id = ${requesterId})\n      LIMIT 1\n    `;\n        if (existing.length > 0) {\n            if (existing[0].status === \"pending\") {\n                throw new Error(\"Friend request already pending.\");\n            } else if (existing[0].status === \"accepted\") {\n                throw new Error(\"Already friends with this user.\");\n            } else if (existing[0].status === \"blocked\") {\n                throw new Error(\"Cannot send request due to existing block.\");\n            }\n        }\n        const result = await sql`\n      INSERT INTO friendships (requester_id, addressee_id, status)\n      VALUES (${requesterId}, ${addresseeId}, 'pending')\n      RETURNING *\n    `;\n        return result[0];\n    } catch (err) {\n        console.error(\"[db] createFriendship error:\", err);\n        throw new Error(\"Database error: \" + err.message);\n    }\n}\nasync function updateFriendshipStatus(friendshipId, status) {\n    try {\n        const result = await sql`\n      UPDATE friendships \n      SET status = ${status}, updated_at = NOW()\n      WHERE id = ${friendshipId}\n      RETURNING *\n    `;\n        return result[0];\n    } catch (err) {\n        console.error(\"[db] updateFriendshipStatus error:\", err);\n        throw new Error(\"Database error: \" + err.message);\n    }\n}\nasync function getFriendships(userId) {\n    try {\n        const result = await sql`\n      SELECT f.*, \n             u1.username as requester_username,\n             u2.username as addressee_username,\n             u1.name_color as requester_name_color,\n             u2.name_color as addressee_name_color,\n             u1.has_gold_animation as requester_has_gold,\n             u2.has_gold_animation as addressee_has_gold\n      FROM friendships f\n      JOIN users u1 ON f.requester_id = u1.id\n      JOIN users u2 ON f.addressee_id = u2.id\n      WHERE (f.requester_id = ${userId} OR f.addressee_id = ${userId})\n      ORDER BY f.created_at DESC\n    `;\n        return result;\n    } catch (err) {\n        console.error(\"[db] getFriendships error:\", err);\n        throw new Error(\"Database error: \" + err.message);\n    }\n}\nasync function getAcceptedFriends(userId) {\n    try {\n        const result = await sql`\n      SELECT DISTINCT\n        CASE \n          WHEN f.requester_id = ${userId} THEN u2.id\n          ELSE u1.id\n        END as friend_id,\n        CASE \n          WHEN f.requester_id = ${userId} THEN u2.username\n          ELSE u1.username\n        END as friend_username,\n        CASE \n          WHEN f.requester_id = ${userId} THEN u2.name_color\n          ELSE u1.name_color\n        END as friend_name_color,\n        CASE \n          WHEN f.requester_id = ${userId} THEN u2.has_gold_animation\n          ELSE u1.has_gold_animation\n        END as friend_has_gold\n      FROM friendships f\n      JOIN users u1 ON f.requester_id = u1.id\n      JOIN users u2 ON f.addressee_id = u2.id\n      WHERE (f.requester_id = ${userId} OR f.addressee_id = ${userId})\n      AND f.status = 'accepted'\n      ORDER BY friend_username\n    `;\n        return result;\n    } catch (err) {\n        console.error(\"[db] getAcceptedFriends error:\", err);\n        throw new Error(\"Database error: \" + err.message);\n    }\n}\nasync function getUserDMs(userId) {\n    try {\n        const result = await sql`\n      SELECT DISTINCT\n        CASE\n          WHEN m.sender_id = ${userId} THEN m.chat_id\n          ELSE m.sender_id\n        END as friend_id,\n        u.username as friend_username,\n        u.name_color as friend_name_color,\n        u.has_gold_animation as friend_has_gold,\n        MAX(m.created_at) as last_message_at\n      FROM messages m\n      JOIN users u ON \n        CASE\n          WHEN m.sender_id = ${userId} THEN m.chat_id\n          ELSE m.sender_id\n        END = u.id\n      WHERE m.chat_type = 'dm' \n      AND (m.sender_id = ${userId} OR m.chat_id = ${userId})\n      AND u.id != ${userId}\n      AND u.id != ${_lib_constants__WEBPACK_IMPORTED_MODULE_2__.AI_USER_ID}\n      GROUP BY friend_id, u.username, u.name_color, u.has_gold_animation\n      ORDER BY last_message_at DESC\n    `;\n        return result;\n    } catch (err) {\n        console.error(\"[db] getUserDMs error:\", err);\n        throw new Error(\"Database error: \" + err.message);\n    }\n}\nasync function createNotification(userId, title, message, chatType, chatId, senderUsername) {\n    try {\n        const result = await sql`\n      INSERT INTO notifications (user_id, title, message, chat_type, chat_id, sender_username)\n      VALUES (${userId}, ${title}, ${message}, ${chatType}, ${chatId}, ${senderUsername})\n      RETURNING *\n    `;\n        return result[0];\n    } catch (err) {\n        console.error(\"[db] createNotification error:\", err);\n        throw new Error(\"Database error: \" + err.message);\n    }\n}\nasync function getUnreadNotifications(userId) {\n    try {\n        const result = await sql`\n      SELECT * FROM notifications\n      WHERE user_id = ${userId} AND is_read = FALSE\n      ORDER BY created_at DESC\n    `;\n        return result;\n    } catch (err) {\n        console.error(\"[db] getUnreadNotifications error:\", err);\n        throw new Error(\"Database error: \" + err.message);\n    }\n}\nasync function markNotificationAsRead(notificationId, userId) {\n    try {\n        const result = await sql`\n      UPDATE notifications\n      SET is_read = TRUE, created_at = NOW()\n      WHERE id = ${notificationId} AND user_id = ${userId}\n      RETURNING *\n    `;\n        return result[0];\n    } catch (err) {\n        console.error(\"[db] markNotificationAsRead error:\", err);\n        throw new Error(\"Database error: \" + err.message);\n    }\n}\nasync function addMessageReaction(messageId, userId, emoji) {\n    try {\n        const result = await sql`\n      INSERT INTO message_reactions (message_id, user_id, emoji)\n      VALUES (${messageId}, ${userId}, ${emoji})\n      ON CONFLICT (message_id, user_id, emoji) DO NOTHING\n      RETURNING *\n    `;\n        return result[0];\n    } catch (err) {\n        console.error(\"[db] addMessageReaction error:\", err);\n        throw new Error(\"Database error: \" + err.message);\n    }\n}\nasync function removeMessageReaction(messageId, userId, emoji) {\n    try {\n        await sql`\n      DELETE FROM message_reactions\n      WHERE message_id = ${messageId}\n        AND user_id   = ${userId}\n        AND emoji     = ${emoji}\n    `;\n        return true;\n    } catch (err) {\n        console.error(\"[db] removeMessageReaction error:\", err);\n        throw new Error(\"Database error: \" + err.message);\n    }\n}\nasync function updateUserSettings(userId, updates) {\n    try {\n        const allowedFields = [\n            \"name_color\",\n            \"notifications_enabled\",\n            \"theme\",\n            \"hue\",\n            \"ui_mode\"\n        ];\n        const validUpdates = {};\n        for (const [key, value] of Object.entries(updates)){\n            if (allowedFields.includes(key)) {\n                validUpdates[key] = value;\n            }\n        }\n        if (Object.keys(validUpdates).length === 0) {\n            throw new Error(\"No valid fields to update\");\n        }\n        const setClause = Object.keys(validUpdates).map((key, index)=>`${key} = $${index + 2}`).join(\", \");\n        const queryString = `\n      UPDATE users \n      SET ${setClause}, updated_at = NOW()\n      WHERE id = $1\n      RETURNING id, username, email, signup_code, name_color, custom_title, has_gold_animation, notifications_enabled, theme, hue, profile_picture, bio, ui_mode\n    `;\n        const params = [\n            userId,\n            ...Object.values(validUpdates)\n        ];\n        const result = await sql.unsafe(queryString, params);\n        if (!result || result.length === 0) {\n            throw new Error(\"User not found or no settings updated.\");\n        }\n        return result[0];\n    } catch (err) {\n        console.error(\"[db] updateUserSettings error:\", err);\n        throw new Error(\"Database error: \" + err.message);\n    }\n}\n// Freeze feature\nasync function setUserFrozen(targetUserId, frozenByUserId, message) {\n    try {\n        const result = await sql`\n      UPDATE users\n      SET is_frozen = TRUE, frozen_by = ${frozenByUserId}, freeze_message = ${message || null}, updated_at = NOW()\n      WHERE id = ${targetUserId}\n      RETURNING id, is_frozen, frozen_by, freeze_message\n    `;\n        return result[0];\n    } catch (err) {\n        console.error(\"[db] setUserFrozen error:\", err);\n        throw new Error(\"Database error: \" + err.message);\n    }\n}\nasync function clearUserFrozen(targetUserId) {\n    try {\n        const result = await sql`\n      UPDATE users\n      SET is_frozen = FALSE, frozen_by = NULL, freeze_message = NULL, updated_at = NOW()\n      WHERE id = ${targetUserId}\n      RETURNING id, is_frozen, frozen_by, freeze_message\n    `;\n        return result[0];\n    } catch (err) {\n        console.error(\"[db] clearUserFrozen error:\", err);\n        throw new Error(\"Database error: \" + err.message);\n    }\n}\nasync function getUserFreezeStatus(userId) {\n    try {\n        const result = await sql`\n      SELECT is_frozen, frozen_by, freeze_message FROM users WHERE id = ${userId}\n    `;\n        return result[0];\n    } catch (err) {\n        console.error(\"[db] getUserFreezeStatus error:\", err);\n        throw new Error(\"Database error: \" + err.message);\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RyxJQUFJO1FBQ0YsTUFBTUwsU0FBUyxNQUFNYixHQUFHLENBQUM7O3dDQUVXLEVBQUU4RyxlQUFlLG1CQUFtQixFQUFFNUYsV0FBVyxLQUFLO2lCQUM3RSxFQUFFMkYsYUFBYTs7SUFFNUIsQ0FBQztRQUNELE9BQU9oRyxNQUFNLENBQUMsRUFBRTtJQUNsQixFQUFFLE9BQU9DLEtBQUs7UUFDWkMsUUFBUUMsS0FBSyxDQUFDLDZCQUE2QkY7UUFDM0MsTUFBTSxJQUFJRyxNQUFNLHFCQUFxQixJQUFlQyxPQUFPO0lBQzdEO0FBQ0Y7QUFFTyxlQUFlNkYsZ0JBQWdCRixZQUFvQjtJQUN4RCxJQUFJO1FBQ0YsTUFBTWhHLFNBQVMsTUFBTWIsR0FBRyxDQUFDOzs7aUJBR1osRUFBRTZHLGFBQWE7O0lBRTVCLENBQUM7UUFDRCxPQUFPaEcsTUFBTSxDQUFDLEVBQUU7SUFDbEIsRUFBRSxPQUFPQyxLQUFLO1FBQ1pDLFFBQVFDLEtBQUssQ0FBQywrQkFBK0JGO1FBQzdDLE1BQU0sSUFBSUcsTUFBTSxxQkFBcUIsSUFBZUMsT0FBTztJQUM3RDtBQUNGO0FBRU8sZUFBZThGLG9CQUFvQnhGLE1BQWM7SUFDdEQsSUFBSTtRQUNGLE1BQU1YLFNBQVMsTUFBTWIsR0FBRyxDQUFDO3dFQUMyQyxFQUFFd0IsT0FBTztJQUM3RSxDQUFDO1FBQ0QsT0FBT1gsTUFBTSxDQUFDLEVBQUU7SUFDbEIsRUFBRSxPQUFPQyxLQUFLO1FBQ1pDLFFBQVFDLEtBQUssQ0FBQyxtQ0FBbUNGO1FBQ2pELE1BQU0sSUFBSUcsTUFBTSxxQkFBcUIsSUFBZUMsT0FBTztJQUM3RDtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvcm9oYW4vY29kZS9yZWFsdGFsay9saWIvZGIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFwic2VydmVyLW9ubHlcIlxuaW1wb3J0IHsgbmVvbiB9IGZyb20gXCJAbmVvbmRhdGFiYXNlL3NlcnZlcmxlc3NcIlxuaW1wb3J0IHsgQUlfVVNFUl9JRCB9IGZyb20gXCJAL2xpYi9jb25zdGFudHNcIlxuXG5jb25zdCBzcWwgPSBuZW9uKHByb2Nlc3MuZW52LkRBVEFCQVNFX1VSTCEpXG5cbmV4cG9ydCBjb25zdCBxdWVyeSA9IHNxbFxuZXhwb3J0IGNvbnN0IGRiID0gc3FsXG5cbi8vIERhdGFiYXNlIGhlbHBlciBmdW5jdGlvbnNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVVc2VyKHVzZXJuYW1lOiBzdHJpbmcsIHBhc3N3b3JkSGFzaDogc3RyaW5nLCBzaWdudXBDb2RlPzogc3RyaW5nKSB7XG4gIHRyeSB7XG4gICAgbGV0IG5hbWVDb2xvciA9IG51bGxcbiAgICBjb25zdCBjdXN0b21UaXRsZSA9IG51bGxcbiAgICBsZXQgaGFzR29sZEFuaW1hdGlvbiA9IGZhbHNlXG5cbiAgICBpZiAoc2lnbnVwQ29kZSA9PT0gXCJhc2RmXCIpIHtcbiAgICAgIG5hbWVDb2xvciA9IFwiIzYzNjZmMVwiXG4gICAgfSBlbHNlIGlmIChzaWdudXBDb2RlID09PSBcInF3ZWFcIikge1xuICAgICAgaGFzR29sZEFuaW1hdGlvbiA9IHRydWVcbiAgICB9XG5cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzcWxgXG4gICAgICBJTlNFUlQgSU5UTyB1c2VycyAodXNlcm5hbWUsIHBhc3N3b3JkX2hhc2gsIHNpZ251cF9jb2RlLCBuYW1lX2NvbG9yLCBoYXNfZ29sZF9hbmltYXRpb24sIGVtYWlsLCBsYXN0X2FjdGl2ZSwgdGhlbWUsIGh1ZSwgdWlfbW9kZSlcbiAgICAgIFZBTFVFUyAoJHt1c2VybmFtZX0sICR7cGFzc3dvcmRIYXNofSwgJHtzaWdudXBDb2RlfSwgJHtuYW1lQ29sb3J9LCAke2hhc0dvbGRBbmltYXRpb259LCBOVUxMLCBOT1coKSwgJ2xpZ2h0JywgJ2JsdWUnLCAnZnVsbCcpXG4gICAgICBSRVRVUk5JTkcgaWQsIHVzZXJuYW1lLCBlbWFpbCwgc2lnbnVwX2NvZGUsIG5hbWVfY29sb3IsIGN1c3RvbV90aXRsZSwgaGFzX2dvbGRfYW5pbWF0aW9uLCBub3RpZmljYXRpb25zX2VuYWJsZWQsIHRoZW1lLCBodWUsIHByb2ZpbGVfcGljdHVyZSwgYmlvLCB1aV9tb2RlXG4gICAgYFxuICAgIHJldHVybiByZXN1bHRbMF1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgY29uc29sZS5lcnJvcihcIltkYl0gY3JlYXRlVXNlciBlcnJvcjpcIiwgZXJyKVxuICAgIHRocm93IG5ldyBFcnJvcihcIkRhdGFiYXNlIGVycm9yOiBcIiArIChlcnIgYXMgRXJyb3IpLm1lc3NhZ2UpXG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFVzZXJCeVVzZXJuYW1lKHVzZXJuYW1lOiBzdHJpbmcpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCByb3dzID0gYXdhaXQgc3FsYFxuICAgICAgU0VMRUNUICpcbiAgICAgIEZST00gdXNlcnNcbiAgICAgIFdIRVJFIHVzZXJuYW1lID0gJHt1c2VybmFtZX1cbiAgICAgIExJTUlUIDFcbiAgICBgXG4gICAgcmV0dXJuIHJvd3NbMF1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgY29uc29sZS5lcnJvcihcIltkYl0gZ2V0VXNlckJ5VXNlcm5hbWUgZXJyb3I6XCIsIGVycilcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJEYXRhYmFzZSBlcnJvcjogXCIgKyAoZXJyIGFzIEVycm9yKS5tZXNzYWdlKVxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVc2VyQnlJZChpZDogc3RyaW5nKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc3FsYFxuICAgICAgU0VMRUNUIGlkLCB1c2VybmFtZSwgZW1haWwsIHNpZ251cF9jb2RlLCBuYW1lX2NvbG9yLCBjdXN0b21fdGl0bGUsIGhhc19nb2xkX2FuaW1hdGlvbiwgXG4gICAgICAgICAgICAgbm90aWZpY2F0aW9uc19lbmFibGVkLCB0aGVtZSwgaHVlLCBwcm9maWxlX3BpY3R1cmUsIGJpbywgdWlfbW9kZVxuICAgICAgRlJPTSB1c2VycyBXSEVSRSBpZCA9ICR7aWR9XG4gICAgYFxuICAgIHJldHVybiByZXN1bHRbMF1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgY29uc29sZS5lcnJvcihcIltkYl0gZ2V0VXNlckJ5SWQgZXJyb3I6XCIsIGVycilcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJEYXRhYmFzZSBlcnJvcjogXCIgKyAoZXJyIGFzIEVycm9yKS5tZXNzYWdlKVxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVVc2VyQWN0aXZpdHkodXNlcklkOiBzdHJpbmcpIHtcbiAgdHJ5IHtcbiAgICBhd2FpdCBzcWxgXG4gICAgICBVUERBVEUgdXNlcnMgXG4gICAgICBTRVQgbGFzdF9hY3RpdmUgPSBOT1coKVxuICAgICAgV0hFUkUgaWQgPSAke3VzZXJJZH1cbiAgICBgXG4gICAgcmV0dXJuIHRydWVcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgY29uc29sZS5lcnJvcihcIltkYl0gdXBkYXRlVXNlckFjdGl2aXR5IGVycm9yOlwiLCBlcnIpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiRGF0YWJhc2UgZXJyb3I6IFwiICsgKGVyciBhcyBFcnJvcikubWVzc2FnZSlcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0T25saW5lVXNlcnMoY3VycmVudFVzZXJJZDogc3RyaW5nKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc3FsYFxuICAgICAgU0VMRUNUIERJU1RJTkNUIHUuaWQsIHUudXNlcm5hbWUsIHUubmFtZV9jb2xvciwgdS5oYXNfZ29sZF9hbmltYXRpb24sIHUubGFzdF9hY3RpdmVcbiAgICAgIEZST00gdXNlcnMgdVxuICAgICAgSk9JTiBmcmllbmRzaGlwcyBmIE9OIChcbiAgICAgICAgKGYucmVxdWVzdGVyX2lkID0gJHtjdXJyZW50VXNlcklkfSBBTkQgZi5hZGRyZXNzZWVfaWQgPSB1LmlkKSBPUlxuICAgICAgICAoZi5hZGRyZXNzZWVfaWQgPSAke2N1cnJlbnRVc2VySWR9IEFORCBmLnJlcXVlc3Rlcl9pZCA9IHUuaWQpXG4gICAgICApXG4gICAgICBXSEVSRSB1Lmxhc3RfYWN0aXZlID4gTk9XKCkgLSBJTlRFUlZBTCAnMTAgbWludXRlcydcbiAgICAgIEFORCBmLnN0YXR1cyA9ICdhY2NlcHRlZCdcbiAgICAgIEFORCB1LmlkICE9ICR7Y3VycmVudFVzZXJJZH1cbiAgICAgIEFORCB1LmlkICE9ICR7QUlfVVNFUl9JRH1cbiAgICAgIE9SREVSIEJZIHUudXNlcm5hbWVcbiAgICBgXG4gICAgcmV0dXJuIHJlc3VsdFxuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiW2RiXSBnZXRPbmxpbmVVc2VycyBlcnJvcjpcIiwgZXJyKVxuICAgIHRocm93IG5ldyBFcnJvcihcIkRhdGFiYXNlIGVycm9yOiBcIiArIChlcnIgYXMgRXJyb3IpLm1lc3NhZ2UpXG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlYXJjaFVzZXJzKHNlYXJjaFF1ZXJ5OiBzdHJpbmcsIGN1cnJlbnRVc2VySWQ6IHN0cmluZykge1xuICB0cnkge1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNxbGBcbiAgICAgIFNFTEVDVCBpZCwgdXNlcm5hbWUsIG5hbWVfY29sb3IsIGN1c3RvbV90aXRsZSwgaGFzX2dvbGRfYW5pbWF0aW9uXG4gICAgICBGUk9NIHVzZXJzIFxuICAgICAgV0hFUkUgdXNlcm5hbWUgSUxJS0UgJHtgJSR7c2VhcmNoUXVlcnl9JWB9IFxuICAgICAgQU5EIGlkICE9ICR7Y3VycmVudFVzZXJJZH1cbiAgICAgIEFORCBpZCAhPSAke0FJX1VTRVJfSUR9XG4gICAgICBMSU1JVCAxMFxuICAgIGBcbiAgICByZXR1cm4gcmVzdWx0XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJbZGJdIHNlYXJjaFVzZXJzIGVycm9yOlwiLCBlcnIpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiRGF0YWJhc2UgZXJyb3I6IFwiICsgKGVyciBhcyBFcnJvcikubWVzc2FnZSlcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0TWVzc2FnZXMoY2hhdFR5cGU6IHN0cmluZywgY2hhdElkPzogc3RyaW5nLCB1c2VySWQ/OiBzdHJpbmcsIGxpbWl0ID0gNTApIHtcbiAgdHJ5IHtcbiAgICBpZiAoY2hhdFR5cGUgPT09IFwiZ2xvYmFsXCIpIHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNxbGBcbiAgICAgICAgU0VMRUNUIG0uKiwgdS51c2VybmFtZSwgdS5uYW1lX2NvbG9yLCB1LmN1c3RvbV90aXRsZSwgdS5oYXNfZ29sZF9hbmltYXRpb24sXG4gICAgICAgICAgICAgICBDT0FMRVNDRShcbiAgICAgICAgICAgICAgICAganNvbl9hZ2coXG4gICAgICAgICAgICAgICAgICAganNvbl9idWlsZF9vYmplY3QoXG4gICAgICAgICAgICAgICAgICAgICAnZW1vamknLCBtci5lbW9qaSxcbiAgICAgICAgICAgICAgICAgICAgICdjb3VudCcsIG1yLnJlYWN0aW9uX2NvdW50LFxuICAgICAgICAgICAgICAgICAgICAgJ3JlYWN0ZWRfYnlfbWUnLCBDQVNFIFdIRU4gbXIudXNlcl9yZWFjdGVkIFRIRU4gdHJ1ZSBFTFNFIGZhbHNlIEVORFxuICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgKSBGSUxURVIgKFdIRVJFIG1yLmVtb2ppIElTIE5PVCBOVUxMKSwgXG4gICAgICAgICAgICAgICAgICdbXSc6Ompzb25cbiAgICAgICAgICAgICAgICkgYXMgcmVhY3Rpb25zLFxuICAgICAgICAgICAgICAgcG0uY29udGVudCBBUyBwYXJlbnRfbWVzc2FnZV9jb250ZW50LFxuICAgICAgICAgICAgICAgcHUudXNlcm5hbWUgQVMgcGFyZW50X21lc3NhZ2VfdXNlcm5hbWVcbiAgICAgICAgRlJPTSBtZXNzYWdlcyBtXG4gICAgICAgIEpPSU4gdXNlcnMgdSBPTiBtLnNlbmRlcl9pZCA9IHUuaWRcbiAgICAgICAgTEVGVCBKT0lOIChcbiAgICAgICAgICBTRUxFQ1QgXG4gICAgICAgICAgICBtZXNzYWdlX2lkLFxuICAgICAgICAgICAgZW1vamksXG4gICAgICAgICAgICBDT1VOVCgqKSBhcyByZWFjdGlvbl9jb3VudCxcbiAgICAgICAgICAgIEJPT0xfT1IodXNlcl9pZCA9ICR7dXNlcklkIHx8IG51bGx9KSBhcyB1c2VyX3JlYWN0ZWRcbiAgICAgICAgICBGUk9NIG1lc3NhZ2VfcmVhY3Rpb25zXG4gICAgICAgICAgR1JPVVAgQlkgbWVzc2FnZV9pZCwgZW1vamlcbiAgICAgICAgKSBtciBPTiBtLmlkID0gbXIubWVzc2FnZV9pZFxuICAgICAgICBMRUZUIEpPSU4gbWVzc2FnZXMgcG0gT04gbS5wYXJlbnRfbWVzc2FnZV9pZCA9IHBtLmlkXG4gICAgICAgIExFRlQgSk9JTiB1c2VycyBwdSBPTiBwbS5zZW5kZXJfaWQgPSBwdS5pZFxuICAgICAgICBXSEVSRSBtLmNoYXRfdHlwZSA9ICdnbG9iYWwnXG4gICAgICAgIEdST1VQIEJZIG0uaWQsIHUudXNlcm5hbWUsIHUubmFtZV9jb2xvciwgdS5jdXN0b21fdGl0bGUsIHUuaGFzX2dvbGRfYW5pbWF0aW9uLCBwbS5jb250ZW50LCBwdS51c2VybmFtZVxuICAgICAgICBPUkRFUiBCWSBtLmNyZWF0ZWRfYXQgREVTQ1xuICAgICAgICBMSU1JVCAke2xpbWl0fVxuICAgICAgYFxuICAgICAgcmV0dXJuIHJlc3VsdC5yZXZlcnNlKClcbiAgICB9IGVsc2UgaWYgKGNoYXRUeXBlID09PSBcImRtXCIpIHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNxbGBcbiAgICAgICAgU0VMRUNUIG0uKiwgdS51c2VybmFtZSwgdS5uYW1lX2NvbG9yLCB1LmN1c3RvbV90aXRsZSwgdS5oYXNfZ29sZF9hbmltYXRpb24sXG4gICAgICAgICAgICAgICBDT0FMRVNDRShcbiAgICAgICAgICAgICAgICAganNvbl9hZ2coXG4gICAgICAgICAgICAgICAgICAganNvbl9idWlsZF9vYmplY3QoXG4gICAgICAgICAgICAgICAgICAgICAnZW1vamknLCBtci5lbW9qaSxcbiAgICAgICAgICAgICAgICAgICAgICdjb3VudCcsIG1yLnJlYWN0aW9uX2NvdW50LFxuICAgICAgICAgICAgICAgICAgICAgJ3JlYWN0ZWRfYnlfbWUnLCBDQVNFIFdIRU4gbXIudXNlcl9yZWFjdGVkIFRIRU4gdHJ1ZSBFTFNFIGZhbHNlIEVORFxuICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgKSBGSUxURVIgKFdIRVJFIG1yLmVtb2ppIElTIE5PVCBOVUxMKSwgXG4gICAgICAgICAgICAgICAgICdbXSc6Ompzb25cbiAgICAgICAgICAgICAgICkgYXMgcmVhY3Rpb25zLFxuICAgICAgICAgICAgICAgcG0uY29udGVudCBBUyBwYXJlbnRfbWVzc2FnZV9jb250ZW50LFxuICAgICAgICAgICAgICAgcHUudXNlcm5hbWUgQVMgcGFyZW50X21lc3NhZ2VfdXNlcm5hbWVcbiAgICAgICAgRlJPTSBtZXNzYWdlcyBtXG4gICAgICAgIEpPSU4gdXNlcnMgdSBPTiBtLnNlbmRlcl9pZCA9IHUuaWRcbiAgICAgICAgTEVGVCBKT0lOIChcbiAgICAgICAgICBTRUxFQ1QgXG4gICAgICAgICAgICBtZXNzYWdlX2lkLFxuICAgICAgICAgICAgZW1vamksXG4gICAgICAgICAgICBDT1VOVCgqKSBhcyByZWFjdGlvbl9jb3VudCxcbiAgICAgICAgICAgIEJPT0xfT1IodXNlcl9pZCA9ICR7dXNlcklkIHx8IG51bGx9KSBhcyB1c2VyX3JlYWN0ZWRcbiAgICAgICAgICBGUk9NIG1lc3NhZ2VfcmVhY3Rpb25zXG4gICAgICAgICAgR1JPVVAgQlkgbWVzc2FnZV9pZCwgZW1vamlcbiAgICAgICAgKSBtciBPTiBtLmlkID0gbXIubWVzc2FnZV9pZFxuICAgICAgICBMRUZUIEpPSU4gbWVzc2FnZXMgcG0gT04gbS5wYXJlbnRfbWVzc2FnZV9pZCA9IHBtLmlkXG4gICAgICAgIExFRlQgSk9JTiB1c2VycyBwdSBPTiBwbS5zZW5kZXJfaWQgPSBwdS5pZFxuICAgICAgICBXSEVSRSBtLmNoYXRfdHlwZSA9ICdkbScgXG4gICAgICAgICAgQU5EICgobS5zZW5kZXJfaWQgPSAke3VzZXJJZH0gQU5EIG0uY2hhdF9pZCA9ICR7Y2hhdElkfSkgXG4gICAgICAgICAgICAgICBPUiAobS5zZW5kZXJfaWQgPSAke2NoYXRJZH0gQU5EIG0uY2hhdF9pZCA9ICR7dXNlcklkfSkpXG4gICAgICAgIEdST1VQIEJZIG0uaWQsIHUudXNlcm5hbWUsIHUubmFtZV9jb2xvciwgdS5jdXN0b21fdGl0bGUsIHUuaGFzX2dvbGRfYW5pbWF0aW9uLCBwbS5jb250ZW50LCBwdS51c2VybmFtZVxuICAgICAgICBPUkRFUiBCWSBtLmNyZWF0ZWRfYXQgREVTQ1xuICAgICAgICBMSU1JVCAke2xpbWl0fVxuICAgICAgYFxuICAgICAgcmV0dXJuIHJlc3VsdC5yZXZlcnNlKClcbiAgICB9IGVsc2UgaWYgKGNoYXRUeXBlID09PSBcImNoYW5uZWxcIikge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc3FsYFxuICAgICAgICBTRUxFQ1QgbS4qLCB1LnVzZXJuYW1lLCB1Lm5hbWVfY29sb3IsIHUuY3VzdG9tX3RpdGxlLCB1Lmhhc19nb2xkX2FuaW1hdGlvbixcbiAgICAgICAgICAgICAgIENPQUxFU0NFKFxuICAgICAgICAgICAgICAgICBqc29uX2FnZyhcbiAgICAgICAgICAgICAgICAgICBqc29uX2J1aWxkX29iamVjdChcbiAgICAgICAgICAgICAgICAgICAgICdlbW9qaScsIG1yLmVtb2ppLFxuICAgICAgICAgICAgICAgICAgICAgJ2NvdW50JywgbXIucmVhY3Rpb25fY291bnQsXG4gICAgICAgICAgICAgICAgICAgICAncmVhY3RlZF9ieV9tZScsIENBU0UgV0hFTiBtci51c2VyX3JlYWN0ZWQgVEhFTiB0cnVlIEVMU0UgZmFsc2UgRU5EXG4gICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICApIEZJTFRFUiAoV0hFUkUgbXIuZW1vamkgSVMgTk9UIE5VTEwpLCBcbiAgICAgICAgICAgICAgICAgJ1tdJzo6anNvblxuICAgICAgICAgICAgICAgKSBhcyByZWFjdGlvbnMsXG4gICAgICAgICAgICAgICBwbS5jb250ZW50IEFTIHBhcmVudF9tZXNzYWdlX2NvbnRlbnQsXG4gICAgICAgICAgICAgICBwdS51c2VybmFtZSBBUyBwYXJlbnRfbWVzc2FnZV91c2VybmFtZVxuICAgICAgICBGUk9NIG1lc3NhZ2VzIG1cbiAgICAgICAgSk9JTiB1c2VycyB1IE9OIG0uc2VuZGVyX2lkID0gdS5pZFxuICAgICAgICBMRUZUIEpPSU4gKFxuICAgICAgICAgIFNFTEVDVCBcbiAgICAgICAgICAgIG1lc3NhZ2VfaWQsXG4gICAgICAgICAgICBlbW9qaSxcbiAgICAgICAgICAgIENPVU5UKCopIGFzIHJlYWN0aW9uX2NvdW50LFxuICAgICAgICAgICAgQk9PTF9PUih1c2VyX2lkID0gJHt1c2VySWQgfHwgbnVsbH0pIGFzIHVzZXJfcmVhY3RlZFxuICAgICAgICAgIEZST00gbWVzc2FnZV9yZWFjdGlvbnNcbiAgICAgICAgICBHUk9VUCBCWSBtZXNzYWdlX2lkLCBlbW9qaVxuICAgICAgICApIG1yIE9OIG0uaWQgPSBtci5tZXNzYWdlX2lkXG4gICAgICAgIExFRlQgSk9JTiBtZXNzYWdlcyBwbSBPTiBtLnBhcmVudF9tZXNzYWdlX2lkID0gcG0uaWRcbiAgICAgICAgTEVGVCBKT0lOIHVzZXJzIHB1IE9OIHBtLnNlbmRlcl9pZCA9IHB1LmlkXG4gICAgICAgIFdIRVJFIG0uY2hhdF90eXBlID0gJ2NoYW5uZWwnIEFORCBtLmNoYXRfaWQgPSAke2NoYXRJZH1cbiAgICAgICAgR1JPVVAgQlkgbS5pZCwgdS51c2VybmFtZSwgdS5uYW1lX2NvbG9yLCB1LmN1c3RvbV90aXRsZSwgdS5oYXNfZ29sZF9hbmltYXRpb24sIHBtLmNvbnRlbnQsIHB1LnVzZXJuYW1lXG4gICAgICAgIE9SREVSIEJZIG0uY3JlYXRlZF9hdCBERVNDXG4gICAgICAgIExJTUlUICR7bGltaXR9XG4gICAgICBgXG4gICAgICByZXR1cm4gcmVzdWx0LnJldmVyc2UoKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzcWxgXG4gICAgICAgIFNFTEVDVCBtLiosIHUudXNlcm5hbWUsIHUubmFtZV9jb2xvciwgdS5jdXN0b21fdGl0bGUsIHUuaGFzX2dvbGRfYW5pbWF0aW9uLFxuICAgICAgICAgICAgICAgQ09BTEVTQ0UoXG4gICAgICAgICAgICAgICAgIGpzb25fYWdnKFxuICAgICAgICAgICAgICAgICAgIGpzb25fYnVpbGRfb2JqZWN0KFxuICAgICAgICAgICAgICAgICAgICAgJ2Vtb2ppJywgbXIuZW1vamksXG4gICAgICAgICAgICAgICAgICAgICAnY291bnQnLCBtci5yZWFjdGlvbl9jb3VudCxcbiAgICAgICAgICAgICAgICAgICAgICdyZWFjdGVkX2J5X21lJywgQ0FTRSBXSEVOIG1yLnVzZXJfcmVhY3RlZCBUSEVOIHRydWUgRUxTRSBmYWxzZSBFTkRcbiAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICkgRklMVEVSIChXSEVSRSBtci5lbW9qaSBJUyBOT1QgTlVMTCksIFxuICAgICAgICAgICAgICAgICAnW10nOjpqc29uXG4gICAgICAgICAgICAgICApIGFzIHJlYWN0aW9ucyxcbiAgICAgICAgICAgICAgIHBtLmNvbnRlbnQgQVMgcGFyZW50X21lc3NhZ2VfY29udGVudCxcbiAgICAgICAgICAgICAgIHB1LnVzZXJuYW1lIEFTIHBhcmVudF9tZXNzYWdlX3VzZXJuYW1lXG4gICAgICAgIEZST00gbWVzc2FnZXMgbVxuICAgICAgICBKT0lOIHVzZXJzIHUgT04gbS5zZW5kZXJfaWQgPSB1LmlkXG4gICAgICAgIExFRlQgSk9JTiAoXG4gICAgICAgICAgU0VMRUNUIFxuICAgICAgICAgICAgbWVzc2FnZV9pZCxcbiAgICAgICAgICAgIGVtb2ppLFxuICAgICAgICAgICAgQ09VTlQoKikgYXMgcmVhY3Rpb25fY291bnQsXG4gICAgICAgICAgICBCT09MX09SKHVzZXJfaWQgPSAke3VzZXJJZCB8fCBudWxsfSkgYXMgdXNlcl9yZWFjdGVkXG4gICAgICAgICAgRlJPTSBtZXNzYWdlX3JlYWN0aW9uc1xuICAgICAgICAgIEdST1VQIEJZIG1lc3NhZ2VfaWQsIGVtb2ppXG4gICAgICAgICkgbXIgT04gbS5pZCA9IG1yLm1lc3NhZ2VfaWRcbiAgICAgICAgTEVGVCBKT0lOIG1lc3NhZ2VzIHBtIE9OIG0ucGFyZW50X21lc3NhZ2VfaWQgPSBwbS5pZFxuICAgICAgICBMRUZUIEpPSU4gdXNlcnMgcHUgT04gcG0uc2VuZGVyX2lkID0gcHUuaWRcbiAgICAgICAgV0hFUkUgbS5jaGF0X3R5cGUgPSAke2NoYXRUeXBlfSBBTkQgbS5jaGF0X2lkID0gJHtjaGF0SWR9XG4gICAgICAgIEdST1VQIEJZIG0uaWQsIHUudXNlcm5hbWUsIHUubmFtZV9jb2xvciwgdS5jdXN0b21fdGl0bGUsIHUuaGFzX2dvbGRfYW5pbWF0aW9uLCBwbS5jb250ZW50LCBwdS51c2VybmFtZVxuICAgICAgICBPUkRFUiBCWSBtLmNyZWF0ZWRfYXQgREVTQ1xuICAgICAgICBMSU1JVCAke2xpbWl0fVxuICAgICAgYFxuICAgICAgcmV0dXJuIHJlc3VsdC5yZXZlcnNlKClcbiAgICB9XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJbZGJdIGdldE1lc3NhZ2VzIGVycm9yOlwiLCBlcnIpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiRGF0YWJhc2UgZXJyb3I6IFwiICsgKGVyciBhcyBFcnJvcikubWVzc2FnZSlcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlTWVzc2FnZShcbiAgc2VuZGVySWQ6IHN0cmluZyxcbiAgY29udGVudDogc3RyaW5nLFxuICBjaGF0VHlwZTogc3RyaW5nLFxuICBjaGF0SWQ/OiBzdHJpbmcsXG4gIG1lbnRpb25zOiBzdHJpbmdbXSA9IFtdLFxuICBpc0FpUmVzcG9uc2UgPSBmYWxzZSxcbiAgcGFyZW50TWVzc2FnZUlkPzogc3RyaW5nLFxuICBtZXNzYWdlVHlwZSA9IFwidGV4dFwiLFxuKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc3FsYFxuICAgICAgSU5TRVJUIElOVE8gbWVzc2FnZXMgKHNlbmRlcl9pZCwgY29udGVudCwgY2hhdF90eXBlLCBjaGF0X2lkLCBtZW50aW9ucywgaXNfYWlfcmVzcG9uc2UsIHBhcmVudF9tZXNzYWdlX2lkLCBtZXNzYWdlX3R5cGUpXG4gICAgICBWQUxVRVMgKCR7c2VuZGVySWR9LCAke2NvbnRlbnR9LCAke2NoYXRUeXBlfSwgJHtjaGF0SWR9LCAke21lbnRpb25zfSwgJHtpc0FpUmVzcG9uc2V9LCAke3BhcmVudE1lc3NhZ2VJZH0sICR7bWVzc2FnZVR5cGV9KVxuICAgICAgUkVUVVJOSU5HICpcbiAgICBgXG4gICAgcmV0dXJuIHJlc3VsdFswXVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiW2RiXSBjcmVhdGVNZXNzYWdlIGVycm9yOlwiLCBlcnIpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiRGF0YWJhc2UgZXJyb3I6IFwiICsgKGVyciBhcyBFcnJvcikubWVzc2FnZSlcbiAgfVxufVxuXG4vLyBHZW5lcmF0ZSBhIHJhbmRvbSBzaG9ydCBjb2RlXG5mdW5jdGlvbiBnZW5lcmF0ZVNob3J0Q29kZSgpOiBzdHJpbmcge1xuICBjb25zdCBjaGFycyA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWjAxMjM0NTY3ODknXG4gIGxldCByZXN1bHQgPSAnJ1xuICBmb3IgKGxldCBpID0gMDsgaSA8IDY7IGkrKykge1xuICAgIHJlc3VsdCArPSBjaGFycy5jaGFyQXQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY2hhcnMubGVuZ3RoKSlcbiAgfVxuICByZXR1cm4gcmVzdWx0XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVHcm91cENoYXQobmFtZTogc3RyaW5nLCBjcmVhdG9ySWQ6IHN0cmluZywgbWVtYmVySWRzOiBzdHJpbmdbXSA9IFtdKSB7XG4gIHRyeSB7XG4gICAgLy8gR2VuZXJhdGUgYSB1bmlxdWUgc2hvcnQgY29kZVxuICAgIGxldCBzaG9ydENvZGU6IHN0cmluZ1xuICAgIGxldCBhdHRlbXB0cyA9IDBcbiAgICBsZXQgZXhpc3Rpbmc6IGFueVtdXG4gICAgZG8ge1xuICAgICAgc2hvcnRDb2RlID0gZ2VuZXJhdGVTaG9ydENvZGUoKVxuICAgICAgZXhpc3RpbmcgPSBhd2FpdCBzcWxgU0VMRUNUIGlkIEZST00gZ3JvdXBfY2hhdHMgV0hFUkUgc2hvcnRfY29kZSA9ICR7c2hvcnRDb2RlfWBcbiAgICAgIGF0dGVtcHRzKytcbiAgICAgIGlmIChhdHRlbXB0cyA+IDEwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBnZW5lcmF0ZSB1bmlxdWUgc2hvcnQgY29kZVwiKVxuICAgICAgfVxuICAgIH0gd2hpbGUgKGV4aXN0aW5nLmxlbmd0aCA+IDApXG5cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzcWxgXG4gICAgICBJTlNFUlQgSU5UTyBncm91cF9jaGF0cyAobmFtZSwgY3JlYXRvcl9pZCwgc2hvcnRfY29kZSlcbiAgICAgIFZBTFVFUyAoJHtuYW1lfSwgJHtjcmVhdG9ySWR9LCAke3Nob3J0Q29kZX0pXG4gICAgICBSRVRVUk5JTkcgKlxuICAgIGBcblxuICAgIGF3YWl0IHNxbGBcbiAgICAgIElOU0VSVCBJTlRPIGdyb3VwX2NoYXRfbWVtYmVycyAoZ3JvdXBfY2hhdF9pZCwgdXNlcl9pZClcbiAgICAgIFZBTFVFUyAoJHtyZXN1bHRbMF0uaWR9LCAke2NyZWF0b3JJZH0pXG4gICAgYFxuXG4gICAgZm9yIChjb25zdCBtZW1iZXJJZCBvZiBtZW1iZXJJZHMpIHtcbiAgICAgIGlmIChtZW1iZXJJZCAhPT0gY3JlYXRvcklkKSB7XG4gICAgICAgIGF3YWl0IHNxbGBcbiAgICAgICAgICBJTlNFUlQgSU5UTyBncm91cF9jaGF0X21lbWJlcnMgKGdyb3VwX2NoYXRfaWQsIHVzZXJfaWQpXG4gICAgICAgICAgVkFMVUVTICgke3Jlc3VsdFswXS5pZH0sICR7bWVtYmVySWR9KVxuICAgICAgICAgIE9OIENPTkZMSUNUIChncm91cF9jaGF0X2lkLCB1c2VyX2lkKSBETyBOT1RISU5HXG4gICAgICAgIGBcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0WzBdXG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJbZGJdIGNyZWF0ZUdyb3VwQ2hhdCBlcnJvcjpcIiwgZXJyKVxuICAgIHRocm93IG5ldyBFcnJvcihcIkRhdGFiYXNlIGVycm9yOiBcIiArIChlcnIgYXMgRXJyb3IpLm1lc3NhZ2UpXG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFVzZXJHcm91cENoYXRzKHVzZXJJZDogc3RyaW5nKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc3FsYFxuICAgICAgU0VMRUNUIGdjLiosIHUudXNlcm5hbWUgYXMgY3JlYXRvcl91c2VybmFtZVxuICAgICAgRlJPTSBncm91cF9jaGF0cyBnY1xuICAgICAgSk9JTiBncm91cF9jaGF0X21lbWJlcnMgZ2NtIE9OIGdjLmlkID0gZ2NtLmdyb3VwX2NoYXRfaWRcbiAgICAgIEpPSU4gdXNlcnMgdSBPTiBnYy5jcmVhdG9yX2lkID0gdS5pZFxuICAgICAgV0hFUkUgZ2NtLnVzZXJfaWQgPSAke3VzZXJJZH1cbiAgICAgIE9SREVSIEJZIGdjLnVwZGF0ZWRfYXQgREVTQ1xuICAgIGBcbiAgICByZXR1cm4gcmVzdWx0XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJbZGJdIGdldFVzZXJHcm91cENoYXRzIGVycm9yOlwiLCBlcnIpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiRGF0YWJhc2UgZXJyb3I6IFwiICsgKGVyciBhcyBFcnJvcikubWVzc2FnZSlcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0R3JvdXBDaGF0QnlTaG9ydENvZGUoc2hvcnRDb2RlOiBzdHJpbmcpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzcWxgXG4gICAgICBTRUxFQ1QgZ2MuKiwgdS51c2VybmFtZSBhcyBjcmVhdG9yX3VzZXJuYW1lXG4gICAgICBGUk9NIGdyb3VwX2NoYXRzIGdjXG4gICAgICBKT0lOIHVzZXJzIHUgT04gZ2MuY3JlYXRvcl9pZCA9IHUuaWRcbiAgICAgIFdIRVJFIGdjLnNob3J0X2NvZGUgPSAke3Nob3J0Q29kZX1cbiAgICAgIExJTUlUIDFcbiAgICBgXG4gICAgcmV0dXJuIHJlc3VsdFswXSB8fCBudWxsXG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJbZGJdIGdldEdyb3VwQ2hhdEJ5U2hvcnRDb2RlIGVycm9yOlwiLCBlcnIpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiRGF0YWJhc2UgZXJyb3I6IFwiICsgKGVyciBhcyBFcnJvcikubWVzc2FnZSlcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlSm9pblJlcXVlc3QoZ3JvdXBDaGF0SWQ6IHN0cmluZywgcmVxdWVzdGVySWQ6IHN0cmluZykge1xuICB0cnkge1xuICAgIC8vIENoZWNrIGlmIHVzZXIgaXMgYWxyZWFkeSBhIG1lbWJlclxuICAgIGNvbnN0IGV4aXN0aW5nTWVtYmVyID0gYXdhaXQgc3FsYFxuICAgICAgU0VMRUNUIGlkIEZST00gZ3JvdXBfY2hhdF9tZW1iZXJzIFxuICAgICAgV0hFUkUgZ3JvdXBfY2hhdF9pZCA9ICR7Z3JvdXBDaGF0SWR9IEFORCB1c2VyX2lkID0gJHtyZXF1ZXN0ZXJJZH1cbiAgICBgXG4gICAgaWYgKGV4aXN0aW5nTWVtYmVyLmxlbmd0aCA+IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkFscmVhZHkgYSBtZW1iZXIgb2YgdGhpcyBncm91cCBjaGF0XCIpXG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgdGhlcmUncyBhbHJlYWR5IGEgcGVuZGluZyByZXF1ZXN0XG4gICAgY29uc3QgZXhpc3RpbmdSZXF1ZXN0ID0gYXdhaXQgc3FsYFxuICAgICAgU0VMRUNUIGlkIEZST00gZ3JvdXBfam9pbl9yZXF1ZXN0cyBcbiAgICAgIFdIRVJFIGdyb3VwX2NoYXRfaWQgPSAke2dyb3VwQ2hhdElkfSBBTkQgcmVxdWVzdGVyX2lkID0gJHtyZXF1ZXN0ZXJJZH1cbiAgICBgXG4gICAgaWYgKGV4aXN0aW5nUmVxdWVzdC5sZW5ndGggPiAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJKb2luIHJlcXVlc3QgYWxyZWFkeSBwZW5kaW5nXCIpXG4gICAgfVxuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc3FsYFxuICAgICAgSU5TRVJUIElOVE8gZ3JvdXBfam9pbl9yZXF1ZXN0cyAoZ3JvdXBfY2hhdF9pZCwgcmVxdWVzdGVyX2lkLCBzdGF0dXMpXG4gICAgICBWQUxVRVMgKCR7Z3JvdXBDaGF0SWR9LCAke3JlcXVlc3RlcklkfSwgJ3BlbmRpbmcnKVxuICAgICAgUkVUVVJOSU5HICpcbiAgICBgXG4gICAgcmV0dXJuIHJlc3VsdFswXVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiW2RiXSBjcmVhdGVKb2luUmVxdWVzdCBlcnJvcjpcIiwgZXJyKVxuICAgIHRocm93IG5ldyBFcnJvcihcIkRhdGFiYXNlIGVycm9yOiBcIiArIChlcnIgYXMgRXJyb3IpLm1lc3NhZ2UpXG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFBlbmRpbmdKb2luUmVxdWVzdHMoZ3JvdXBDaGF0SWQ6IHN0cmluZykge1xuICB0cnkge1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNxbGBcbiAgICAgIFNFTEVDVCBnanIuKiwgdS51c2VybmFtZSwgdS5uYW1lX2NvbG9yLCB1LmN1c3RvbV90aXRsZSwgdS5oYXNfZ29sZF9hbmltYXRpb25cbiAgICAgIEZST00gZ3JvdXBfam9pbl9yZXF1ZXN0cyBnanJcbiAgICAgIEpPSU4gdXNlcnMgdSBPTiBnanIucmVxdWVzdGVyX2lkID0gdS5pZFxuICAgICAgV0hFUkUgZ2pyLmdyb3VwX2NoYXRfaWQgPSAke2dyb3VwQ2hhdElkfSBBTkQgZ2pyLnN0YXR1cyA9ICdwZW5kaW5nJ1xuICAgICAgT1JERVIgQlkgZ2pyLmNyZWF0ZWRfYXQgQVNDXG4gICAgYFxuICAgIHJldHVybiByZXN1bHRcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgY29uc29sZS5lcnJvcihcIltkYl0gZ2V0UGVuZGluZ0pvaW5SZXF1ZXN0cyBlcnJvcjpcIiwgZXJyKVxuICAgIHRocm93IG5ldyBFcnJvcihcIkRhdGFiYXNlIGVycm9yOiBcIiArIChlcnIgYXMgRXJyb3IpLm1lc3NhZ2UpXG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFwcHJvdmVKb2luUmVxdWVzdChyZXF1ZXN0SWQ6IHN0cmluZywgZ3JvdXBDaGF0SWQ6IHN0cmluZywgcmVxdWVzdGVySWQ6IHN0cmluZykge1xuICB0cnkge1xuICAgIGF3YWl0IHNxbGBCRUdJTmBcbiAgICBcbiAgICAvLyBVcGRhdGUgdGhlIHJlcXVlc3Qgc3RhdHVzXG4gICAgYXdhaXQgc3FsYFxuICAgICAgVVBEQVRFIGdyb3VwX2pvaW5fcmVxdWVzdHMgXG4gICAgICBTRVQgc3RhdHVzID0gJ2FwcHJvdmVkJywgdXBkYXRlZF9hdCA9IE5PVygpXG4gICAgICBXSEVSRSBpZCA9ICR7cmVxdWVzdElkfVxuICAgIGBcbiAgICBcbiAgICAvLyBBZGQgdXNlciB0byBncm91cCBjaGF0IG1lbWJlcnNcbiAgICBhd2FpdCBzcWxgXG4gICAgICBJTlNFUlQgSU5UTyBncm91cF9jaGF0X21lbWJlcnMgKGdyb3VwX2NoYXRfaWQsIHVzZXJfaWQpXG4gICAgICBWQUxVRVMgKCR7Z3JvdXBDaGF0SWR9LCAke3JlcXVlc3RlcklkfSlcbiAgICAgIE9OIENPTkZMSUNUIChncm91cF9jaGF0X2lkLCB1c2VyX2lkKSBETyBOT1RISU5HXG4gICAgYFxuICAgIFxuICAgIGF3YWl0IHNxbGBDT01NSVRgXG4gICAgcmV0dXJuIHRydWVcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgYXdhaXQgc3FsYFJPTExCQUNLYFxuICAgIGNvbnNvbGUuZXJyb3IoXCJbZGJdIGFwcHJvdmVKb2luUmVxdWVzdCBlcnJvcjpcIiwgZXJyKVxuICAgIHRocm93IG5ldyBFcnJvcihcIkRhdGFiYXNlIGVycm9yOiBcIiArIChlcnIgYXMgRXJyb3IpLm1lc3NhZ2UpXG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlamVjdEpvaW5SZXF1ZXN0KHJlcXVlc3RJZDogc3RyaW5nKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc3FsYFxuICAgICAgVVBEQVRFIGdyb3VwX2pvaW5fcmVxdWVzdHMgXG4gICAgICBTRVQgc3RhdHVzID0gJ3JlamVjdGVkJywgdXBkYXRlZF9hdCA9IE5PVygpXG4gICAgICBXSEVSRSBpZCA9ICR7cmVxdWVzdElkfVxuICAgICAgUkVUVVJOSU5HICpcbiAgICBgXG4gICAgcmV0dXJuIHJlc3VsdFswXVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiW2RiXSByZWplY3RKb2luUmVxdWVzdCBlcnJvcjpcIiwgZXJyKVxuICAgIHRocm93IG5ldyBFcnJvcihcIkRhdGFiYXNlIGVycm9yOiBcIiArIChlcnIgYXMgRXJyb3IpLm1lc3NhZ2UpXG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUdyb3VwQ2hhdChncm91cElkOiBzdHJpbmcsIGNyZWF0b3JJZDogc3RyaW5nKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgY2hhdCA9IGF3YWl0IHNxbGBTRUxFQ1QgY3JlYXRvcl9pZCBGUk9NIGdyb3VwX2NoYXRzIFdIRVJFIGlkID0gJHtncm91cElkfWBcbiAgICBpZiAoIWNoYXRbMF0gfHwgY2hhdFswXS5jcmVhdG9yX2lkICE9PSBjcmVhdG9ySWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuYXV0aG9yaXplZCB0byBkZWxldGUgdGhpcyBncm91cCBjaGF0LlwiKVxuICAgIH1cblxuICAgIGF3YWl0IHNxbGBCRUdJTmBcbiAgICBhd2FpdCBzcWxgREVMRVRFIEZST00gbWVzc2FnZXMgV0hFUkUgY2hhdF90eXBlID0gJ2dyb3VwJyBBTkQgY2hhdF9pZCA9ICR7Z3JvdXBJZH1gXG4gICAgYXdhaXQgc3FsYERFTEVURSBGUk9NIGdyb3VwX2NoYXRfbWVtYmVycyBXSEVSRSBncm91cF9jaGF0X2lkID0gJHtncm91cElkfWBcbiAgICBhd2FpdCBzcWxgREVMRVRFIEZST00gZ3JvdXBfY2hhdHMgV0hFUkUgaWQgPSAke2dyb3VwSWR9YFxuICAgIGF3YWl0IHNxbGBDT01NSVRgXG5cbiAgICByZXR1cm4gdHJ1ZVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICBhd2FpdCBzcWxgUk9MTEJBQ0tgXG4gICAgY29uc29sZS5lcnJvcihcIltkYl0gZGVsZXRlR3JvdXBDaGF0IGVycm9yOlwiLCBlcnIpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiRGF0YWJhc2UgZXJyb3I6IFwiICsgKGVyciBhcyBFcnJvcikubWVzc2FnZSlcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlRnJpZW5kc2hpcChyZXF1ZXN0ZXJJZDogc3RyaW5nLCBhZGRyZXNzZWVJZDogc3RyaW5nKSB7XG4gIHRyeSB7XG4gICAgaWYgKHJlcXVlc3RlcklkID09PSBhZGRyZXNzZWVJZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IHNlbmQgZnJpZW5kIHJlcXVlc3QgdG8geW91cnNlbGYuXCIpXG4gICAgfVxuXG4gICAgY29uc3QgZXhpc3RpbmcgPSBhd2FpdCBzcWxgXG4gICAgICBTRUxFQ1QgKiBGUk9NIGZyaWVuZHNoaXBzXG4gICAgICBXSEVSRSAocmVxdWVzdGVyX2lkID0gJHtyZXF1ZXN0ZXJJZH0gQU5EIGFkZHJlc3NlZV9pZCA9ICR7YWRkcmVzc2VlSWR9KVxuICAgICAgICAgT1IgKHJlcXVlc3Rlcl9pZCA9ICR7YWRkcmVzc2VlSWR9IEFORCBhZGRyZXNzZWVfaWQgPSAke3JlcXVlc3RlcklkfSlcbiAgICAgIExJTUlUIDFcbiAgICBgXG5cbiAgICBpZiAoZXhpc3RpbmcubGVuZ3RoID4gMCkge1xuICAgICAgaWYgKGV4aXN0aW5nWzBdLnN0YXR1cyA9PT0gXCJwZW5kaW5nXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRnJpZW5kIHJlcXVlc3QgYWxyZWFkeSBwZW5kaW5nLlwiKVxuICAgICAgfSBlbHNlIGlmIChleGlzdGluZ1swXS5zdGF0dXMgPT09IFwiYWNjZXB0ZWRcIikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBbHJlYWR5IGZyaWVuZHMgd2l0aCB0aGlzIHVzZXIuXCIpXG4gICAgICB9IGVsc2UgaWYgKGV4aXN0aW5nWzBdLnN0YXR1cyA9PT0gXCJibG9ja2VkXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IHNlbmQgcmVxdWVzdCBkdWUgdG8gZXhpc3RpbmcgYmxvY2suXCIpXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc3FsYFxuICAgICAgSU5TRVJUIElOVE8gZnJpZW5kc2hpcHMgKHJlcXVlc3Rlcl9pZCwgYWRkcmVzc2VlX2lkLCBzdGF0dXMpXG4gICAgICBWQUxVRVMgKCR7cmVxdWVzdGVySWR9LCAke2FkZHJlc3NlZUlkfSwgJ3BlbmRpbmcnKVxuICAgICAgUkVUVVJOSU5HICpcbiAgICBgXG4gICAgcmV0dXJuIHJlc3VsdFswXVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiW2RiXSBjcmVhdGVGcmllbmRzaGlwIGVycm9yOlwiLCBlcnIpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiRGF0YWJhc2UgZXJyb3I6IFwiICsgKGVyciBhcyBFcnJvcikubWVzc2FnZSlcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlRnJpZW5kc2hpcFN0YXR1cyhmcmllbmRzaGlwSWQ6IHN0cmluZywgc3RhdHVzOiBzdHJpbmcpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzcWxgXG4gICAgICBVUERBVEUgZnJpZW5kc2hpcHMgXG4gICAgICBTRVQgc3RhdHVzID0gJHtzdGF0dXN9LCB1cGRhdGVkX2F0ID0gTk9XKClcbiAgICAgIFdIRVJFIGlkID0gJHtmcmllbmRzaGlwSWR9XG4gICAgICBSRVRVUk5JTkcgKlxuICAgIGBcbiAgICByZXR1cm4gcmVzdWx0WzBdXG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJbZGJdIHVwZGF0ZUZyaWVuZHNoaXBTdGF0dXMgZXJyb3I6XCIsIGVycilcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJEYXRhYmFzZSBlcnJvcjogXCIgKyAoZXJyIGFzIEVycm9yKS5tZXNzYWdlKVxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRGcmllbmRzaGlwcyh1c2VySWQ6IHN0cmluZykge1xuICB0cnkge1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNxbGBcbiAgICAgIFNFTEVDVCBmLiosIFxuICAgICAgICAgICAgIHUxLnVzZXJuYW1lIGFzIHJlcXVlc3Rlcl91c2VybmFtZSxcbiAgICAgICAgICAgICB1Mi51c2VybmFtZSBhcyBhZGRyZXNzZWVfdXNlcm5hbWUsXG4gICAgICAgICAgICAgdTEubmFtZV9jb2xvciBhcyByZXF1ZXN0ZXJfbmFtZV9jb2xvcixcbiAgICAgICAgICAgICB1Mi5uYW1lX2NvbG9yIGFzIGFkZHJlc3NlZV9uYW1lX2NvbG9yLFxuICAgICAgICAgICAgIHUxLmhhc19nb2xkX2FuaW1hdGlvbiBhcyByZXF1ZXN0ZXJfaGFzX2dvbGQsXG4gICAgICAgICAgICAgdTIuaGFzX2dvbGRfYW5pbWF0aW9uIGFzIGFkZHJlc3NlZV9oYXNfZ29sZFxuICAgICAgRlJPTSBmcmllbmRzaGlwcyBmXG4gICAgICBKT0lOIHVzZXJzIHUxIE9OIGYucmVxdWVzdGVyX2lkID0gdTEuaWRcbiAgICAgIEpPSU4gdXNlcnMgdTIgT04gZi5hZGRyZXNzZWVfaWQgPSB1Mi5pZFxuICAgICAgV0hFUkUgKGYucmVxdWVzdGVyX2lkID0gJHt1c2VySWR9IE9SIGYuYWRkcmVzc2VlX2lkID0gJHt1c2VySWR9KVxuICAgICAgT1JERVIgQlkgZi5jcmVhdGVkX2F0IERFU0NcbiAgICBgXG4gICAgcmV0dXJuIHJlc3VsdFxuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiW2RiXSBnZXRGcmllbmRzaGlwcyBlcnJvcjpcIiwgZXJyKVxuICAgIHRocm93IG5ldyBFcnJvcihcIkRhdGFiYXNlIGVycm9yOiBcIiArIChlcnIgYXMgRXJyb3IpLm1lc3NhZ2UpXG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFjY2VwdGVkRnJpZW5kcyh1c2VySWQ6IHN0cmluZykge1xuICB0cnkge1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNxbGBcbiAgICAgIFNFTEVDVCBESVNUSU5DVFxuICAgICAgICBDQVNFIFxuICAgICAgICAgIFdIRU4gZi5yZXF1ZXN0ZXJfaWQgPSAke3VzZXJJZH0gVEhFTiB1Mi5pZFxuICAgICAgICAgIEVMU0UgdTEuaWRcbiAgICAgICAgRU5EIGFzIGZyaWVuZF9pZCxcbiAgICAgICAgQ0FTRSBcbiAgICAgICAgICBXSEVOIGYucmVxdWVzdGVyX2lkID0gJHt1c2VySWR9IFRIRU4gdTIudXNlcm5hbWVcbiAgICAgICAgICBFTFNFIHUxLnVzZXJuYW1lXG4gICAgICAgIEVORCBhcyBmcmllbmRfdXNlcm5hbWUsXG4gICAgICAgIENBU0UgXG4gICAgICAgICAgV0hFTiBmLnJlcXVlc3Rlcl9pZCA9ICR7dXNlcklkfSBUSEVOIHUyLm5hbWVfY29sb3JcbiAgICAgICAgICBFTFNFIHUxLm5hbWVfY29sb3JcbiAgICAgICAgRU5EIGFzIGZyaWVuZF9uYW1lX2NvbG9yLFxuICAgICAgICBDQVNFIFxuICAgICAgICAgIFdIRU4gZi5yZXF1ZXN0ZXJfaWQgPSAke3VzZXJJZH0gVEhFTiB1Mi5oYXNfZ29sZF9hbmltYXRpb25cbiAgICAgICAgICBFTFNFIHUxLmhhc19nb2xkX2FuaW1hdGlvblxuICAgICAgICBFTkQgYXMgZnJpZW5kX2hhc19nb2xkXG4gICAgICBGUk9NIGZyaWVuZHNoaXBzIGZcbiAgICAgIEpPSU4gdXNlcnMgdTEgT04gZi5yZXF1ZXN0ZXJfaWQgPSB1MS5pZFxuICAgICAgSk9JTiB1c2VycyB1MiBPTiBmLmFkZHJlc3NlZV9pZCA9IHUyLmlkXG4gICAgICBXSEVSRSAoZi5yZXF1ZXN0ZXJfaWQgPSAke3VzZXJJZH0gT1IgZi5hZGRyZXNzZWVfaWQgPSAke3VzZXJJZH0pXG4gICAgICBBTkQgZi5zdGF0dXMgPSAnYWNjZXB0ZWQnXG4gICAgICBPUkRFUiBCWSBmcmllbmRfdXNlcm5hbWVcbiAgICBgXG4gICAgcmV0dXJuIHJlc3VsdFxuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiW2RiXSBnZXRBY2NlcHRlZEZyaWVuZHMgZXJyb3I6XCIsIGVycilcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJEYXRhYmFzZSBlcnJvcjogXCIgKyAoZXJyIGFzIEVycm9yKS5tZXNzYWdlKVxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVc2VyRE1zKHVzZXJJZDogc3RyaW5nKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc3FsYFxuICAgICAgU0VMRUNUIERJU1RJTkNUXG4gICAgICAgIENBU0VcbiAgICAgICAgICBXSEVOIG0uc2VuZGVyX2lkID0gJHt1c2VySWR9IFRIRU4gbS5jaGF0X2lkXG4gICAgICAgICAgRUxTRSBtLnNlbmRlcl9pZFxuICAgICAgICBFTkQgYXMgZnJpZW5kX2lkLFxuICAgICAgICB1LnVzZXJuYW1lIGFzIGZyaWVuZF91c2VybmFtZSxcbiAgICAgICAgdS5uYW1lX2NvbG9yIGFzIGZyaWVuZF9uYW1lX2NvbG9yLFxuICAgICAgICB1Lmhhc19nb2xkX2FuaW1hdGlvbiBhcyBmcmllbmRfaGFzX2dvbGQsXG4gICAgICAgIE1BWChtLmNyZWF0ZWRfYXQpIGFzIGxhc3RfbWVzc2FnZV9hdFxuICAgICAgRlJPTSBtZXNzYWdlcyBtXG4gICAgICBKT0lOIHVzZXJzIHUgT04gXG4gICAgICAgIENBU0VcbiAgICAgICAgICBXSEVOIG0uc2VuZGVyX2lkID0gJHt1c2VySWR9IFRIRU4gbS5jaGF0X2lkXG4gICAgICAgICAgRUxTRSBtLnNlbmRlcl9pZFxuICAgICAgICBFTkQgPSB1LmlkXG4gICAgICBXSEVSRSBtLmNoYXRfdHlwZSA9ICdkbScgXG4gICAgICBBTkQgKG0uc2VuZGVyX2lkID0gJHt1c2VySWR9IE9SIG0uY2hhdF9pZCA9ICR7dXNlcklkfSlcbiAgICAgIEFORCB1LmlkICE9ICR7dXNlcklkfVxuICAgICAgQU5EIHUuaWQgIT0gJHtBSV9VU0VSX0lEfVxuICAgICAgR1JPVVAgQlkgZnJpZW5kX2lkLCB1LnVzZXJuYW1lLCB1Lm5hbWVfY29sb3IsIHUuaGFzX2dvbGRfYW5pbWF0aW9uXG4gICAgICBPUkRFUiBCWSBsYXN0X21lc3NhZ2VfYXQgREVTQ1xuICAgIGBcbiAgICByZXR1cm4gcmVzdWx0XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJbZGJdIGdldFVzZXJETXMgZXJyb3I6XCIsIGVycilcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJEYXRhYmFzZSBlcnJvcjogXCIgKyAoZXJyIGFzIEVycm9yKS5tZXNzYWdlKVxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVOb3RpZmljYXRpb24oXG4gIHVzZXJJZDogc3RyaW5nLFxuICB0aXRsZTogc3RyaW5nLFxuICBtZXNzYWdlOiBzdHJpbmcsXG4gIGNoYXRUeXBlPzogc3RyaW5nLFxuICBjaGF0SWQ/OiBzdHJpbmcsXG4gIHNlbmRlclVzZXJuYW1lPzogc3RyaW5nLFxuKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc3FsYFxuICAgICAgSU5TRVJUIElOVE8gbm90aWZpY2F0aW9ucyAodXNlcl9pZCwgdGl0bGUsIG1lc3NhZ2UsIGNoYXRfdHlwZSwgY2hhdF9pZCwgc2VuZGVyX3VzZXJuYW1lKVxuICAgICAgVkFMVUVTICgke3VzZXJJZH0sICR7dGl0bGV9LCAke21lc3NhZ2V9LCAke2NoYXRUeXBlfSwgJHtjaGF0SWR9LCAke3NlbmRlclVzZXJuYW1lfSlcbiAgICAgIFJFVFVSTklORyAqXG4gICAgYFxuICAgIHJldHVybiByZXN1bHRbMF1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgY29uc29sZS5lcnJvcihcIltkYl0gY3JlYXRlTm90aWZpY2F0aW9uIGVycm9yOlwiLCBlcnIpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiRGF0YWJhc2UgZXJyb3I6IFwiICsgKGVyciBhcyBFcnJvcikubWVzc2FnZSlcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VW5yZWFkTm90aWZpY2F0aW9ucyh1c2VySWQ6IHN0cmluZykge1xuICB0cnkge1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNxbGBcbiAgICAgIFNFTEVDVCAqIEZST00gbm90aWZpY2F0aW9uc1xuICAgICAgV0hFUkUgdXNlcl9pZCA9ICR7dXNlcklkfSBBTkQgaXNfcmVhZCA9IEZBTFNFXG4gICAgICBPUkRFUiBCWSBjcmVhdGVkX2F0IERFU0NcbiAgICBgXG4gICAgcmV0dXJuIHJlc3VsdFxuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiW2RiXSBnZXRVbnJlYWROb3RpZmljYXRpb25zIGVycm9yOlwiLCBlcnIpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiRGF0YWJhc2UgZXJyb3I6IFwiICsgKGVyciBhcyBFcnJvcikubWVzc2FnZSlcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbWFya05vdGlmaWNhdGlvbkFzUmVhZChub3RpZmljYXRpb25JZDogc3RyaW5nLCB1c2VySWQ6IHN0cmluZykge1xuICB0cnkge1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNxbGBcbiAgICAgIFVQREFURSBub3RpZmljYXRpb25zXG4gICAgICBTRVQgaXNfcmVhZCA9IFRSVUUsIGNyZWF0ZWRfYXQgPSBOT1coKVxuICAgICAgV0hFUkUgaWQgPSAke25vdGlmaWNhdGlvbklkfSBBTkQgdXNlcl9pZCA9ICR7dXNlcklkfVxuICAgICAgUkVUVVJOSU5HICpcbiAgICBgXG4gICAgcmV0dXJuIHJlc3VsdFswXVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiW2RiXSBtYXJrTm90aWZpY2F0aW9uQXNSZWFkIGVycm9yOlwiLCBlcnIpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiRGF0YWJhc2UgZXJyb3I6IFwiICsgKGVyciBhcyBFcnJvcikubWVzc2FnZSlcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYWRkTWVzc2FnZVJlYWN0aW9uKG1lc3NhZ2VJZDogc3RyaW5nLCB1c2VySWQ6IHN0cmluZywgZW1vamk6IHN0cmluZykge1xuICB0cnkge1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNxbGBcbiAgICAgIElOU0VSVCBJTlRPIG1lc3NhZ2VfcmVhY3Rpb25zIChtZXNzYWdlX2lkLCB1c2VyX2lkLCBlbW9qaSlcbiAgICAgIFZBTFVFUyAoJHttZXNzYWdlSWR9LCAke3VzZXJJZH0sICR7ZW1vaml9KVxuICAgICAgT04gQ09ORkxJQ1QgKG1lc3NhZ2VfaWQsIHVzZXJfaWQsIGVtb2ppKSBETyBOT1RISU5HXG4gICAgICBSRVRVUk5JTkcgKlxuICAgIGBcbiAgICByZXR1cm4gcmVzdWx0WzBdXG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJbZGJdIGFkZE1lc3NhZ2VSZWFjdGlvbiBlcnJvcjpcIiwgZXJyKVxuICAgIHRocm93IG5ldyBFcnJvcihcIkRhdGFiYXNlIGVycm9yOiBcIiArIChlcnIgYXMgRXJyb3IpLm1lc3NhZ2UpXG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlbW92ZU1lc3NhZ2VSZWFjdGlvbihtZXNzYWdlSWQ6IHN0cmluZywgdXNlcklkOiBzdHJpbmcsIGVtb2ppOiBzdHJpbmcpIHtcbiAgdHJ5IHtcbiAgICBhd2FpdCBzcWxgXG4gICAgICBERUxFVEUgRlJPTSBtZXNzYWdlX3JlYWN0aW9uc1xuICAgICAgV0hFUkUgbWVzc2FnZV9pZCA9ICR7bWVzc2FnZUlkfVxuICAgICAgICBBTkQgdXNlcl9pZCAgID0gJHt1c2VySWR9XG4gICAgICAgIEFORCBlbW9qaSAgICAgPSAke2Vtb2ppfVxuICAgIGBcbiAgICByZXR1cm4gdHJ1ZVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiW2RiXSByZW1vdmVNZXNzYWdlUmVhY3Rpb24gZXJyb3I6XCIsIGVycilcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJEYXRhYmFzZSBlcnJvcjogXCIgKyAoZXJyIGFzIEVycm9yKS5tZXNzYWdlKVxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVVc2VyU2V0dGluZ3ModXNlcklkOiBzdHJpbmcsIHVwZGF0ZXM6IGFueSkge1xuICB0cnkge1xuICAgIGNvbnN0IGFsbG93ZWRGaWVsZHMgPSBbXCJuYW1lX2NvbG9yXCIsIFwibm90aWZpY2F0aW9uc19lbmFibGVkXCIsIFwidGhlbWVcIiwgXCJodWVcIiwgXCJ1aV9tb2RlXCJdXG4gICAgY29uc3QgdmFsaWRVcGRhdGVzOiBhbnkgPSB7fVxuXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXModXBkYXRlcykpIHtcbiAgICAgIGlmIChhbGxvd2VkRmllbGRzLmluY2x1ZGVzKGtleSkpIHtcbiAgICAgICAgdmFsaWRVcGRhdGVzW2tleV0gPSB2YWx1ZVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChPYmplY3Qua2V5cyh2YWxpZFVwZGF0ZXMpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gdmFsaWQgZmllbGRzIHRvIHVwZGF0ZVwiKVxuICAgIH1cblxuICAgIGNvbnN0IHNldENsYXVzZSA9IE9iamVjdC5rZXlzKHZhbGlkVXBkYXRlcylcbiAgICAgIC5tYXAoKGtleSwgaW5kZXgpID0+IGAke2tleX0gPSAkJHtpbmRleCArIDJ9YClcbiAgICAgIC5qb2luKFwiLCBcIilcblxuICAgIGNvbnN0IHF1ZXJ5U3RyaW5nID0gYFxuICAgICAgVVBEQVRFIHVzZXJzIFxuICAgICAgU0VUICR7c2V0Q2xhdXNlfSwgdXBkYXRlZF9hdCA9IE5PVygpXG4gICAgICBXSEVSRSBpZCA9ICQxXG4gICAgICBSRVRVUk5JTkcgaWQsIHVzZXJuYW1lLCBlbWFpbCwgc2lnbnVwX2NvZGUsIG5hbWVfY29sb3IsIGN1c3RvbV90aXRsZSwgaGFzX2dvbGRfYW5pbWF0aW9uLCBub3RpZmljYXRpb25zX2VuYWJsZWQsIHRoZW1lLCBodWUsIHByb2ZpbGVfcGljdHVyZSwgYmlvLCB1aV9tb2RlXG4gICAgYFxuXG4gICAgY29uc3QgcGFyYW1zID0gW3VzZXJJZCwgLi4uT2JqZWN0LnZhbHVlcyh2YWxpZFVwZGF0ZXMpXVxuICAgIGNvbnN0IHJlc3VsdDogYW55W10gPSBhd2FpdCAoc3FsIGFzIGFueSkudW5zYWZlKHF1ZXJ5U3RyaW5nLCBwYXJhbXMgYXMgYW55KVxuXG4gICAgaWYgKCFyZXN1bHQgfHwgKHJlc3VsdCBhcyBhbnkpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVXNlciBub3QgZm91bmQgb3Igbm8gc2V0dGluZ3MgdXBkYXRlZC5cIilcbiAgICB9XG5cbiAgICByZXR1cm4gKHJlc3VsdCBhcyBhbnkpWzBdXG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJbZGJdIHVwZGF0ZVVzZXJTZXR0aW5ncyBlcnJvcjpcIiwgZXJyKVxuICAgIHRocm93IG5ldyBFcnJvcihcIkRhdGFiYXNlIGVycm9yOiBcIiArIChlcnIgYXMgRXJyb3IpLm1lc3NhZ2UpXG4gIH1cbn1cblxuLy8gRnJlZXplIGZlYXR1cmVcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZXRVc2VyRnJvemVuKHRhcmdldFVzZXJJZDogc3RyaW5nLCBmcm96ZW5CeVVzZXJJZDogc3RyaW5nLCBtZXNzYWdlPzogc3RyaW5nKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc3FsYFxuICAgICAgVVBEQVRFIHVzZXJzXG4gICAgICBTRVQgaXNfZnJvemVuID0gVFJVRSwgZnJvemVuX2J5ID0gJHtmcm96ZW5CeVVzZXJJZH0sIGZyZWV6ZV9tZXNzYWdlID0gJHttZXNzYWdlIHx8IG51bGx9LCB1cGRhdGVkX2F0ID0gTk9XKClcbiAgICAgIFdIRVJFIGlkID0gJHt0YXJnZXRVc2VySWR9XG4gICAgICBSRVRVUk5JTkcgaWQsIGlzX2Zyb3plbiwgZnJvemVuX2J5LCBmcmVlemVfbWVzc2FnZVxuICAgIGBcbiAgICByZXR1cm4gcmVzdWx0WzBdXG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJbZGJdIHNldFVzZXJGcm96ZW4gZXJyb3I6XCIsIGVycilcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJEYXRhYmFzZSBlcnJvcjogXCIgKyAoZXJyIGFzIEVycm9yKS5tZXNzYWdlKVxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjbGVhclVzZXJGcm96ZW4odGFyZ2V0VXNlcklkOiBzdHJpbmcpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzcWxgXG4gICAgICBVUERBVEUgdXNlcnNcbiAgICAgIFNFVCBpc19mcm96ZW4gPSBGQUxTRSwgZnJvemVuX2J5ID0gTlVMTCwgZnJlZXplX21lc3NhZ2UgPSBOVUxMLCB1cGRhdGVkX2F0ID0gTk9XKClcbiAgICAgIFdIRVJFIGlkID0gJHt0YXJnZXRVc2VySWR9XG4gICAgICBSRVRVUk5JTkcgaWQsIGlzX2Zyb3plbiwgZnJvemVuX2J5LCBmcmVlemVfbWVzc2FnZVxuICAgIGBcbiAgICByZXR1cm4gcmVzdWx0WzBdXG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJbZGJdIGNsZWFyVXNlckZyb3plbiBlcnJvcjpcIiwgZXJyKVxuICAgIHRocm93IG5ldyBFcnJvcihcIkRhdGFiYXNlIGVycm9yOiBcIiArIChlcnIgYXMgRXJyb3IpLm1lc3NhZ2UpXG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFVzZXJGcmVlemVTdGF0dXModXNlcklkOiBzdHJpbmcpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzcWxgXG4gICAgICBTRUxFQ1QgaXNfZnJvemVuLCBmcm96ZW5fYnksIGZyZWV6ZV9tZXNzYWdlIEZST00gdXNlcnMgV0hFUkUgaWQgPSAke3VzZXJJZH1cbiAgICBgXG4gICAgcmV0dXJuIHJlc3VsdFswXVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiW2RiXSBnZXRVc2VyRnJlZXplU3RhdHVzIGVycm9yOlwiLCBlcnIpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiRGF0YWJhc2UgZXJyb3I6IFwiICsgKGVyciBhcyBFcnJvcikubWVzc2FnZSlcbiAgfVxufVxuIl0sIm5hbWVzIjpbIm5lb24iLCJBSV9VU0VSX0lEIiwic3FsIiwicHJvY2VzcyIsImVudiIsIkRBVEFCQVNFX1VSTCIsInF1ZXJ5IiwiZGIiLCJjcmVhdGVVc2VyIiwidXNlcm5hbWUiLCJwYXNzd29yZEhhc2giLCJzaWdudXBDb2RlIiwibmFtZUNvbG9yIiwiY3VzdG9tVGl0bGUiLCJoYXNHb2xkQW5pbWF0aW9uIiwicmVzdWx0IiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwiRXJyb3IiLCJtZXNzYWdlIiwiZ2V0VXNlckJ5VXNlcm5hbWUiLCJyb3dzIiwiZ2V0VXNlckJ5SWQiLCJpZCIsInVwZGF0ZVVzZXJBY3Rpdml0eSIsInVzZXJJZCIsImdldE9ubGluZVVzZXJzIiwiY3VycmVudFVzZXJJZCIsInNlYXJjaFVzZXJzIiwic2VhcmNoUXVlcnkiLCJnZXRNZXNzYWdlcyIsImNoYXRUeXBlIiwiY2hhdElkIiwibGltaXQiLCJyZXZlcnNlIiwiY3JlYXRlTWVzc2FnZSIsInNlbmRlcklkIiwiY29udGVudCIsIm1lbnRpb25zIiwiaXNBaVJlc3BvbnNlIiwicGFyZW50TWVzc2FnZUlkIiwibWVzc2FnZVR5cGUiLCJnZW5lcmF0ZVNob3J0Q29kZSIsImNoYXJzIiwiaSIsImNoYXJBdCIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsImxlbmd0aCIsImNyZWF0ZUdyb3VwQ2hhdCIsIm5hbWUiLCJjcmVhdG9ySWQiLCJtZW1iZXJJZHMiLCJzaG9ydENvZGUiLCJhdHRlbXB0cyIsImV4aXN0aW5nIiwibWVtYmVySWQiLCJnZXRVc2VyR3JvdXBDaGF0cyIsImdldEdyb3VwQ2hhdEJ5U2hvcnRDb2RlIiwiY3JlYXRlSm9pblJlcXVlc3QiLCJncm91cENoYXRJZCIsInJlcXVlc3RlcklkIiwiZXhpc3RpbmdNZW1iZXIiLCJleGlzdGluZ1JlcXVlc3QiLCJnZXRQZW5kaW5nSm9pblJlcXVlc3RzIiwiYXBwcm92ZUpvaW5SZXF1ZXN0IiwicmVxdWVzdElkIiwicmVqZWN0Sm9pblJlcXVlc3QiLCJkZWxldGVHcm91cENoYXQiLCJncm91cElkIiwiY2hhdCIsImNyZWF0b3JfaWQiLCJjcmVhdGVGcmllbmRzaGlwIiwiYWRkcmVzc2VlSWQiLCJzdGF0dXMiLCJ1cGRhdGVGcmllbmRzaGlwU3RhdHVzIiwiZnJpZW5kc2hpcElkIiwiZ2V0RnJpZW5kc2hpcHMiLCJnZXRBY2NlcHRlZEZyaWVuZHMiLCJnZXRVc2VyRE1zIiwiY3JlYXRlTm90aWZpY2F0aW9uIiwidGl0bGUiLCJzZW5kZXJVc2VybmFtZSIsImdldFVucmVhZE5vdGlmaWNhdGlvbnMiLCJtYXJrTm90aWZpY2F0aW9uQXNSZWFkIiwibm90aWZpY2F0aW9uSWQiLCJhZGRNZXNzYWdlUmVhY3Rpb24iLCJtZXNzYWdlSWQiLCJlbW9qaSIsInJlbW92ZU1lc3NhZ2VSZWFjdGlvbiIsInVwZGF0ZVVzZXJTZXR0aW5ncyIsInVwZGF0ZXMiLCJhbGxvd2VkRmllbGRzIiwidmFsaWRVcGRhdGVzIiwia2V5IiwidmFsdWUiLCJPYmplY3QiLCJlbnRyaWVzIiwiaW5jbHVkZXMiLCJrZXlzIiwic2V0Q2xhdXNlIiwibWFwIiwiaW5kZXgiLCJqb2luIiwicXVlcnlTdHJpbmciLCJwYXJhbXMiLCJ2YWx1ZXMiLCJ1bnNhZmUiLCJzZXRVc2VyRnJvemVuIiwidGFyZ2V0VXNlcklkIiwiZnJvemVuQnlVc2VySWQiLCJjbGVhclVzZXJGcm96ZW4iLCJnZXRVc2VyRnJlZXplU3RhdHVzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/db.ts\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/next@15.2.4_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fauth%2Fsignup%2Froute&page=%2Fapi%2Fauth%2Fsignup%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fsignup%2Froute.ts&appDir=%2FUsers%2Frohan%2Fcode%2Frealtalk%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Frohan%2Fcode%2Frealtalk&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@15.2.4_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fauth%2Fsignup%2Froute&page=%2Fapi%2Fauth%2Fsignup%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fsignup%2Froute.ts&appDir=%2FUsers%2Frohan%2Fcode%2Frealtalk%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Frohan%2Fcode%2Frealtalk&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/.pnpm/next@15.2.4_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/.pnpm/next@15.2.4_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/.pnpm/next@15.2.4_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_rohan_code_realtalk_app_api_auth_signup_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/auth/signup/route.ts */ \"(rsc)/./app/api/auth/signup/route.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_Users_rohan_code_realtalk_app_api_auth_signup_route_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_Users_rohan_code_realtalk_app_api_auth_signup_route_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/auth/signup/route\",\n        pathname: \"/api/auth/signup\",\n        filename: \"route\",\n        bundlePath: \"app/api/auth/signup/route\"\n    },\n    resolvedPagePath: \"/Users/rohan/code/realtalk/app/api/auth/signup/route.ts\",\n    nextConfigOutput,\n    userland: _Users_rohan_code_realtalk_app_api_auth_signup_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vbmV4dEAxNS4yLjRfcmVhY3QtZG9tQDE5LjAuMF9yZWFjdEAxOS4wLjBfX3JlYWN0QDE5LjAuMC9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZhdXRoJTJGc2lnbnVwJTJGcm91dGUmcGFnZT0lMkZhcGklMkZhdXRoJTJGc2lnbnVwJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGYXV0aCUyRnNpZ251cCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnJvaGFuJTJGY29kZSUyRnJlYWx0YWxrJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRnJvaGFuJTJGY29kZSUyRnJlYWx0YWxrJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUErRjtBQUN2QztBQUNxQjtBQUNPO0FBQ3BGO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix5R0FBbUI7QUFDM0M7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsc0RBQXNEO0FBQzlEO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzBGOztBQUUxRixxQyIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvcm9oYW4vY29kZS9yZWFsdGFsay9hcHAvYXBpL2F1dGgvc2lnbnVwL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9hdXRoL3NpZ251cC9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2F1dGgvc2lnbnVwXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9hdXRoL3NpZ251cC9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9yb2hhbi9jb2RlL3JlYWx0YWxrL2FwcC9hcGkvYXV0aC9zaWdudXAvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICB3b3JrQXN5bmNTdG9yYWdlLFxuICAgICAgICB3b3JrVW5pdEFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/next@15.2.4_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fauth%2Fsignup%2Froute&page=%2Fapi%2Fauth%2Fsignup%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fsignup%2Froute.ts&appDir=%2FUsers%2Frohan%2Fcode%2Frealtalk%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Frohan%2Fcode%2Frealtalk&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/next@15.2.4_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!*********************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@15.2.4_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \*********************************************************************************************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/next@15.2.4_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!*********************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@15.2.4_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \*********************************************************************************************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "@neondatabase/serverless":
/*!*******************************************!*\
  !*** external "@neondatabase/serverless" ***!
  \*******************************************/
/***/ ((module) => {

"use strict";
module.exports = import("@neondatabase/serverless");;

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next@15.2.4_react-dom@19.0.0_react@19.0.0__react@19.0.0","vendor-chunks/jose@6.0.12","vendor-chunks/bcryptjs@3.0.2"], () => (__webpack_exec__("(rsc)/./node_modules/.pnpm/next@15.2.4_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fauth%2Fsignup%2Froute&page=%2Fapi%2Fauth%2Fsignup%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fsignup%2Froute.ts&appDir=%2FUsers%2Frohan%2Fcode%2Frealtalk%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Frohan%2Fcode%2Frealtalk&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();